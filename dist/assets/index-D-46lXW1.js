var Ek=Object.defineProperty;var Vg=n=>{throw TypeError(n)};var xk=(n,e,t)=>e in n?Ek(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Tk=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Fg=(n,e,t)=>xk(n,typeof e!="symbol"?e+"":e,t),zd=(n,e,t)=>e.has(n)||Vg("Cannot "+t);var ne=(n,e,t)=>(zd(n,e,"read from private field"),t?t.call(n):e.get(n)),Ct=(n,e,t)=>e.has(n)?Vg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Qe=(n,e,t,r)=>(zd(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),zt=(n,e,t)=>(zd(n,e,"access private method"),t);import{j as d,t as kk,c as T0,m as ie,a as xe,s as He,f as Jt,g as Lt,L as wc,i as vp,D as Ak,b as Ck,p as Rk,d as en,y as yp,N as k0,e as Ik,l as Nk,h as Pk,k as Ug,n as jk,o as Mk,q as Ok,_ as _p,r as qd,u as Dk,v as sl,A as Oi,w as Wd}from"./ui-vendor-CUwR3GFu.js";import{a as Lk,r as R,e as Vk,R as Me,b as Fk,c as ol,g as Uk}from"./react-vendor-BYtYKvpm.js";var Qq=Tk((aW,XT)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $h={},Bg=Lk;$h.createRoot=Bg.createRoot,$h.hydrateRoot=Bg.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fa.apply(this,arguments)}var ci;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ci||(ci={}));const $g="popstate";function Bk(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zh("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Jl(i)}return zk(e,t,null,n)}function Ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function A0(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $k(){return Math.random().toString(36).substr(2,8)}function zg(n,e){return{usr:n.state,key:n.key,idx:e}}function zh(n,e,t,r){return t===void 0&&(t=null),Fa({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Lo(e):e,{state:t,key:e&&e.key||r||$k()})}function Jl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function zk(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ci.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Fa({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ci.Pop;let N=h(),$=N==null?null:N-u;u=N,c&&c({action:a,location:C.location,delta:$})}function y(N,$){a=ci.Push;let V=zh(C.location,N,$);u=h()+1;let G=zg(V,u),J=C.createHref(V);try{o.pushState(G,"",J)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(J)}s&&c&&c({action:a,location:C.location,delta:1})}function b(N,$){a=ci.Replace;let V=zh(C.location,N,$);u=h();let G=zg(V,u),J=C.createHref(V);o.replaceState(G,"",J),s&&c&&c({action:a,location:C.location,delta:0})}function E(N){let $=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof N=="string"?N:Jl(N);return V=V.replace(/ $/,"%20"),Ut($,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,$)}let C={get action(){return a},get location(){return n(i,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener($g,f),c=N,()=>{i.removeEventListener($g,f),c=null}},createHref(N){return e(i,N)},createURL:E,encodeLocation(N){let $=E(N);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:y,replace:b,go(N){return o.go(N)}};return C}var qg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(qg||(qg={}));function qk(n,e,t){return t===void 0&&(t="/"),Wk(n,e,t,!1)}function Wk(n,e,t,r){let i=typeof e=="string"?Lo(e):e,s=bp(i.pathname||"/",t);if(s==null)return null;let o=C0(n);Gk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=rA(s);a=tA(o[c],u,r)}return a}function C0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ut(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=hi([r,c.relativePath]),h=t.concat(c);s.children&&s.children.length>0&&(Ut(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),C0(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Xk(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of R0(s.path))i(s,o,c)}),e}function R0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=R0(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function Gk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:eA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Hk=/^:[\w-]+$/,Kk=3,Yk=2,Jk=1,Zk=10,Qk=-2,Wg=n=>n==="*";function Xk(n,e){let t=n.split("/"),r=t.length;return t.some(Wg)&&(r+=Qk),e&&(r+=Yk),t.filter(i=>!Wg(i)).reduce((i,s)=>i+(Hk.test(s)?Kk:s===""?Jk:Zk),r)}function eA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function tA(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Gg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),y=c.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=Gg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:hi([s,f.pathname]),pathnameBase:aA(hi([s,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(s=hi([s,f.pathnameBase]))}return o}function Gg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=nA(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:y,isOptional:b}=h;if(y==="*"){let C=a[f]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const E=a[f];return b&&!E?u[y]=void 0:u[y]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function nA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),A0(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return A0(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function iA(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Lo(n):n;return{pathname:t?t.startsWith("/")?t:sA(t,e):e,search:cA(r),hash:lA(i)}}function sA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Gd(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wp(n,e){let t=oA(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Sp(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Lo(n):(i=Fa({},n),Ut(!i.pathname||!i.pathname.includes("?"),Gd("?","pathname","search",i)),Ut(!i.pathname||!i.pathname.includes("#"),Gd("#","pathname","hash",i)),Ut(!i.search||!i.search.includes("#"),Gd("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),f-=1;i.pathname=y.join("/")}a=f>=0?e[f]:"/"}let c=iA(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const hi=n=>n.join("/").replace(/\/\/+/g,"/"),aA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),cA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function uA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const I0=["post","put","patch","delete"];new Set(I0);const dA=["get",...I0];new Set(dA);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ua.apply(this,arguments)}const Ep=R.createContext(null),hA=R.createContext(null),ki=R.createContext(null),Vu=R.createContext(null),Pr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),N0=R.createContext(null);function fA(n,e){let{relative:t}=e===void 0?{}:e;Vo()||Ut(!1);let{basename:r,navigator:i}=R.useContext(ki),{hash:s,pathname:o,search:a}=j0(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:hi([r,o])),i.createHref({pathname:c,search:a,hash:s})}function Vo(){return R.useContext(Vu)!=null}function Sc(){return Vo()||Ut(!1),R.useContext(Vu).location}function P0(n){R.useContext(ki).static||R.useLayoutEffect(n)}function vs(){let{isDataRoute:n}=R.useContext(Pr);return n?AA():pA()}function pA(){Vo()||Ut(!1);let n=R.useContext(Ep),{basename:e,future:t,navigator:r}=R.useContext(ki),{matches:i}=R.useContext(Pr),{pathname:s}=Sc(),o=JSON.stringify(wp(i,t.v7_relativeSplatPath)),a=R.useRef(!1);return P0(()=>{a.current=!0}),R.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=Sp(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:hi([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,n])}function mA(){let{matches:n}=R.useContext(Pr),e=n[n.length-1];return e?e.params:{}}function j0(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=R.useContext(ki),{matches:i}=R.useContext(Pr),{pathname:s}=Sc(),o=JSON.stringify(wp(i,r.v7_relativeSplatPath));return R.useMemo(()=>Sp(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function gA(n,e){return vA(n,e)}function vA(n,e,t,r){Vo()||Ut(!1);let{navigator:i}=R.useContext(ki),{matches:s}=R.useContext(Pr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Sc(),h;if(e){var f;let N=typeof e=="string"?Lo(e):e;c==="/"||(f=N.pathname)!=null&&f.startsWith(c)||Ut(!1),h=N}else h=u;let y=h.pathname||"/",b=y;if(c!=="/"){let N=c.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=qk(n,{pathname:b}),C=SA(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:hi([c,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:hi([c,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,t,r);return e&&C?R.createElement(Vu.Provider,{value:{location:Ua({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ci.Pop}},C):C}function yA(){let n=kA(),e=uA(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,null)}const _A=R.createElement(yA,null);class bA extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(Pr.Provider,{value:this.props.routeContext},R.createElement(N0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wA(n){let{routeContext:e,match:t,children:r}=n,i=R.useContext(Ep);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Pr.Provider,{value:e},r)}function SA(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ut(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:y,errors:b}=t,E=f.route.loader&&y[f.route.id]===void 0&&(!b||b[f.route.id]===void 0);if(f.route.lazy||E){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,y)=>{let b,E=!1,C=null,N=null;t&&(b=a&&f.route.id?a[f.route.id]:void 0,C=f.route.errorElement||_A,c&&(u<0&&y===0?(E=!0,N=null):u===y&&(E=!0,N=f.route.hydrateFallbackElement||null)));let $=e.concat(o.slice(0,y+1)),V=()=>{let G;return b?G=C:E?G=N:f.route.Component?G=R.createElement(f.route.Component,null):f.route.element?G=f.route.element:G=h,R.createElement(wA,{match:f,routeContext:{outlet:h,matches:$,isDataRoute:t!=null},children:G})};return t&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?R.createElement(bA,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:V(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):V()},null)}var M0=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(M0||{}),Zl=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Zl||{});function EA(n){let e=R.useContext(Ep);return e||Ut(!1),e}function xA(n){let e=R.useContext(hA);return e||Ut(!1),e}function TA(n){let e=R.useContext(Pr);return e||Ut(!1),e}function O0(n){let e=TA(),t=e.matches[e.matches.length-1];return t.route.id||Ut(!1),t.route.id}function kA(){var n;let e=R.useContext(N0),t=xA(Zl.UseRouteError),r=O0(Zl.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function AA(){let{router:n}=EA(M0.UseNavigateStable),e=O0(Zl.UseNavigateStable),t=R.useRef(!1);return P0(()=>{t.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Ua({fromRouteId:e},s)))},[n,e])}const Hg={};function CA(n,e){Hg[e]||(Hg[e]=!0,console.warn(e))}const Kg=(n,e,t)=>CA(n,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function RA(n,e){n!=null&&n.v7_startTransition||Kg("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&!e&&Kg("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function IA(n){let{to:e,replace:t,state:r,relative:i}=n;Vo()||Ut(!1);let{future:s,static:o}=R.useContext(ki),{matches:a}=R.useContext(Pr),{pathname:c}=Sc(),u=vs(),h=Sp(e,wp(a,s.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(h);return R.useEffect(()=>u(JSON.parse(f),{replace:t,state:r,relative:i}),[u,f,i,t,r]),null}function Wr(n){Ut(!1)}function NA(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ci.Pop,navigator:s,static:o=!1,future:a}=n;Vo()&&Ut(!1);let c=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:c,navigator:s,static:o,future:Ua({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Lo(r));let{pathname:h="/",search:f="",hash:y="",state:b=null,key:E="default"}=r,C=R.useMemo(()=>{let N=bp(h,c);return N==null?null:{location:{pathname:N,search:f,hash:y,state:b,key:E},navigationType:i}},[c,h,f,y,b,E,i]);return C==null?null:R.createElement(ki.Provider,{value:u},R.createElement(Vu.Provider,{children:t,value:C}))}function PA(n){let{children:e,location:t}=n;return gA(qh(e),t)}new Promise(()=>{});function qh(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){t.push.apply(t,qh(r.props.children,s));return}r.type!==Wr&&Ut(!1),!r.props.index||!r.props.children||Ut(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qh(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wh.apply(this,arguments)}function jA(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function MA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OA(n,e){return n.button===0&&(!e||e==="_self")&&!MA(n)}const DA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LA="6";try{window.__reactRouterVersion=LA}catch{}const VA="startTransition",Yg=Vk[VA];function FA(n){let{basename:e,children:t,future:r,window:i}=n,s=R.useRef();s.current==null&&(s.current=Bk({window:i,v5Compat:!0}));let o=s.current,[a,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=R.useCallback(f=>{u&&Yg?Yg(()=>c(f)):c(f)},[c,u]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>RA(r),[r]),R.createElement(NA,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cn=R.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,y=jA(e,DA),{basename:b}=R.useContext(ki),E,C=!1;if(typeof u=="string"&&BA.test(u)&&(E=u,UA))try{let G=new URL(window.location.href),J=u.startsWith("//")?new URL(G.protocol+u):new URL(u),q=bp(J.pathname,b);J.origin===G.origin&&q!=null?u=q+J.search+J.hash:C=!0}catch{}let N=fA(u,{relative:i}),$=$A(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:f});function V(G){r&&r(G),G.defaultPrevented||$(G)}return R.createElement("a",Wh({},y,{href:E||N,onClick:C||s?r:V,ref:t,target:c}))});var Jg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Zg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Zg||(Zg={}));function $A(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=vs(),u=Sc(),h=j0(n,{relative:o});return R.useCallback(f=>{if(OA(f,t)){f.preventDefault();let y=r!==void 0?r:Jl(u)===Jl(h);c(n,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,c,h,r,i,t,n,s,o,a])}function zA(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[i,s]=R.useState(!1),o=R.useRef(t);o.current=t;const a=R.useRef(r);return a.current=r,R.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var u;s(!0),(u=o.current)===null||u===void 0||u.call(o)},c.onerror=()=>{var u;s(!1),(u=a.current)===null||u===void 0||u.call(a)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const D0=R.createContext(null);function qA({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:i}){const s=zA({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),o=R.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:s}),[n,s]);return Me.createElement(D0.Provider,{value:o},i)}function WA(){const n=R.useContext(D0);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function GA({flow:n="implicit",scope:e="",onSuccess:t,onError:r,onNonOAuthError:i,overrideScope:s,state:o,...a}){const{clientId:c,scriptLoadedSuccessfully:u}=WA(),h=R.useRef(),f=R.useRef(t);f.current=t;const y=R.useRef(r);y.current=r;const b=R.useRef(i);b.current=i,R.useEffect(()=>{var N,$;if(!u)return;const V=n==="implicit"?"initTokenClient":"initCodeClient",G=($=(N=window==null?void 0:window.google)===null||N===void 0?void 0:N.accounts)===null||$===void 0?void 0:$.oauth2[V]({client_id:c,scope:s?e:`openid profile email ${e}`,callback:J=>{var q,z;if(J.error)return(q=y.current)===null||q===void 0?void 0:q.call(y,J);(z=f.current)===null||z===void 0||z.call(f,J)},error_callback:J=>{var q;(q=b.current)===null||q===void 0||q.call(b,J)},state:o,...a});h.current=G},[c,u,n,e,o]);const E=R.useCallback(N=>{var $;return($=h.current)===null||$===void 0?void 0:$.requestAccessToken(N)},[]),C=R.useCallback(()=>{var N;return(N=h.current)===null||N===void 0?void 0:N.requestCode()},[]);return n==="implicit"?E:C}var L0={};function HA(n){const e=new Error(n);if(e.stack===void 0)try{throw e}catch{}return e}var KA=HA,ze=KA;function YA(n){return!!n&&typeof n.then=="function"}var Tt=YA;function JA(n,e){if(n!=null)return n;throw ze(e??"Got unexpected null or undefined")}var At=JA;function Ve(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class Fu{getValue(){throw ze("BaseLoadable")}toPromise(){throw ze("BaseLoadable")}valueMaybe(){throw ze("BaseLoadable")}valueOrThrow(){throw ze(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw ze("BaseLoadable")}promiseOrThrow(){throw ze(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw ze("BaseLoadable")}errorOrThrow(){throw ze(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw ze("BaseLoadable")}}class ZA extends Fu{constructor(e){super(),Ve(this,"state","hasValue"),Ve(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return Tt(t)?rs(t):vo(t)?t:Ec(t)}catch(t){return Tt(t)?rs(t.next(()=>this.map(e))):Uu(t)}}}class QA extends Fu{constructor(e){super(),Ve(this,"state","hasError"),Ve(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class V0 extends Fu{constructor(e){super(),Ve(this,"state","loading"),Ve(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return rs(this.contents.then(t=>{const r=e(t);if(vo(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(t=>{if(Tt(t))return t.then(()=>this.map(e).contents);throw t}))}}function Ec(n){return Object.freeze(new ZA(n))}function Uu(n){return Object.freeze(new QA(n))}function rs(n){return Object.freeze(new V0(n))}function F0(){return Object.freeze(new V0(new Promise(()=>{})))}function XA(n){return n.every(e=>e.state==="hasValue")?Ec(n.map(e=>e.contents)):n.some(e=>e.state==="hasError")?Uu(At(n.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):rs(Promise.all(n.map(e=>e.contents)))}function U0(n){const t=(Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(i=>n[i])).map(i=>vo(i)?i:Tt(i)?rs(i):Ec(i)),r=XA(t);return Array.isArray(n)?r:r.map(i=>Object.getOwnPropertyNames(n).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function vo(n){return n instanceof Fu}const eC={of:n=>Tt(n)?rs(n):vo(n)?n:Ec(n),error:n=>Uu(n),loading:()=>F0(),all:U0,isLoadable:vo};var ys={loadableWithValue:Ec,loadableWithError:Uu,loadableWithPromise:rs,loadableLoading:F0,loadableAll:U0,isLoadable:vo,RecoilLoadable:eC},tC=ys.loadableWithValue,nC=ys.loadableWithError,rC=ys.loadableWithPromise,iC=ys.loadableLoading,sC=ys.loadableAll,oC=ys.isLoadable,aC=ys.RecoilLoadable,xc=Object.freeze({__proto__:null,loadableWithValue:tC,loadableWithError:nC,loadableWithPromise:rC,loadableLoading:iC,loadableAll:sC,isLoadable:oC,RecoilLoadable:aC});const Gh={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function cC(n,e){var t,r;const i=(t=L0[n])===null||t===void 0||(r=t.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw ze(`process.env.${n} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function lC(n,e){var t;const r=(t=L0[n])===null||t===void 0?void 0:t.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function uC(){var n;typeof process>"u"||((n=process)===null||n===void 0?void 0:n.env)!=null&&(cC("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Gh.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),lC("RECOIL_GKS_ENABLED",e=>{e.forEach(t=>{Gh.RECOIL_GKS_ENABLED.add(t)})}))}uC();var Fo=Gh;function Bu(n){return Fo.RECOIL_GKS_ENABLED.has(n)}Bu.setPass=n=>{Fo.RECOIL_GKS_ENABLED.add(n)};Bu.setFail=n=>{Fo.RECOIL_GKS_ENABLED.delete(n)};Bu.clear=()=>{Fo.RECOIL_GKS_ENABLED.clear()};var _t=Bu;function dC(n,e,{error:t}={}){return null}var hC=dC,xp=hC,Hd,Kd,Yd;const fC=(Hd=Me.createMutableSource)!==null&&Hd!==void 0?Hd:Me.unstable_createMutableSource,B0=(Kd=Me.useMutableSource)!==null&&Kd!==void 0?Kd:Me.unstable_useMutableSource,$0=(Yd=Me.useSyncExternalStore)!==null&&Yd!==void 0?Yd:Me.unstable_useSyncExternalStore;function pC(){var n;const{ReactCurrentDispatcher:e,ReactCurrentOwner:t}=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((n=e==null?void 0:e.current)!==null&&n!==void 0?n:t.currentDispatcher).useSyncExternalStore!=null}function mC(){return _t("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:_t("recoil_sync_external_store")&&$0!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:_t("recoil_mutable_source")&&B0!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?_t("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:_t("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function gC(){return!1}var Tc={createMutableSource:fC,useMutableSource:B0,useSyncExternalStore:$0,currentRendererSupportsUseSyncExternalStore:pC,reactMode:mC,isFastRefreshEnabled:gC};class Tp{constructor(e){Ve(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class z0 extends Tp{}class q0 extends Tp{}function vC(n){return n instanceof z0||n instanceof q0}var $u={AbstractRecoilValue:Tp,RecoilState:z0,RecoilValueReadOnly:q0,isRecoilValue:vC},yC=$u.AbstractRecoilValue,_C=$u.RecoilState,bC=$u.RecoilValueReadOnly,wC=$u.isRecoilValue,yo=Object.freeze({__proto__:null,AbstractRecoilValue:yC,RecoilState:_C,RecoilValueReadOnly:bC,isRecoilValue:wC});function SC(n,e){return function*(){let t=0;for(const r of n)yield e(r,t++)}()}var zu=SC;class W0{}const EC=new W0,is=new Map,kp=new Map;function xC(n){return zu(n,e=>At(kp.get(e)))}function TC(n){if(is.has(n)){const e=`Duplicate atom key "${n}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function kC(n){Fo.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&TC(n.key),is.set(n.key,n);const e=n.set==null?new yo.RecoilValueReadOnly(n.key):new yo.RecoilState(n.key);return kp.set(n.key,e),e}class G0 extends Error{}function AC(n){const e=is.get(n);if(e==null)throw new G0(`Missing definition for RecoilValue: "${n}""`);return e}function CC(n){return is.get(n)}const Ql=new Map;function RC(n){var e;if(!_t("recoil_memory_managament_2020"))return;const t=is.get(n);if(t!=null&&(e=t.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(t)){var r;is.delete(n),(r=H0(n))===null||r===void 0||r(),Ql.delete(n)}}function IC(n,e){_t("recoil_memory_managament_2020")&&(e===void 0?Ql.delete(n):Ql.set(n,e))}function H0(n){return Ql.get(n)}var Tn={nodes:is,recoilValues:kp,registerNode:kC,getNode:AC,getNodeMaybe:CC,deleteNodeConfigIfPossible:RC,setConfigDeletionHandler:IC,getConfigDeletionHandler:H0,recoilValuesForKeys:xC,NodeMissingError:G0,DefaultValue:W0,DEFAULT_VALUE:EC};function NC(n,e){e()}var PC={enqueueExecution:NC};function jC(n,e){return e={exports:{}},n(e,e.exports),e.exports}var MC=jC(function(n){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},t={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,c={},u=function(L){return function(){return L}},h=t.hash=function(B){var L=typeof B>"u"?"undefined":e(B);if(L==="number")return B;L!=="string"&&(B+="");for(var Z=0,ce=0,le=B.length;ce<le;++ce){var fe=B.charCodeAt(ce);Z=(Z<<5)-Z+fe|0}return Z},f=function(L){return L-=L>>1&1431655765,L=(L&858993459)+(L>>2&858993459),L=L+(L>>4)&252645135,L+=L>>8,L+=L>>16,L&127},y=function(L,Z){return Z>>>L&s},b=function(L){return 1<<L},E=function(L,Z){return f(L&Z-1)},C=function(L,Z,ce,le){var fe=le;if(!L){var be=le.length;fe=new Array(be);for(var we=0;we<be;++we)fe[we]=le[we]}return fe[Z]=ce,fe},N=function(L,Z,ce){var le=ce.length-1,fe=0,be=0,we=ce;if(L)fe=be=Z;else for(we=new Array(le);fe<Z;)we[be++]=ce[fe++];for(++fe;fe<=le;)we[be++]=ce[fe++];return L&&(we.length=le),we},$=function(L,Z,ce,le){var fe=le.length;if(L){for(var be=fe;be>=Z;)le[be--]=le[be];return le[Z]=ce,le}for(var we=0,Se=0,Re=new Array(fe+1);we<Z;)Re[Se++]=le[we++];for(Re[Z]=ce;we<fe;)Re[++Se]=le[we++];return Re},V=1,G=2,J=3,q=4,z={__hamt_isEmpty:!0},k=function(L){return L===z||L&&L.__hamt_isEmpty},S=function(L,Z,ce,le){return{type:V,edit:L,hash:Z,key:ce,value:le,_modify:dt}},A=function(L,Z,ce){return{type:G,edit:L,hash:Z,children:ce,_modify:st}},P=function(L,Z,ce){return{type:J,edit:L,mask:Z,children:ce,_modify:me}},j=function(L,Z,ce){return{type:q,edit:L,size:Z,children:ce,_modify:p}},I=function(L){return L===z||L.type===V||L.type===G},x=function(L,Z,ce,le,fe){for(var be=[],we=le,Se=0,Re=0;we;++Re)we&1&&(be[Re]=fe[Se++]),we>>>=1;return be[Z]=ce,j(L,Se+1,be)},ye=function(L,Z,ce,le){for(var fe=new Array(Z-1),be=0,we=0,Se=0,Re=le.length;Se<Re;++Se)if(Se!==ce){var gt=le[Se];gt&&!k(gt)&&(fe[be++]=gt,we|=1<<Se)}return P(L,we,fe)},Oe=function B(L,Z,ce,le,fe,be){if(ce===fe)return A(L,ce,[be,le]);var we=y(Z,ce),Se=y(Z,fe);return P(L,b(we)|b(Se),we===Se?[B(L,Z+r,ce,le,fe,be)]:we<Se?[le,be]:[be,le])},We=function(L,Z,ce,le,fe,be,we,Se){for(var Re=fe.length,gt=0;gt<Re;++gt){var Wt=fe[gt];if(ce(we,Wt.key)){var Ot=Wt.value,Kt=be(Ot);return Kt===Ot?fe:Kt===c?(--Se.value,N(L,gt,fe)):C(L,gt,S(Z,le,we,Kt),fe)}}var yn=be();return yn===c?fe:(++Se.value,C(L,Re,S(Z,le,we,yn),fe))},Be=function(L,Z){return L===Z.edit},dt=function(L,Z,ce,le,fe,be,we){if(Z(be,this.key)){var Se=le(this.value);return Se===this.value?this:Se===c?(--we.value,z):Be(L,this)?(this.value=Se,this):S(L,fe,be,Se)}var Re=le();return Re===c?this:(++we.value,Oe(L,ce,this.hash,this,fe,S(L,fe,be,Re)))},st=function(L,Z,ce,le,fe,be,we){if(fe===this.hash){var Se=Be(L,this),Re=We(Se,L,Z,this.hash,this.children,le,be,we);return Re===this.children?this:Re.length>1?A(L,this.hash,Re):Re[0]}var gt=le();return gt===c?this:(++we.value,Oe(L,ce,this.hash,this,fe,S(L,fe,be,gt)))},me=function(L,Z,ce,le,fe,be,we){var Se=this.mask,Re=this.children,gt=y(ce,fe),Wt=b(gt),Ot=E(Se,Wt),Kt=Se&Wt,yn=Kt?Re[Ot]:z,It=yn._modify(L,Z,ce+r,le,fe,be,we);if(yn===It)return this;var Ni=Be(L,this),Mn=Se,On=void 0;if(Kt&&k(It)){if(Mn&=~Wt,!Mn)return z;if(Re.length<=2&&I(Re[Ot^1]))return Re[Ot^1];On=N(Ni,Ot,Re)}else if(!Kt&&!k(It)){if(Re.length>=o)return x(L,gt,It,Se,Re);Mn|=Wt,On=$(Ni,Ot,It,Re)}else On=C(Ni,Ot,It,Re);return Ni?(this.mask=Mn,this.children=On,this):P(L,Mn,On)},p=function(L,Z,ce,le,fe,be,we){var Se=this.size,Re=this.children,gt=y(ce,fe),Wt=Re[gt],Ot=(Wt||z)._modify(L,Z,ce+r,le,fe,be,we);if(Wt===Ot)return this;var Kt=Be(L,this),yn=void 0;if(k(Wt)&&!k(Ot))++Se,yn=C(Kt,gt,Ot,Re);else if(!k(Wt)&&k(Ot)){if(--Se,Se<=a)return ye(L,Se,gt,Re);yn=C(Kt,gt,z,Re)}else yn=C(Kt,gt,Ot,Re);return Kt?(this.size=Se,this.children=yn,this):j(L,Se,yn)};z._modify=function(B,L,Z,ce,le,fe,be){var we=ce();return we===c?z:(++be.value,S(B,le,fe,we))};function m(B,L,Z,ce,le){this._editable=B,this._edit=L,this._config=Z,this._root=ce,this._size=le}m.prototype.setTree=function(B,L){return this._editable?(this._root=B,this._size=L,this):B===this._root?this:new m(this._editable,this._edit,this._config,B,L)};var _=t.tryGetHash=function(B,L,Z,ce){for(var le=ce._root,fe=0,be=ce._config.keyEq;;)switch(le.type){case V:return be(Z,le.key)?le.value:B;case G:{if(L===le.hash)for(var we=le.children,Se=0,Re=we.length;Se<Re;++Se){var gt=we[Se];if(be(Z,gt.key))return gt.value}return B}case J:{var Wt=y(fe,L),Ot=b(Wt);if(le.mask&Ot){le=le.children[E(le.mask,Ot)],fe+=r;break}return B}case q:{if(le=le.children[y(fe,L)],le){fe+=r;break}return B}default:return B}};m.prototype.tryGetHash=function(B,L,Z){return _(B,L,Z,this)};var T=t.tryGet=function(B,L,Z){return _(B,Z._config.hash(L),L,Z)};m.prototype.tryGet=function(B,L){return T(B,L,this)};var O=t.getHash=function(B,L,Z){return _(void 0,B,L,Z)};m.prototype.getHash=function(B,L){return O(B,L,this)},t.get=function(B,L){return _(void 0,L._config.hash(B),B,L)},m.prototype.get=function(B,L){return T(L,B,this)};var F=t.has=function(B,L,Z){return _(c,B,L,Z)!==c};m.prototype.hasHash=function(B,L){return F(B,L,this)};var Q=t.has=function(B,L){return F(L._config.hash(B),B,L)};m.prototype.has=function(B){return Q(B,this)};var X=function(L,Z){return L===Z};t.make=function(B){return new m(0,0,{keyEq:B&&B.keyEq||X,hash:B&&B.hash||h},z,0)},t.empty=t.make();var re=t.isEmpty=function(B){return B&&!!k(B._root)};m.prototype.isEmpty=function(){return re(this)};var Pe=t.modifyHash=function(B,L,Z,ce){var le={value:ce._size},fe=ce._root._modify(ce._editable?ce._edit:NaN,ce._config.keyEq,0,B,L,Z,le);return ce.setTree(fe,le.value)};m.prototype.modifyHash=function(B,L,Z){return Pe(Z,B,L,this)};var Je=t.modify=function(B,L,Z){return Pe(B,Z._config.hash(L),L,Z)};m.prototype.modify=function(B,L){return Je(L,B,this)};var je=t.setHash=function(B,L,Z,ce){return Pe(u(Z),B,L,ce)};m.prototype.setHash=function(B,L,Z){return je(B,L,Z,this)};var Ge=t.set=function(B,L,Z){return je(Z._config.hash(B),B,L,Z)};m.prototype.set=function(B,L){return Ge(B,L,this)};var pt=u(c),rn=t.removeHash=function(B,L,Z){return Pe(pt,B,L,Z)};m.prototype.removeHash=m.prototype.deleteHash=function(B,L){return rn(B,L,this)};var ot=t.remove=function(B,L){return rn(L._config.hash(B),B,L)};m.prototype.remove=m.prototype.delete=function(B){return ot(B,this)};var mt=t.beginMutation=function(B){return new m(B._editable+1,B._edit+1,B._config,B._root,B._size)};m.prototype.beginMutation=function(){return mt(this)};var M=t.endMutation=function(B){return B._editable=B._editable&&B._editable-1,B};m.prototype.endMutation=function(){return M(this)};var D=t.mutate=function(B,L){var Z=mt(L);return B(Z),M(Z)};m.prototype.mutate=function(B){return D(B,this)};var H=function(L){return L&&ae(L[0],L[1],L[2],L[3],L[4])},ae=function(L,Z,ce,le,fe){for(;ce<L;){var be=Z[ce++];if(be&&!k(be))return se(be,le,[L,Z,ce,le,fe])}return H(fe)},se=function(L,Z,ce){switch(L.type){case V:return{value:Z(L),rest:ce};case G:case q:case J:var le=L.children;return ae(le.length,le,0,Z,ce);default:return H(ce)}},te={done:!0};function ve(B){this.v=B}ve.prototype.next=function(){if(!this.v)return te;var B=this.v;return this.v=H(B.rest),B},ve.prototype[Symbol.iterator]=function(){return this};var Ne=function(L,Z){return new ve(se(L._root,Z))},Ke=function(L){return[L.key,L.value]},Ze=t.entries=function(B){return Ne(B,Ke)};m.prototype.entries=m.prototype[Symbol.iterator]=function(){return Ze(this)};var vn=function(L){return L.key},Es=t.keys=function(B){return Ne(B,vn)};m.prototype.keys=function(){return Es(this)};var Vr=function(L){return L.value},Ri=t.values=m.prototype.values=function(B){return Ne(B,Vr)};m.prototype.values=function(){return Ri(this)};var Kn=t.fold=function(B,L,Z){var ce=Z._root;if(ce.type===V)return B(L,ce.value,ce.key);for(var le=[ce.children],fe=void 0;fe=le.pop();)for(var be=0,we=fe.length;be<we;){var Se=fe[be++];Se&&Se.type&&(Se.type===V?L=B(L,Se.value,Se.key):le.push(Se.children))}return L};m.prototype.fold=function(B,L){return Kn(B,L,this)};var Ii=t.forEach=function(B,L){return Kn(function(Z,ce,le){return B(ce,le,L)},null,L)};m.prototype.forEach=function(B){return Ii(B,this)};var xs=t.count=function(B){return B._size};m.prototype.count=function(){return xs(this)},Object.defineProperty(m.prototype,"size",{get:m.prototype.count}),n.exports?n.exports=t:(void 0).hamt=t});class OC{constructor(e){Ve(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return Cp(this)}toMap(){return new Map(this._map)}}class Ap{constructor(e){if(Ve(this,"_hamt",MC.empty.beginMutation()),e instanceof Ap){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,r]of e.entries())this._hamt.set(t,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return Cp(this)}toMap(){return new Map(this._hamt)}}function Cp(n){return _t("recoil_hamt_2020")?new Ap(n):new OC(n)}var DC={persistentMap:Cp},LC=DC.persistentMap,VC=Object.freeze({__proto__:null,persistentMap:LC});function FC(n,...e){const t=new Set;e:for(const r of n){for(const i of e)if(i.has(r))continue e;t.add(r)}return t}var ka=FC;function UC(n,e){const t=new Map;return n.forEach((r,i)=>{t.set(i,e(r,i))}),t}var Xl=UC;function BC(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function $C(n){return{nodeDeps:Xl(n.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Xl(n.nodeToNodeSubscriptions,e=>new Set(e))}}function Jd(n,e,t,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=t,o=i.get(n);if(o&&r&&o!==r.nodeDeps.get(n))return;i.set(n,e);const a=o==null?e:ka(e,o);for(const c of a)s.has(c)||s.set(c,new Set),At(s.get(c)).add(n);if(o){const c=ka(o,e);for(const u of c){if(!s.has(u))return;const h=At(s.get(u));h.delete(n),h.size===0&&s.delete(u)}}}function zC(n,e,t,r){var i,s,o,a;const c=t.getState();r===c.currentTree.version||r===((i=c.nextTree)===null||i===void 0?void 0:i.version)||((s=c.previousTree)===null||s===void 0||s.version);const u=t.getGraph(r);if(Jd(n,e,u),r===((o=c.previousTree)===null||o===void 0?void 0:o.version)){const f=t.getGraph(c.currentTree.version);Jd(n,e,f,u)}if(r===((a=c.previousTree)===null||a===void 0?void 0:a.version)||r===c.currentTree.version){var h;const f=(h=c.nextTree)===null||h===void 0?void 0:h.version;if(f!==void 0){const y=t.getGraph(f);Jd(n,e,y,u)}}}var kc={cloneGraph:$C,graph:BC,saveDepsToStore:zC};let qC=0;const WC=()=>qC++;let GC=0;const HC=()=>GC++;let KC=0;const YC=()=>KC++;var qu={getNextTreeStateVersion:WC,getNextStoreID:HC,getNextComponentID:YC};const{persistentMap:Qg}=VC,{graph:JC}=kc,{getNextTreeStateVersion:K0}=qu;function Y0(){const n=K0();return{version:n,stateID:n,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Qg(),nonvalidatedAtoms:Qg()}}function ZC(){const n=Y0();return{currentTree:n,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(n.version,JC()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var J0={makeEmptyTreeState:Y0,makeEmptyStoreState:ZC,getNextTreeStateVersion:K0};class Z0{}function QC(){return new Z0}var Wu={RetentionZone:Z0,retentionZone:QC};function XC(n,e){const t=new Set(n);return t.add(e),t}function eR(n,e){const t=new Set(n);return t.delete(e),t}function tR(n,e,t){const r=new Map(n);return r.set(e,t),r}function nR(n,e,t){const r=new Map(n);return r.set(e,t(r.get(e))),r}function rR(n,e){const t=new Map(n);return t.delete(e),t}function iR(n,e){const t=new Map(n);return e.forEach(r=>t.delete(r)),t}var Q0={setByAddingToSet:XC,setByDeletingFromSet:eR,mapBySettingInMap:tR,mapByUpdatingInMap:nR,mapByDeletingFromMap:rR,mapByDeletingMultipleFromMap:iR};function*sR(n,e){let t=0;for(const r of n)e(r,t++)&&(yield r)}var Rp=sR;function oR(n,e){return new Proxy(n,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var X0=oR;const{getNode:Ac,getNodeMaybe:aR,recoilValuesForKeys:Xg}=Tn,{RetentionZone:ev}=Wu,{setByAddingToSet:cR}=Q0,lR=Object.freeze(new Set);class uR extends Error{}function dR(n,e,t){if(!_t("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=n.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(t instanceof ev)i(t);else if(Array.isArray(t))for(const s of t)i(s);return()=>{if(!_t("recoil_memory_managament_2020"))return;const{retention:s}=n.getState();function o(a){const c=s.nodesRetainedByZone.get(a);c==null||c.delete(e),c&&c.size===0&&s.nodesRetainedByZone.delete(a)}if(t instanceof ev)o(t);else if(Array.isArray(t))for(const a of t)o(a)}}function Ip(n,e,t,r){const i=n.getState();if(i.nodeCleanupFunctions.has(t))return;const s=Ac(t),o=dR(n,t,s.retainedBy),a=s.init(n,e,r);i.nodeCleanupFunctions.set(t,()=>{a(),o()})}function hR(n,e,t){Ip(n,n.getState().currentTree,e,t)}function fR(n,e){var t;const r=n.getState();(t=r.nodeCleanupFunctions.get(e))===null||t===void 0||t(),r.nodeCleanupFunctions.delete(e)}function pR(n,e,t){return Ip(n,e,t,"get"),Ac(t).get(n,e)}function ew(n,e,t){return Ac(t).peek(n,e)}function mR(n,e,t){var r;const i=aR(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,n),{...n,atomValues:n.atomValues.clone().delete(e),nonvalidatedAtoms:n.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:cR(n.dirtyAtoms,e)}}function gR(n,e,t,r){const i=Ac(t);if(i.set==null)throw new uR(`Attempt to set read-only RecoilValue: ${t}`);const s=i.set;return Ip(n,e,t,"set"),s(n,e,r)}function vR(n,e,t){const r=n.getState(),i=n.getGraph(e.version),s=Ac(t).nodeType;return X0({type:s},{loadable:()=>ew(n,e,t),isActive:()=>r.knownAtoms.has(t)||r.knownSelectors.has(t),isSet:()=>s==="selector"?!1:e.atomValues.has(t),isModified:()=>e.dirtyAtoms.has(t),deps:()=>{var o;return Xg((o=i.nodeDeps.get(t))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:Xg(Rp(tw(n,e,new Set([t])),c=>c!==t)),components:zu((o=(a=r.nodeToComponentSubscriptions.get(t))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([c])=>({name:c}))}}})}function tw(n,e,t){const r=new Set,i=Array.from(t),s=n.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const c=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:lR;for(const u of c)r.has(u)||i.push(u)}return r}var Ai={getNodeLoadable:pR,peekNodeLoadable:ew,setNodeValue:gR,initializeNode:hR,cleanUpNode:fR,setUnvalidatedAtomValue_DEPRECATED:mR,peekNodeInfo:vR,getDownstreamNodes:tw};let nw=null;function yR(n){nw=n}function _R(){var n;(n=nw)===null||n===void 0||n()}var rw={setInvalidateMemoizedSnapshot:yR,invalidateMemoizedSnapshot:_R};const{getDownstreamNodes:bR,getNodeLoadable:iw,setNodeValue:wR}=Ai,{getNextComponentID:SR}=qu,{getNode:ER,getNodeMaybe:sw}=Tn,{DefaultValue:Np}=Tn,{reactMode:xR}=Tc,{AbstractRecoilValue:TR,RecoilState:kR,RecoilValueReadOnly:AR,isRecoilValue:CR}=yo,{invalidateMemoizedSnapshot:RR}=rw;function IR(n,{key:e},t=n.getState().currentTree){var r,i;const s=n.getState();t.version===s.currentTree.version||t.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(t.version,(i=s.previousTree)===null||i===void 0||i.version);const o=iw(n,t,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function NR(n,e){const t=n.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Np?t.delete(i):t.set(i,r)}),t}function PR(n,e,{key:t},r){if(typeof r=="function"){const i=iw(n,e,t);if(i.state==="loading"){const s=`Tried to set atom or selector "${t}" using an updater function while the current state is pending, this is not currently supported.`;throw ze(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function jR(n,e,t){if(t.type==="set"){const{recoilValue:i,valueOrUpdater:s}=t,o=PR(n,e,i,s),a=wR(n,e,i.key,o);for(const[c,u]of a.entries())Hh(e,c,u)}else if(t.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=t;Hh(e,i,s)}else if(t.type==="markModified"){const{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=t,o=sw(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else xp(`Unknown action ${t.type}`)}function Hh(n,e,t){t.state==="hasValue"&&t.contents instanceof Np?n.atomValues.delete(e):n.atomValues.set(e,t),n.dirtyAtoms.add(e),n.nonvalidatedAtoms.delete(e)}function ow(n,e){n.replaceState(t=>{const r=aw(t);for(const i of e)jR(n,r,i);return cw(n,r),RR(),r})}function Gu(n,e){if(Aa.length){const t=Aa[Aa.length-1];let r=t.get(n);r||t.set(n,r=[]),r.push(e)}else ow(n,[e])}const Aa=[];function MR(){const n=new Map;return Aa.push(n),()=>{for(const[e,t]of n)ow(e,t);Aa.pop()}}function aw(n){return{...n,atomValues:n.atomValues.clone(),nonvalidatedAtoms:n.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(n.dirtyAtoms)}}function cw(n,e){const t=bR(n,e,e.dirtyAtoms);for(const s of t){var r,i;(r=sw(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function lw(n,e,t){Gu(n,{type:"set",recoilValue:e,valueOrUpdater:t})}function OR(n,e,t){if(t instanceof Np)return lw(n,e,t);Gu(n,{type:"setLoadable",recoilValue:e,loadable:t})}function DR(n,e){Gu(n,{type:"markModified",recoilValue:e})}function LR(n,e,t){Gu(n,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}function VR(n,{key:e},t,r=null){const i=SR(),s=n.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),At(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",t]);const o=xR();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=n.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{const a=n.getState(),c=a.nodeToComponentSubscriptions.get(e);c===void 0||!c.has(i)||(c.delete(i),c.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function FR(n,e){var t;const{currentTree:r}=n.getState(),i=ER(e.key);(t=i.clearCache)===null||t===void 0||t.call(i,n,r)}var pr={RecoilValueReadOnly:AR,AbstractRecoilValue:TR,RecoilState:kR,getRecoilValueAsLoadable:IR,setRecoilValue:lw,setRecoilValueLoadable:OR,markRecoilValueModified:DR,setUnvalidatedRecoilValue:LR,subscribeToRecoilValue:VR,isRecoilValue:CR,applyAtomValueWrites:NR,batchStart:MR,writeLoadableToTreeState:Hh,invalidateDownstreams:cw,copyTreeState:aw,refreshRecoilValue:FR};function UR(n,e,t){const r=n.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(t,s[1],s[0],n))return!0;i=r.next()}return!1}var BR=UR;const{cleanUpNode:$R}=Ai,{deleteNodeConfigIfPossible:zR,getNode:uw}=Tn,{RetentionZone:dw}=Wu,qR=12e4,hw=new Set;function fw(n,e){const t=n.getState(),r=t.currentTree;if(t.nextTree)return;const i=new Set;for(const o of e)if(o instanceof dw)for(const a of KR(t,o))i.add(a);else i.add(o);const s=WR(n,i);for(const o of s)HR(n,r,o)}function WR(n,e){const t=n.getState(),r=t.currentTree,i=n.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(c){const u=new Set,h=GR(n,r,c,s,o);for(const E of h){var f;if(uw(E).retainedBy==="recoilRoot"){o.add(E);continue}if(((f=t.retention.referenceCounts.get(E))!==null&&f!==void 0?f:0)>0){o.add(E);continue}if(pw(E).some(N=>t.retention.referenceCounts.get(N))){o.add(E);continue}const C=i.nodeToNodeSubscriptions.get(E);if(C&&BR(C,N=>o.has(N))){o.add(E);continue}s.add(E),u.add(E)}const y=new Set;for(const E of u)for(const C of(b=i.nodeDeps.get(E))!==null&&b!==void 0?b:hw){var b;s.has(C)||y.add(C)}y.size&&a(y)}}function GR(n,e,t,r,i){const s=n.getGraph(e.version),o=[],a=new Set;for(;t.size>0;)c(At(t.values().next().value));return o;function c(u){if(r.has(u)||i.has(u)){t.delete(u);return}if(a.has(u))return;const h=s.nodeToNodeSubscriptions.get(u);if(h)for(const f of h)c(f);a.add(u),t.delete(u),o.push(u)}}function HR(n,e,t){if(!_t("recoil_memory_managament_2020"))return;$R(n,t);const r=n.getState();r.knownAtoms.delete(t),r.knownSelectors.delete(t),r.nodeTransactionSubscriptions.delete(t),r.retention.referenceCounts.delete(t);const i=pw(t);for(const c of i){var s;(s=r.retention.nodesRetainedByZone.get(c))===null||s===void 0||s.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);const o=r.graphsByVersion.get(e.version);if(o){const c=o.nodeDeps.get(t);if(c!==void 0){o.nodeDeps.delete(t);for(const u of c){var a;(a=o.nodeToNodeSubscriptions.get(u))===null||a===void 0||a.delete(t)}}o.nodeToNodeSubscriptions.delete(t)}zR(t)}function KR(n,e){var t;return(t=n.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:hw}function pw(n){const e=uw(n).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof dw?[e]:e}function YR(n,e){const t=n.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):fw(n,new Set([e]))}function JR(n,e,t){var r;if(!_t("recoil_memory_managament_2020"))return;const i=n.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+t;s===0?mw(n,e):i.set(e,s)}function mw(n,e){if(!_t("recoil_memory_managament_2020"))return;n.getState().retention.referenceCounts.delete(e),YR(n,e)}function ZR(n){if(!_t("recoil_memory_managament_2020"))return;const e=n.getState();fw(n,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function QR(n){return n===void 0?"recoilRoot":n}var _s={SUSPENSE_TIMEOUT_MS:qR,updateRetainCount:JR,updateRetainCountToZero:mw,releaseScheduledRetainablesNow:ZR,retainedByOptionWithDefault:QR};const{unstable_batchedUpdates:XR}=Fk;var eI={unstable_batchedUpdates:XR};const{unstable_batchedUpdates:tI}=eI;var nI={unstable_batchedUpdates:tI};const{batchStart:rI}=pr,{unstable_batchedUpdates:iI}=nI;let Pp=iI||(n=>n());const sI=n=>{Pp=n},oI=()=>Pp,aI=n=>{Pp(()=>{let e=()=>{};try{e=rI(),n()}finally{e()}})};var Hu={getBatcher:oI,setBatcher:sI,batchUpdates:aI};function*cI(n){for(const e of n)for(const t of e)yield t}var gw=cI;const vw=typeof Window>"u"||typeof window>"u",lI=n=>!vw&&(n===window||n instanceof Window),uI=typeof navigator<"u"&&navigator.product==="ReactNative";var Ku={isSSR:vw,isReactNative:uI,isWindow:lI};function dI(n,e){let t;return(...r)=>{t||(t={});const i=e(...r);return Object.hasOwnProperty.call(t,i)||(t[i]=n(...r)),t[i]}}function hI(n,e){let t,r;return(...i)=>{const s=e(...i);return t===s||(t=s,r=n(...i)),r}}function fI(n,e){let t,r;return[(...o)=>{const a=e(...o);return t===a||(t=a,r=n(...o)),r},()=>{t=null}]}var pI={memoizeWithArgsHash:dI,memoizeOneWithArgsHash:hI,memoizeOneWithArgsHashAndInvalidation:fI};const{batchUpdates:Kh}=Hu,{initializeNode:mI,peekNodeInfo:gI}=Ai,{graph:vI}=kc,{getNextStoreID:yI}=qu,{DEFAULT_VALUE:_I,recoilValues:tv,recoilValuesForKeys:nv}=Tn,{AbstractRecoilValue:bI,getRecoilValueAsLoadable:wI,setRecoilValue:rv,setUnvalidatedRecoilValue:SI}=pr,{updateRetainCount:Pl}=_s,{setInvalidateMemoizedSnapshot:EI}=rw,{getNextTreeStateVersion:xI,makeEmptyStoreState:TI}=J0,{isSSR:kI}=Ku,{memoizeOneWithArgsHashAndInvalidation:AI}=pI;class Yu{constructor(e,t){Ve(this,"_store",void 0),Ve(this,"_refCount",1),Ve(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),wI(this._store,r))),Ve(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Ve(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return nv(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?tv.values():r.isInitialized===!0?nv(gw([i,s])):Rp(tv.values(),({key:o})=>!i.has(o)&&!s.has(o))}),Ve(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),gI(this._store,this._store.getState().currentTree,r))),Ve(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Yh(this,Kh);return r(i),i}),Ve(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Yh(this,Kh);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:yI(),parentStoreID:t,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return At(i.get(r));const s=vI();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw ze("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)mI(this._store,r,"get"),Pl(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){kI||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!_t("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){_t("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function yw(n,e,t=!1){const r=n.getState(),i=t?xI():e.version;return{currentTree:{version:t?i:e.version,stateID:t?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,n.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(zu(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function CI(n){const e=new Yu(TI());return n!=null?e.map(n):e}const[iv,_w]=AI((n,e)=>{var t;const r=n.getState(),i=e==="latest"?(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree:At(r.previousTree);return new Yu(yw(n,i),n.storeID)},(n,e)=>{var t,r;return String(e)+String(n.storeID)+String((t=n.getState().nextTree)===null||t===void 0?void 0:t.version)+String(n.getState().currentTree.version)+String((r=n.getState().previousTree)===null||r===void 0?void 0:r.version)});EI(_w);function RI(n,e="latest"){const t=iv(n,e);return t.isRetained()?t:(_w(),iv(n,e))}class Yh extends Yu{constructor(e,t){super(yw(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Ve(this,"_batch",void 0),Ve(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Pl(s,r.key,1),rv(this.getStore_INTERNAL(),r,i)})}),Ve(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Pl(i,r.key,1),rv(this.getStore_INTERNAL(),r,_I)})}),Ve(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Kh(()=>{for(const[s,o]of r.entries())Pl(i,s,1),SI(i,new bI(s),o)})}),this._batch=t}}var Ju={Snapshot:Yu,MutableSnapshot:Yh,freshSnapshot:CI,cloneSnapshot:RI},II=Ju.Snapshot,NI=Ju.MutableSnapshot,PI=Ju.freshSnapshot,jI=Ju.cloneSnapshot,Zu=Object.freeze({__proto__:null,Snapshot:II,MutableSnapshot:NI,freshSnapshot:PI,cloneSnapshot:jI});function MI(...n){const e=new Set;for(const t of n)for(const r of t)e.add(r);return e}var OI=MI;const{useRef:DI}=Me;function LI(n){const e=DI(n);return e.current===n&&typeof n=="function"&&(e.current=n()),e}var sv=LI;const{getNextTreeStateVersion:VI,makeEmptyStoreState:bw}=J0,{cleanUpNode:FI,getDownstreamNodes:UI,initializeNode:BI,setNodeValue:$I,setUnvalidatedAtomValue_DEPRECATED:zI}=Ai,{graph:qI}=kc,{cloneGraph:WI}=kc,{getNextStoreID:ww}=qu,{createMutableSource:Zd,reactMode:Sw}=Tc,{applyAtomValueWrites:GI}=pr,{releaseScheduledRetainablesNow:Ew}=_s,{freshSnapshot:HI}=Zu,{useCallback:KI,useContext:xw,useEffect:Jh,useMemo:YI,useRef:JI,useState:ZI}=Me;function ia(){throw ze("This component must be used inside a <RecoilRoot> component.")}const Tw=Object.freeze({storeID:ww(),getState:ia,replaceState:ia,getGraph:ia,subscribeToTransactions:ia,addTransactionMetadata:ia});let Zh=!1;function ov(n){if(Zh)throw ze("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=n.getState();if(e.nextTree===null){_t("recoil_memory_managament_2020")&&_t("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&Ew(n);const t=e.currentTree.version,r=VI();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,WI(At(e.graphsByVersion.get(t))))}}const kw=Me.createContext({current:Tw}),Qu=()=>xw(kw),Aw=Me.createContext(null);function QI(){return xw(Aw)}function jp(n,e,t){const r=UI(n,t,t.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,c]]of s)c(t)}}function Cw(n){const e=n.getState(),t=e.currentTree,r=t.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(n);for(const[i,s]of e.transactionSubscriptions)s(n);(!Sw().early||e.suspendedComponentResolvers.size>0)&&(jp(n,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function XI(n){const e=n.getState();e.commitDepth++;try{const{nextTree:t}=e;if(t==null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,Cw(n),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):xp("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,_t("recoil_memory_managament_2020")&&t==null&&Ew(n)}finally{e.commitDepth--}}function eN({setNotifyBatcherOfChange:n}){const e=Qu(),[,t]=ZI([]);return n(()=>t({})),Jh(()=>(n(()=>t({})),()=>{n(()=>{})}),[n]),Jh(()=>{PC.enqueueExecution("Batcher",()=>{XI(e.current)})}),null}function tN(n,e){const t=bw();return e({set:(r,i)=>{const s=t.currentTree,o=$I(n,s,r.key,i),a=new Set(o.keys()),c=s.nonvalidatedAtoms.clone();for(const u of a)c.delete(u);t.currentTree={...s,dirtyAtoms:OI(s.dirtyAtoms,a),atomValues:GI(s.atomValues,o),nonvalidatedAtoms:c}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{t.currentTree=zI(t.currentTree,s,i)})}}),t}function nN(n){const e=HI(n),t=e.getStore_INTERNAL().getState();return e.retain(),t.nodeCleanupFunctions.forEach(r=>r()),t.nodeCleanupFunctions.clear(),t}let av=0;function rN({initializeState_DEPRECATED:n,initializeState:e,store_INTERNAL:t,children:r}){let i;const s=b=>{const E=i.current.graphsByVersion;if(E.has(b))return At(E.get(b));const C=qI();return E.set(b,C),C},o=(b,E)=>{if(E==null){const{transactionSubscriptions:C}=f.current.getState(),N=av++;return C.set(N,b),{release:()=>{C.delete(N)}}}else{const{nodeTransactionSubscriptions:C}=f.current.getState();C.has(E)||C.set(E,new Map);const N=av++;return At(C.get(E)).set(N,b),{release:()=>{const $=C.get(E);$&&($.delete(N),$.size===0&&C.delete(E))}}}},a=b=>{ov(f.current);for(const E of Object.keys(b))At(f.current.getState().nextTree).transactionMetadata[E]=b[E]},c=b=>{ov(f.current);const E=At(i.current.nextTree);let C;try{Zh=!0,C=b(E)}finally{Zh=!1}C!==E&&(i.current.nextTree=C,Sw().early&&jp(f.current,i.current,C),At(u.current)())},u=JI(null),h=KI(b=>{u.current=b},[u]),f=sv(()=>t??{storeID:ww(),getState:()=>i.current,replaceState:c,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});t!=null&&(f.current=t),i=sv(()=>n!=null?tN(f.current,n):e!=null?nN(e):bw());const y=YI(()=>Zd==null?void 0:Zd(i,()=>i.current.currentTree.version),[i]);return Jh(()=>{const b=f.current;for(const E of new Set(b.getState().knownAtoms))BI(b,E,"get");return()=>{for(const E of b.getState().knownAtoms)FI(b,E)}},[f]),Me.createElement(kw.Provider,{value:f},Me.createElement(Aw.Provider,{value:y},Me.createElement(eN,{setNotifyBatcherOfChange:h}),r))}function iN(n){const{override:e,...t}=n,r=Qu();return e===!1&&r.current!==Tw?n.children:Me.createElement(rN,t)}function sN(){return Qu().current.storeID}var jr={RecoilRoot:iN,useStoreRef:Qu,useRecoilMutableSource:QI,useRecoilStoreID:sN,notifyComponents_FOR_TESTING:jp,sendEndOfBatchNotifications_FOR_TESTING:Cw};function oN(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}var aN=oN;const{useEffect:cN,useRef:lN}=Me;function uN(n){const e=lN();return cN(()=>{e.current=n}),e.current}var Rw=uN;const{useStoreRef:dN}=jr,{SUSPENSE_TIMEOUT_MS:hN}=_s,{updateRetainCount:sa}=_s,{RetentionZone:fN}=Wu,{useEffect:pN,useRef:mN}=Me,{isSSR:cv}=Ku;function gN(n){if(_t("recoil_memory_managament_2020"))return vN(n)}function vN(n){const t=(Array.isArray(n)?n:[n]).map(o=>o instanceof fN?o:o.key),r=dN();pN(()=>{if(!_t("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!cv)window.clearTimeout(i.current),i.current=null;else for(const a of t)sa(o,a,1);return()=>{for(const a of t)sa(o,a,-1)}},[r,...t]);const i=mN(),s=Rw(t);if(!cv&&(s===void 0||!aN(s,t))){const o=r.current;for(const a of t)sa(o,a,1);if(s)for(const a of s)sa(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of t)sa(o,a,-1)},hN)}}var Mp=gN;function yN(){return"<component name not available>"}var Cc=yN;const{batchUpdates:_N}=Hu,{DEFAULT_VALUE:Iw}=Tn,{currentRendererSupportsUseSyncExternalStore:bN,reactMode:Uo,useMutableSource:wN,useSyncExternalStore:SN}=Tc,{useRecoilMutableSource:EN,useStoreRef:mr}=jr,{AbstractRecoilValue:Qh,getRecoilValueAsLoadable:Rc,setRecoilValue:eu,setUnvalidatedRecoilValue:xN,subscribeToRecoilValue:_o}=pr,{useCallback:En,useEffect:bo,useMemo:Nw,useRef:Ca,useState:Op}=Me,{setByAddingToSet:TN}=Q0,{isSSR:kN}=Ku;function Dp(n,e,t){if(n.state==="hasValue")return n.contents;throw n.state==="loading"?new Promise(i=>{const s=t.current.getState().suspendedComponentResolvers;s.add(i),kN&&Tt(n.contents)&&n.contents.finally(()=>{s.delete(i)})}):n.state==="hasError"?n.contents:ze(`Invalid value of loadable atom "${e.key}"`)}function AN(){const n=Cc(),e=mr(),[,t]=Op([]),r=Ca(new Set);r.current=new Set;const i=Ca(new Set),s=Ca(new Map),o=En(c=>{const u=s.current.get(c);u&&(u.release(),s.current.delete(c))},[s]),a=En((c,u)=>{s.current.has(u)&&t([])},[]);return bo(()=>{const c=e.current;ka(r.current,i.current).forEach(u=>{if(s.current.has(u))return;const h=_o(c,new Qh(u),y=>a(y,u),n);s.current.set(u,h),c.getState().nextTree?c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(c.getState(),u)}):a(c.getState(),u)}),ka(i.current,r.current).forEach(u=>{o(u)}),i.current=r.current}),bo(()=>{const c=s.current;return ka(r.current,new Set(c.keys())).forEach(u=>{const h=_o(e.current,new Qh(u),f=>a(f,u),n);c.set(u,h)}),()=>c.forEach((u,h)=>o(h))},[n,e,o,a]),Nw(()=>{function c(E){return C=>{eu(e.current,E,C)}}function u(E){return()=>eu(e.current,E,Iw)}function h(E){var C;r.current.has(E.key)||(r.current=TN(r.current,E.key));const N=e.current.getState();return Rc(e.current,E,Uo().early&&(C=N.nextTree)!==null&&C!==void 0?C:N.currentTree)}function f(E){const C=h(E);return Dp(C,E,e)}function y(E){return[f(E),c(E)]}function b(E){return[h(E),c(E)]}return{getRecoilValue:f,getRecoilValueLoadable:h,getRecoilState:y,getRecoilStateLoadable:b,getSetRecoilState:c,getResetRecoilState:u}},[r,e])}const CN={current:0};function RN(n){const e=mr(),t=Cc(),r=En(()=>{var a;const c=e.current,u=c.getState(),h=Uo().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return{loadable:Rc(c,n,h),key:n.key}},[e,n]),i=En(a=>{let c;return()=>{var u,h;const f=a();return(u=c)!==null&&u!==void 0&&u.loadable.is(f.loadable)&&((h=c)===null||h===void 0?void 0:h.key)===f.key?c:(c=f,f)}},[]),s=Nw(()=>i(r),[r,i]),o=En(a=>{const c=e.current;return _o(c,n,a,t).release},[e,n,t]);return SN(o,s,s).loadable}function IN(n){const e=mr(),t=En(()=>{var u;const h=e.current,f=h.getState(),y=Uo().early&&(u=f.nextTree)!==null&&u!==void 0?u:f.currentTree;return Rc(h,n,y)},[e,n]),r=En(()=>t(),[t]),i=Cc(),s=En((u,h)=>{const f=e.current;return _o(f,n,()=>{if(!_t("recoil_suppress_rerender_in_callback"))return h();const b=t();c.current.is(b)||h(),c.current=b},i).release},[e,n,i,t]),o=EN();if(o==null)throw ze("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=wN(o,r,s),c=Ca(a);return bo(()=>{c.current=a}),a}function Xh(n){const e=mr(),t=Cc(),r=En(()=>{var c;const u=e.current,h=u.getState(),f=Uo().early&&(c=h.nextTree)!==null&&c!==void 0?c:h.currentTree;return Rc(u,n,f)},[e,n]),i=En(()=>({loadable:r(),key:n.key}),[r,n.key]),s=En(c=>{const u=i();return c.loadable.is(u.loadable)&&c.key===u.key?c:u},[i]);bo(()=>{const c=_o(e.current,n,u=>{a(s)},t);return a(s),c.release},[t,n,e,s]);const[o,a]=Op(i);return o.key!==n.key?i().loadable:o.loadable}function NN(n){const e=mr(),[,t]=Op([]),r=Cc(),i=En(()=>{var a;const c=e.current,u=c.getState(),h=Uo().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return Rc(c,n,h)},[e,n]),s=i(),o=Ca(s);return bo(()=>{o.current=s}),bo(()=>{const a=e.current,c=a.getState(),u=_o(a,n,f=>{var y;if(!_t("recoil_suppress_rerender_in_callback"))return t([]);const b=i();(y=o.current)!==null&&y!==void 0&&y.is(b)||t(b),o.current=b},r);if(c.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,t([])});else{var h;if(!_t("recoil_suppress_rerender_in_callback"))return t([]);const f=i();(h=o.current)!==null&&h!==void 0&&h.is(f)||t(f),o.current=f}return u.release},[r,i,n,e]),s}function Lp(n){return _t("recoil_memory_managament_2020")&&Mp(n),{TRANSITION_SUPPORT:Xh,SYNC_EXTERNAL_STORE:bN()?RN:Xh,MUTABLE_SOURCE:IN,LEGACY:NN}[Uo().mode](n)}function Pw(n){const e=mr(),t=Lp(n);return Dp(t,n,e)}function Xu(n){const e=mr();return En(t=>{eu(e.current,n,t)},[e,n])}function PN(n){const e=mr();return En(()=>{eu(e.current,n,Iw)},[e,n])}function jN(n){return[Pw(n),Xu(n)]}function MN(n){return[Lp(n),Xu(n)]}function ON(){const n=mr();return(e,t={})=>{_N(()=>{n.current.addTransactionMetadata(t),e.forEach((r,i)=>xN(n.current,new Qh(i),r))})}}function jw(n){return _t("recoil_memory_managament_2020")&&Mp(n),Xh(n)}function Mw(n){const e=mr(),t=jw(n);return Dp(t,n,e)}function DN(n){return[Mw(n),Xu(n)]}var LN={recoilComponentGetRecoilValueCount_FOR_TESTING:CN,useRecoilInterface:AN,useRecoilState:jN,useRecoilStateLoadable:MN,useRecoilValue:Pw,useRecoilValueLoadable:Lp,useResetRecoilState:PN,useSetRecoilState:Xu,useSetUnvalidatedAtomValues:ON,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:jw,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Mw,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:DN};function VN(n,e){const t=new Map;for(const[r,i]of n)e(i,r)&&t.set(r,i);return t}var FN=VN;function UN(n,e){const t=new Set;for(const r of n)e(r)&&t.add(r);return t}var BN=UN;function $N(...n){const e=new Map;for(let t=0;t<n.length;t++){const r=n[t].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,n[t].get(i.value))}return e}var zN=$N;const{batchUpdates:qN}=Hu,{DEFAULT_VALUE:WN,getNode:Ow,nodes:GN}=Tn,{useStoreRef:Vp}=jr,{AbstractRecoilValue:HN,setRecoilValueLoadable:KN}=pr,{SUSPENSE_TIMEOUT_MS:YN}=_s,{cloneSnapshot:tu}=Zu,{useCallback:ed,useEffect:Dw,useRef:lv,useState:JN}=Me,{isSSR:uv}=Ku;function td(n){const e=Vp();Dw(()=>e.current.subscribeToTransactions(n).release,[n,e])}function dv(n){const e=n.atomValues.toMap(),t=Xl(FN(e,(r,i)=>{const o=Ow(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return zN(n.nonvalidatedAtoms.toMap(),t)}function ZN(n){td(ed(e=>{let t=e.getState().previousTree;const r=e.getState().currentTree;t||(t=e.getState().currentTree);const i=dv(r),s=dv(t),o=Xl(GN,c=>{var u,h,f,y;return{persistence_UNSTABLE:{type:(u=(h=c.persistence_UNSTABLE)===null||h===void 0?void 0:h.type)!==null&&u!==void 0?u:"none",backButton:(f=(y=c.persistence_UNSTABLE)===null||y===void 0?void 0:y.backButton)!==null&&f!==void 0?f:!1}}}),a=BN(r.dirtyAtoms,c=>i.has(c)||s.has(c));n({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[n]))}function QN(n){td(ed(e=>{const t=tu(e,"latest"),r=tu(e,"previous");n({snapshot:t,previousSnapshot:r})},[n]))}function XN(){const n=Vp(),[e,t]=JN(()=>tu(n.current)),r=Rw(e),i=lv(),s=lv();if(td(ed(a=>t(tu(a)),[])),Dw(()=>{const a=e.retain();if(i.current&&!uv){var c;window.clearTimeout(i.current),i.current=null,(c=s.current)===null||c===void 0||c.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!uv){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},YN)}return e}function Lw(n,e){var t;const r=n.getState(),i=(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;qN(()=>{const o=new Set;for(const u of[i.atomValues.keys(),s.atomValues.keys()])for(const h of u){var a,c;((a=i.atomValues.get(h))===null||a===void 0?void 0:a.contents)!==((c=s.atomValues.get(h))===null||c===void 0?void 0:c.contents)&&Ow(h).shouldRestoreFromSnapshots&&o.add(h)}o.forEach(u=>{KN(n,new HN(u),s.atomValues.has(u)?At(s.atomValues.get(u)):WN)}),n.replaceState(u=>({...u,stateID:e.getID()}))})}function e1(){const n=Vp();return ed(e=>Lw(n.current,e),[n])}var Vw={useRecoilSnapshot:XN,gotoSnapshot:Lw,useGotoRecoilSnapshot:e1,useRecoilTransactionObserver:QN,useTransactionObservation_DEPRECATED:ZN,useTransactionSubscription_DEPRECATED:td};const{peekNodeInfo:t1}=Ai,{useStoreRef:n1}=jr;function r1(){const n=n1();return({key:e})=>t1(n.current,n.current.getState().currentTree,e)}var i1=r1;const{reactMode:s1}=Tc,{RecoilRoot:o1,useStoreRef:a1}=jr,{useMemo:c1}=Me;function l1(){s1().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const n=a1().current;return c1(()=>{function e({children:t}){return Me.createElement(o1,{store_INTERNAL:n},t)}return e},[n])}var u1=l1;const{loadableWithValue:d1}=xc,{initializeNode:h1}=Ai,{DEFAULT_VALUE:f1,getNode:p1}=Tn,{copyTreeState:m1,getRecoilValueAsLoadable:g1,invalidateDownstreams:v1,writeLoadableToTreeState:y1}=pr;function hv(n){return p1(n.key).nodeType==="atom"}class _1{constructor(e,t){Ve(this,"_store",void 0),Ve(this,"_treeState",void 0),Ve(this,"_changes",void 0),Ve(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!hv(r))throw ze("Reading selectors within atomicUpdate is not supported");const i=g1(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:ze(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Ve(this,"set",(r,i)=>{if(!hv(r))throw ze("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else h1(this._store,r.key,"set"),this._changes.set(r.key,i)}),Ve(this,"reset",r=>{this.set(r,f1)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=m1(this._treeState);for(const[t,r]of this._changes)y1(e,t,d1(r));return v1(this._store,e),e}}function b1(n){return e=>{n.replaceState(t=>{const r=new _1(n,t);return e(r),r.newTreeState_INTERNAL()})}}var w1={atomicUpdater:b1},S1=w1.atomicUpdater,Fw=Object.freeze({__proto__:null,atomicUpdater:S1});function E1(n,e){if(!n)throw new Error(e)}var x1=E1,va=x1;const{atomicUpdater:T1}=Fw,{batchUpdates:k1}=Hu,{DEFAULT_VALUE:A1}=Tn,{useStoreRef:C1}=jr,{refreshRecoilValue:R1,setRecoilValue:fv}=pr,{cloneSnapshot:I1}=Zu,{gotoSnapshot:N1}=Vw,{useCallback:P1}=Me;class Uw{}const j1=new Uw;function Bw(n,e,t,r){let i=j1,s;if(k1(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw ze(a);const c=X0({...r??{},set:(h,f)=>fv(n,h,f),reset:h=>fv(n,h,A1),refresh:h=>R1(n,h),gotoSnapshot:h=>N1(n,h),transact_UNSTABLE:h=>T1(n)(h)},{snapshot:()=>{const h=I1(n);return s=h.retain(),h}}),u=e(c);if(typeof u!="function")throw ze(a);i=u(...t)}),i instanceof Uw&&va(!1),Tt(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function M1(n,e){const t=C1();return P1((...r)=>Bw(t.current,n,r),e!=null?[...e,t]:void 0)}var $w={recoilCallback:Bw,useRecoilCallback:M1};const{useStoreRef:O1}=jr,{refreshRecoilValue:D1}=pr,{useCallback:L1}=Me;function V1(n){const e=O1();return L1(()=>{const t=e.current;D1(t,n)},[n,e])}var F1=V1;const{atomicUpdater:U1}=Fw,{useStoreRef:B1}=jr,{useMemo:$1}=Me;function z1(n,e){const t=B1();return $1(()=>(...r)=>{U1(t.current)(s=>{n(s)(...r)})},e!=null?[...e,t]:void 0)}var q1=z1;class W1{constructor(e){Ve(this,"value",void 0),this.value=e}}var G1={WrappedValue:W1},H1=G1.WrappedValue,zw=Object.freeze({__proto__:null,WrappedValue:H1});const{isFastRefreshEnabled:K1}=Tc;class pv extends Error{}class Y1{constructor(e){var t,r,i;Ve(this,"_name",void 0),Ve(this,"_numLeafs",void 0),Ve(this,"_root",void 0),Ve(this,"_onHit",void 0),Ve(this,"_onSet",void 0),Ve(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,t){var r;return(r=this.getLeafNode(e,t))===null||r===void 0?void 0:r.value}getLeafNode(e,t){if(this._root==null)return;let r=this._root;for(;r;){if(t==null||t.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,t,r){const i=()=>{var s,o,a,c;let u,h;for(const[N,$]of e){var f,y,b;const V=this._root;if((V==null?void 0:V.type)==="leaf")throw this.invalidCacheError();const G=u;if(u=G?G.branches.get(h):V,u=(f=u)!==null&&f!==void 0?f:{type:"branch",nodeKey:N,parent:G,branches:new Map,branchKey:h},u.type!=="branch"||u.nodeKey!==N)throw this.invalidCacheError();G==null||G.branches.set(h,u),r==null||(y=r.onNodeVisit)===null||y===void 0||y.call(r,u),h=this._mapNodeValue($),this._root=(b=this._root)!==null&&b!==void 0?b:u}const E=u?(s=u)===null||s===void 0?void 0:s.branches.get(h):this._root;if(E!=null&&(E.type!=="leaf"||E.branchKey!==h))throw this.invalidCacheError();const C={type:"leaf",value:t,parent:u,branchKey:h};(o=u)===null||o===void 0||o.branches.set(h,C),this._root=(a=this._root)!==null&&a!==void 0?a:C,this._numLeafs++,this._onSet(C),r==null||(c=r.onNodeVisit)===null||c===void 0||c.call(r,C)};try{i()}catch(s){if(s instanceof pv)this.clear(),i();else throw s}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===t)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==t;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=K1()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw xp(e+(this._name!=null?` - ${this._name}`:"")),new pv}}var J1={TreeCache:Y1},Z1=J1.TreeCache,qw=Object.freeze({__proto__:null,TreeCache:Z1});class Q1{constructor(e){var t;Ve(this,"_maxSize",void 0),Ve(this,"_size",void 0),Ve(this,"_head",void 0),Ve(this,"_tail",void 0),Ve(this,"_map",void 0),Ve(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),r=this._map.get(t);if(r)return this.set(e,r.value),r.value}set(e,t){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:t};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const r=At(this._map.get(t)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var X1={LRUCache:Q1},eP=X1.LRUCache,Ww=Object.freeze({__proto__:null,LRUCache:eP});const{LRUCache:tP}=Ww,{TreeCache:nP}=qw;function rP({name:n,maxSize:e,mapNodeValue:t=r=>r}){const r=new tP({maxSize:e}),i=new nP({name:n,mapNodeValue:t,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var mv=rP;function Vn(n,e,t){if(typeof n=="string"&&!n.includes('"')&&!n.includes("\\"))return`"${n}"`;switch(typeof n){case"undefined":return"";case"boolean":return n?"true":"false";case"number":case"symbol":return String(n);case"string":return JSON.stringify(n);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw ze("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${n.name})__`}if(n===null)return"null";if(typeof n!="object"){var r;return(r=JSON.stringify(n))!==null&&r!==void 0?r:""}if(Tt(n))return"__PROMISE__";if(Array.isArray(n))return`[${n.map((i,s)=>Vn(i,e,s.toString()))}]`;if(typeof n.toJSON=="function")return Vn(n.toJSON(t),e,t);if(n instanceof Map){const i={};for(const[s,o]of n)i[typeof s=="string"?s:Vn(s,e)]=o;return Vn(i,e,t)}return n instanceof Set?Vn(Array.from(n).sort((i,s)=>Vn(i,e).localeCompare(Vn(s,e))),e,t):Symbol!==void 0&&n[Symbol.iterator]!=null&&typeof n[Symbol.iterator]=="function"?Vn(Array.from(n),e,t):`{${Object.keys(n).filter(i=>n[i]!==void 0).sort().map(i=>`${Vn(i,e)}:${Vn(n[i],e,i)}`).join(",")}}`}function iP(n,e={allowFunctions:!1}){return Vn(n,e)}var nd=iP;const{TreeCache:sP}=qw,al={equality:"reference",eviction:"keep-all",maxSize:1/0};function oP({equality:n=al.equality,eviction:e=al.eviction,maxSize:t=al.maxSize}=al,r){const i=aP(n);return cP(e,t,i,r)}function aP(n){switch(n){case"reference":return e=>e;case"value":return e=>nd(e)}throw ze(`Unrecognized equality policy ${n}`)}function cP(n,e,t,r){switch(n){case"keep-all":return new sP({name:r,mapNodeValue:t});case"lru":return mv({name:r,maxSize:At(e),mapNodeValue:t});case"most-recent":return mv({name:r,maxSize:1,mapNodeValue:t})}throw ze(`Unrecognized eviction policy ${n}`)}var lP=oP;function uP(n){return()=>null}var dP={startPerfBlock:uP};const{isLoadable:hP,loadableWithError:cl,loadableWithPromise:fP,loadableWithValue:Qd}=xc,{WrappedValue:Gw}=zw,{getNodeLoadable:ll,peekNodeLoadable:pP,setNodeValue:mP}=Ai,{saveDepsToStore:gP}=kc,{DEFAULT_VALUE:vP,getConfigDeletionHandler:yP,getNode:_P,registerNode:gv}=Tn,{isRecoilValue:bP}=yo,{markRecoilValueModified:vv}=pr,{retainedByOptionWithDefault:wP}=_s,{recoilCallback:SP}=$w,{startPerfBlock:EP}=dP;class Hw{}const oa=new Hw,aa=[],ul=new Map,xP=(()=>{let n=0;return()=>n++})();function Kw(n){let e=null;const{key:t,get:r,cachePolicy_UNSTABLE:i}=n,s=n.set!=null?n.set:void 0,o=new Set,a=lP(i??{equality:"reference",eviction:"keep-all"},t),c=wP(n.retainedBy_UNSTABLE),u=new Map;let h=0;function f(){return!_t("recoil_memory_managament_2020")||h>0}function y(m){return m.getState().knownSelectors.add(t),h++,()=>{h--}}function b(){return yP(t)!==void 0&&!f()}function E(m,_,T,O,F){We(_,O,F),C(m,T)}function C(m,_){ye(m,_)&&x(m),$(_,!0)}function N(m,_){ye(m,_)&&(At(P(m)).stateVersions.clear(),$(_,!1))}function $(m,_){const T=ul.get(m);if(T!=null){for(const O of T)vv(O,At(e));_&&ul.delete(m)}}function V(m,_){let T=ul.get(_);T==null&&ul.set(_,T=new Set),T.add(m)}function G(m,_,T,O,F,Q){return _.then(X=>{if(!f())throw x(m),oa;const re=Qd(X);return E(m,T,F,re,O),X}).catch(X=>{if(!f())throw x(m),oa;if(Tt(X))return J(m,X,T,O,F,Q);const re=cl(X);throw E(m,T,F,re,O),X})}function J(m,_,T,O,F,Q){return _.then(X=>{if(!f())throw x(m),oa;Q.loadingDepKey!=null&&Q.loadingDepPromise===_?T.atomValues.set(Q.loadingDepKey,Qd(X)):m.getState().knownSelectors.forEach(je=>{T.atomValues.delete(je)});const re=k(m,T);if(re&&re.state!=="loading"){if((ye(m,F)||P(m)==null)&&C(m,F),re.state==="hasValue")return re.contents;throw re.contents}if(!ye(m,F)){const je=A(m,T);if(je!=null)return je.loadingLoadable.contents}const[Pe,Je]=z(m,T,F);if(Pe.state!=="loading"&&E(m,T,F,Pe,Je),Pe.state==="hasError")throw Pe.contents;return Pe.contents}).catch(X=>{if(X instanceof Hw)throw oa;if(!f())throw x(m),oa;const re=cl(X);throw E(m,T,F,re,O),X})}function q(m,_,T,O){var F,Q,X,re;if(ye(m,O)||_.version===((F=m.getState())===null||F===void 0||(Q=F.currentTree)===null||Q===void 0?void 0:Q.version)||_.version===((X=m.getState())===null||X===void 0||(re=X.nextTree)===null||re===void 0?void 0:re.version)){var Pe,Je,je;gP(t,T,m,(Pe=(Je=m.getState())===null||Je===void 0||(je=Je.nextTree)===null||je===void 0?void 0:je.version)!==null&&Pe!==void 0?Pe:m.getState().currentTree.version)}for(const Ge of T)o.add(Ge)}function z(m,_,T){const O=EP(t);let F=!0,Q=!0;const X=()=>{O(),Q=!1};let re,Pe=!1,Je;const je={loadingDepKey:null,loadingDepPromise:null},Ge=new Map;function pt({key:ot}){const mt=ll(m,_,ot);switch(Ge.set(ot,mt),F||(q(m,_,new Set(Ge.keys()),T),N(m,T)),mt.state){case"hasValue":return mt.contents;case"hasError":throw mt.contents;case"loading":throw je.loadingDepKey=ot,je.loadingDepPromise=mt.contents,mt.contents}throw ze("Invalid Loadable state")}const rn=ot=>(...mt)=>{if(Q)throw ze("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&va(!1),SP(m,ot,mt,{node:e})};try{re=r({get:pt,getCallback:rn}),re=bP(re)?pt(re):re,hP(re)&&(re.state==="hasError"&&(Pe=!0),re=re.contents),Tt(re)?re=G(m,re,_,Ge,T,je).finally(X):X(),re=re instanceof Gw?re.value:re}catch(ot){re=ot,Tt(re)?re=J(m,re,_,Ge,T,je).finally(X):(Pe=!0,X())}return Pe?Je=cl(re):Tt(re)?Je=fP(re):Je=Qd(re),F=!1,I(m,T,Ge),q(m,_,new Set(Ge.keys()),T),[Je,Ge]}function k(m,_){let T=_.atomValues.get(t);if(T!=null)return T;const O=new Set;try{T=a.get(Q=>(typeof Q!="string"&&va(!1),ll(m,_,Q).contents),{onNodeVisit:Q=>{Q.type==="branch"&&Q.nodeKey!==t&&O.add(Q.nodeKey)}})}catch(Q){throw ze(`Problem with cache lookup for selector "${t}": ${Q.message}`)}if(T){var F;_.atomValues.set(t,T),q(m,_,O,(F=P(m))===null||F===void 0?void 0:F.executionID)}return T}function S(m,_){const T=k(m,_);if(T!=null)return x(m),T;const O=A(m,_);if(O!=null){var F;return((F=O.loadingLoadable)===null||F===void 0?void 0:F.state)==="loading"&&V(m,O.executionID),O.loadingLoadable}const Q=xP(),[X,re]=z(m,_,Q);return X.state==="loading"?(j(m,Q,X,re,_),V(m,Q)):(x(m),We(_,X,re)),X}function A(m,_){const T=gw([u.has(m)?[At(u.get(m))]:[],zu(Rp(u,([F])=>F!==m),([,F])=>F)]);function O(F){for(const[Q,X]of F)if(!ll(m,_,Q).is(X))return!0;return!1}for(const F of T){if(F.stateVersions.get(_.version)||!O(F.depValuesDiscoveredSoFarDuringAsyncWork))return F.stateVersions.set(_.version,!0),F;F.stateVersions.set(_.version,!1)}}function P(m){return u.get(m)}function j(m,_,T,O,F){u.set(m,{depValuesDiscoveredSoFarDuringAsyncWork:O,executionID:_,loadingLoadable:T,stateVersions:new Map([[F.version,!0]])})}function I(m,_,T){if(ye(m,_)){const O=P(m);O!=null&&(O.depValuesDiscoveredSoFarDuringAsyncWork=T)}}function x(m){u.delete(m)}function ye(m,_){var T;return _===((T=P(m))===null||T===void 0?void 0:T.executionID)}function Oe(m){return Array.from(m.entries()).map(([_,T])=>[_,T.contents])}function We(m,_,T){m.atomValues.set(t,_);try{a.set(Oe(T),_)}catch(O){throw ze(`Problem with setting cache for selector "${t}": ${O.message}`)}}function Be(m){if(aa.includes(t)){const _=`Recoil selector has circular dependencies: ${aa.slice(aa.indexOf(t)).join(" → ")}`;return cl(ze(_))}aa.push(t);try{return m()}finally{aa.pop()}}function dt(m,_){const T=_.atomValues.get(t);return T??a.get(O=>{var F;return typeof O!="string"&&va(!1),(F=pP(m,_,O))===null||F===void 0?void 0:F.contents})}function st(m,_){return Be(()=>S(m,_))}function me(m){m.atomValues.delete(t)}function p(m,_){e==null&&va(!1);for(const O of o){var T;const F=_P(O);(T=F.clearCache)===null||T===void 0||T.call(F,m,_)}o.clear(),me(_),a.clear(),vv(m,e)}return s!=null?e=gv({key:t,nodeType:"selector",peek:dt,get:st,set:(_,T,O)=>{let F=!1;const Q=new Map;function X({key:je}){if(F)throw ze("Recoil: Async selector sets are not currently supported.");const Ge=ll(_,T,je);if(Ge.state==="hasValue")return Ge.contents;if(Ge.state==="loading"){const pt=`Getting value of asynchronous atom or selector "${je}" in a pending state while setting selector "${t}" is not yet supported.`;throw ze(pt)}else throw Ge.contents}function re(je,Ge){if(F)throw ze("Recoil: Async selector sets are not currently supported.");const pt=typeof Ge=="function"?Ge(X(je)):Ge;mP(_,T,je.key,pt).forEach((ot,mt)=>Q.set(mt,ot))}function Pe(je){re(je,vP)}const Je=s({set:re,get:X,reset:Pe},O);if(Je!==void 0)throw Tt(Je)?ze("Recoil: Async selector sets are not currently supported."):ze("Recoil: selector set should be a void function.");return F=!0,Q},init:y,invalidate:me,clearCache:p,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c}):e=gv({key:t,nodeType:"selector",peek:dt,get:st,init:y,invalidate:me,clearCache:p,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})}Kw.value=n=>new Gw(n);var wo=Kw;const{isLoadable:TP,loadableWithError:Xd,loadableWithPromise:eh,loadableWithValue:Rs}=xc,{WrappedValue:Yw}=zw,{peekNodeInfo:kP}=Ai,{DEFAULT_VALUE:Fi,DefaultValue:Kr,getConfigDeletionHandler:Jw,registerNode:AP,setConfigDeletionHandler:CP}=Tn,{isRecoilValue:RP}=yo,{getRecoilValueAsLoadable:IP,markRecoilValueModified:NP,setRecoilValue:yv,setRecoilValueLoadable:PP}=pr,{retainedByOptionWithDefault:jP}=_s,ca=n=>n instanceof Yw?n.value:n;function MP(n){const{key:e,persistence_UNSTABLE:t}=n,r=jP(n.retainedBy_UNSTABLE);let i=0;function s(V){return eh(V.then(G=>(o=Rs(G),G)).catch(G=>{throw o=Xd(G),G}))}let o=Tt(n.default)?s(n.default):TP(n.default)?n.default.state==="loading"?s(n.default.contents):n.default:Rs(ca(n.default));o.contents;let a;const c=new Map;function u(V){return V}function h(V,G){const J=G.then(q=>{var z,k;return((k=((z=V.getState().nextTree)!==null&&z!==void 0?z:V.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===J&&yv(V,$,q),q}).catch(q=>{var z,k;throw((k=((z=V.getState().nextTree)!==null&&z!==void 0?z:V.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===J&&PP(V,$,Xd(q)),q});return J}function f(V,G,J){var q;i++;const z=()=>{var P;i--,(P=c.get(V))===null||P===void 0||P.forEach(j=>j()),c.delete(V)};if(V.getState().knownAtoms.add(e),o.state==="loading"){const P=()=>{var j;((j=V.getState().nextTree)!==null&&j!==void 0?j:V.getState().currentTree).atomValues.has(e)||NP(V,$)};o.contents.finally(P)}const k=(q=n.effects)!==null&&q!==void 0?q:n.effects_UNSTABLE;if(k!=null){let P=function(me){if(ye&&me.key===e){const p=x;return p instanceof Kr?y(V,G):Tt(p)?eh(p.then(m=>m instanceof Kr?o.toPromise():m)):Rs(p)}return IP(V,me)},j=function(me){return P(me).toPromise()},I=function(me){var p;const m=kP(V,(p=V.getState().nextTree)!==null&&p!==void 0?p:V.getState().currentTree,me.key);return ye&&me.key===e&&!(x instanceof Kr)?{...m,isSet:!0,loadable:P(me)}:m},x=Fi,ye=!0,Oe=!1,We=null;const Be=me=>p=>{if(ye){const m=P($),_=m.state==="hasValue"?m.contents:Fi;x=typeof p=="function"?p(_):p,Tt(x)&&(x=x.then(T=>(We={effect:me,value:T},T)))}else{if(Tt(p))throw ze("Setting atoms to async values is not implemented.");typeof p!="function"&&(We={effect:me,value:ca(p)}),yv(V,$,typeof p=="function"?m=>{const _=ca(p(m));return We={effect:me,value:_},_}:ca(p))}},dt=me=>()=>Be(me)(Fi),st=me=>p=>{var m;const{release:_}=V.subscribeToTransactions(T=>{var O;let{currentTree:F,previousTree:Q}=T.getState();Q||(Q=F);const X=(O=F.atomValues.get(e))!==null&&O!==void 0?O:o;if(X.state==="hasValue"){var re,Pe,Je,je;const Ge=X.contents,pt=(re=Q.atomValues.get(e))!==null&&re!==void 0?re:o,rn=pt.state==="hasValue"?pt.contents:Fi;((Pe=We)===null||Pe===void 0?void 0:Pe.effect)!==me||((Je=We)===null||Je===void 0?void 0:Je.value)!==Ge?p(Ge,rn,!F.atomValues.has(e)):((je=We)===null||je===void 0?void 0:je.effect)===me&&(We=null)}},e);c.set(V,[...(m=c.get(V))!==null&&m!==void 0?m:[],_])};for(const me of k)try{const p=me({node:$,storeID:V.storeID,parentStoreID_UNSTABLE:V.parentStoreID,trigger:J,setSelf:Be(me),resetSelf:dt(me),onSet:st(me),getPromise:j,getLoadable:P,getInfo_UNSTABLE:I});if(p!=null){var S;c.set(V,[...(S=c.get(V))!==null&&S!==void 0?S:[],p])}}catch(p){x=p,Oe=!0}if(ye=!1,!(x instanceof Kr)){var A;const me=Oe?Xd(x):Tt(x)?eh(h(V,x)):Rs(ca(x));me.contents,G.atomValues.set(e,me),(A=V.getState().nextTree)===null||A===void 0||A.atomValues.set(e,me)}}return z}function y(V,G){var J,q;return(J=(q=G.atomValues.get(e))!==null&&q!==void 0?q:a)!==null&&J!==void 0?J:o}function b(V,G){if(G.atomValues.has(e))return At(G.atomValues.get(e));if(G.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return o;const J=G.nonvalidatedAtoms.get(e),q=t.validator(J,Fi);return a=q instanceof Kr?o:Rs(q),a}else return o}function E(){a=void 0}function C(V,G,J){if(G.atomValues.has(e)){const q=At(G.atomValues.get(e));if(q.state==="hasValue"&&J===q.contents)return new Map}else if(!G.nonvalidatedAtoms.has(e)&&J instanceof Kr)return new Map;return a=void 0,new Map().set(e,Rs(J))}function N(){return Jw(e)!==void 0&&i<=0}const $=AP({key:e,nodeType:"atom",peek:y,get:b,set:C,init:f,invalidate:E,shouldDeleteConfigOnRelease:N,dangerouslyAllowMutability:n.dangerouslyAllowMutability,persistence_UNSTABLE:n.persistence_UNSTABLE?{type:n.persistence_UNSTABLE.type,backButton:n.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return $}function Fp(n){const{...e}=n,t="default"in n?n.default:new Promise(()=>{});return RP(t)?OP({...e,default:t}):MP({...e,default:t})}function OP(n){const e=Fp({...n,default:Fi,persistence_UNSTABLE:n.persistence_UNSTABLE===void 0?void 0:{...n.persistence_UNSTABLE,validator:r=>r instanceof Kr?r:At(n.persistence_UNSTABLE).validator(r,Fi)},effects:n.effects,effects_UNSTABLE:n.effects_UNSTABLE}),t=wo({key:`${n.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Kr?n.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:n.dangerouslyAllowMutability});return CP(t.key,Jw(n.key)),t}Fp.value=n=>new Yw(n);var Zw=Fp;class DP{constructor(e){var t;Ve(this,"_map",void 0),Ve(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var LP={MapCache:DP},VP=LP.MapCache,FP=Object.freeze({__proto__:null,MapCache:VP});const{LRUCache:_v}=Ww,{MapCache:UP}=FP,dl={equality:"reference",eviction:"none",maxSize:1/0};function BP({equality:n=dl.equality,eviction:e=dl.eviction,maxSize:t=dl.maxSize}=dl){const r=$P(n);return zP(e,t,r)}function $P(n){switch(n){case"reference":return e=>e;case"value":return e=>nd(e)}throw ze(`Unrecognized equality policy ${n}`)}function zP(n,e,t){switch(n){case"keep-all":return new UP({mapKey:t});case"lru":return new _v({mapKey:t,maxSize:At(e)});case"most-recent":return new _v({mapKey:t,maxSize:1})}throw ze(`Unrecognized eviction policy ${n}`)}var Qw=BP;const{setConfigDeletionHandler:qP}=Tn;function WP(n){var e,t;const r=Qw({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:c,...u}=n,h="default"in n?n.default:new Promise(()=>{}),f=Zw({...u,key:`${n.key}__${(s=nd(i))!==null&&s!==void 0?s:"void"}`,default:typeof h=="function"?h(i):h,retainedBy_UNSTABLE:typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE,effects:typeof n.effects=="function"?n.effects(i):typeof n.effects_UNSTABLE=="function"?n.effects_UNSTABLE(i):(o=n.effects)!==null&&o!==void 0?o:n.effects_UNSTABLE});return r.set(i,f),qP(f.key,()=>{r.delete(i)}),f}}var GP=WP;const{setConfigDeletionHandler:HP}=Tn;let KP=0;function YP(n){var e,t;const r=Qw({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(y){throw ze(`Problem with cache lookup for selector ${n.key}: ${y.message}`)}if(o!=null)return o;const a=`${n.key}__selectorFamily/${(s=nd(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${KP++}`,c=y=>n.get(i)(y),u=n.cachePolicy_UNSTABLE,h=typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE;let f;if(n.set!=null){const y=n.set;f=wo({key:a,get:c,set:(E,C)=>y(i)(E,C),cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:h})}else f=wo({key:a,get:c,cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:h});return r.set(i,f),HP(f.key,()=>{r.delete(i)}),f}}var Ci=YP;const JP=Ci({key:"__constant",get:n=>()=>n,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function ZP(n){return JP(n)}var QP=ZP;const XP=Ci({key:"__error",get:n=>()=>{throw ze(n)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function ej(n){return XP(n)}var tj=ej;function nj(n){return n}var rj=nj;const{loadableWithError:Xw,loadableWithPromise:eS,loadableWithValue:tS}=xc;function rd(n,e){const t=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{t[i]=n(s)}catch(o){r[i]=o}return[t,r]}function ij(n){return n!=null&&!Tt(n)}function id(n){return Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(e=>n[e])}function ef(n,e){return Array.isArray(n)?e:Object.getOwnPropertyNames(n).reduce((t,r,i)=>({...t,[r]:e[i]}),{})}function Gs(n,e,t){const r=t.map((i,s)=>i==null?tS(e[s]):Tt(i)?eS(i):Xw(i));return ef(n,r)}function sj(n,e){return e.map((t,r)=>t===void 0?n[r]:t)}const oj=Ci({key:"__waitForNone",get:n=>({get:e})=>{const t=id(n),[r,i]=rd(e,t);return Gs(n,r,i)},dangerouslyAllowMutability:!0}),aj=Ci({key:"__waitForAny",get:n=>({get:e})=>{const t=id(n),[r,i]=rd(e,t);return i.some(s=>!Tt(s))?Gs(n,r,i):new Promise(s=>{for(const[o,a]of i.entries())Tt(a)&&a.then(c=>{r[o]=c,i[o]=void 0,s(Gs(n,r,i))}).catch(c=>{i[o]=c,s(Gs(n,r,i))})})},dangerouslyAllowMutability:!0}),cj=Ci({key:"__waitForAll",get:n=>({get:e})=>{const t=id(n),[r,i]=rd(e,t);if(i.every(o=>o==null))return ef(n,r);const s=i.find(ij);if(s!=null)throw s;return Promise.all(i).then(o=>ef(n,sj(r,o)))},dangerouslyAllowMutability:!0}),lj=Ci({key:"__waitForAllSettled",get:n=>({get:e})=>{const t=id(n),[r,i]=rd(e,t);return i.every(s=>!Tt(s))?Gs(n,r,i):Promise.all(i.map((s,o)=>Tt(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>Gs(n,r,i))},dangerouslyAllowMutability:!0}),uj=Ci({key:"__noWait",get:n=>({get:e})=>{try{return wo.value(tS(e(n)))}catch(t){return wo.value(Tt(t)?eS(t):Xw(t))}},dangerouslyAllowMutability:!0});var dj={waitForNone:oj,waitForAny:aj,waitForAll:cj,waitForAllSettled:lj,noWait:uj};const{RecoilLoadable:hj}=xc,{DefaultValue:fj}=Tn,{RecoilRoot:pj,useRecoilStoreID:mj}=jr,{isRecoilValue:gj}=yo,{retentionZone:vj}=Wu,{freshSnapshot:yj}=Zu,{useRecoilState:_j,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:bj,useRecoilStateLoadable:wj,useRecoilValue:Sj,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Ej,useRecoilValueLoadable:xj,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Tj,useResetRecoilState:kj,useSetRecoilState:Aj}=LN,{useGotoRecoilSnapshot:Cj,useRecoilSnapshot:Rj,useRecoilTransactionObserver:Ij}=Vw,{useRecoilCallback:Nj}=$w,{noWait:Pj,waitForAll:jj,waitForAllSettled:Mj,waitForAny:Oj,waitForNone:Dj}=dj;var bs={DefaultValue:fj,isRecoilValue:gj,RecoilLoadable:hj,RecoilEnv:Fo,RecoilRoot:pj,useRecoilStoreID:mj,useRecoilBridgeAcrossReactRoots_UNSTABLE:u1,atom:Zw,selector:wo,atomFamily:GP,selectorFamily:Ci,constSelector:QP,errorSelector:tj,readOnlySelector:rj,noWait:Pj,waitForNone:Dj,waitForAny:Oj,waitForAll:jj,waitForAllSettled:Mj,useRecoilValue:Sj,useRecoilValueLoadable:xj,useRecoilState:_j,useRecoilStateLoadable:wj,useSetRecoilState:Aj,useResetRecoilState:kj,useGetRecoilValueInfo_UNSTABLE:i1,useRecoilRefresher_UNSTABLE:F1,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Tj,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Ej,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:bj,useRecoilCallback:Nj,useRecoilTransaction_UNSTABLE:q1,useGotoRecoilSnapshot:Cj,useRecoilSnapshot:Rj,useRecoilTransactionObserver_UNSTABLE:Ij,snapshot_UNSTABLE:yj,useRetain:Mp,retentionZone:vj},Lj=bs.RecoilRoot,Up=bs.atom,tf=bs.selector,nS=bs.atomFamily,nf=bs.selectorFamily,Ic=bs.useRecoilValue,rS=bs.useRecoilCallback;const th={uid:"test-user-123",email:"test@example.com",displayName:"John Smith",userType:"consultant"},iS=R.createContext(null);function ws(){return R.useContext(iS)}function Vj({children:n}){const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,o]=R.useState(!1);async function a(f,y){await new Promise(b=>setTimeout(b,1e3)),t(th),o(!0)}async function c(f,y){return await new Promise(b=>setTimeout(b,1e3)),t(th),o(!0),{user:th}}async function u(){await new Promise(f=>setTimeout(f,500)),t(null),o(!1)}R.useEffect(()=>{i(!1)},[]);const h={currentUser:e,login:a,register:c,logout:u};return d.jsx(iS.Provider,{value:h,children:!r&&n})}var Nc=n=>n.type==="checkbox",zi=n=>n instanceof Date,pn=n=>n==null;const sS=n=>typeof n=="object";var Bt=n=>!pn(n)&&!Array.isArray(n)&&sS(n)&&!zi(n),Fj=n=>Bt(n)&&n.target?Nc(n.target)?n.target.checked:n.target.value:n,Uj=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Bj=(n,e)=>n.has(Uj(e)),$j=n=>{const e=n.constructor&&n.constructor.prototype;return Bt(e)&&e.hasOwnProperty("isPrototypeOf")},Bp=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Nn(n){let e;const t=Array.isArray(n);if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(Bp&&(n instanceof Blob||n instanceof FileList))&&(t||Bt(n)))if(e=t?[]:{},!t&&!$j(n))e=n;else for(const r in n)n.hasOwnProperty(r)&&(e[r]=Nn(n[r]));else return n;return e}var sd=n=>Array.isArray(n)?n.filter(Boolean):[],Vt=n=>n===void 0,pe=(n,e,t)=>{if(!e||!Bt(n))return t;const r=sd(e.split(/[,[\].]+?/)).reduce((i,s)=>pn(i)?i:i[s],n);return Vt(r)||r===n?Vt(n[e])?t:n[e]:r},Jn=n=>typeof n=="boolean",$p=n=>/^\w*$/.test(n),oS=n=>sd(n.replace(/["|']|\]/g,"").split(/\.|\[/)),ht=(n,e,t)=>{let r=-1;const i=$p(e)?[e]:oS(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let c=t;if(r!==o){const u=n[a];c=Bt(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;n[a]=c,n=n[a]}return n};const bv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Un={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},yr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Me.createContext(null);var zj=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Un.all&&(e._proxyFormState[o]=!r||Un.all),n[o]}});return i},wn=n=>Bt(n)&&!Object.keys(n).length,qj=(n,e,t,r)=>{t(n);const{name:i,...s}=n;return wn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===Un.all)},jl=n=>Array.isArray(n)?n:[n];function Wj(n){const e=Me.useRef(n);e.current=n,Me.useEffect(()=>{const t=!n.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[n.disabled])}var rr=n=>typeof n=="string",Gj=(n,e,t,r,i)=>rr(n)?(r&&e.watch.add(n),pe(t,n,i)):Array.isArray(n)?n.map(s=>(r&&e.watch.add(s),pe(t,s))):(r&&(e.watchAll=!0),t),aS=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},wv=n=>({isOnSubmit:!n||n===Un.onSubmit,isOnBlur:n===Un.onBlur,isOnChange:n===Un.onChange,isOnAll:n===Un.all,isOnTouch:n===Un.onTouched}),Sv=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Ra=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const s=pe(n,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ra(a,e))break}else if(Bt(a)&&Ra(a,e))break}}};var Hj=(n,e,t)=>{const r=jl(pe(n,t));return ht(r,"root",e[t]),ht(n,t,r),n},zp=n=>n.type==="file",tr=n=>typeof n=="function",nu=n=>{if(!Bp)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ml=n=>rr(n),qp=n=>n.type==="radio",ru=n=>n instanceof RegExp;const Ev={value:!1,isValid:!1},xv={value:!0,isValid:!0};var cS=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Vt(n[0].attributes.value)?Vt(n[0].value)||n[0].value===""?xv:{value:n[0].value,isValid:!0}:xv:Ev}return Ev};const Tv={isValid:!1,value:null};var lS=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Tv):Tv;function kv(n,e,t="validate"){if(Ml(n)||Array.isArray(n)&&n.every(Ml)||Jn(n)&&!n)return{type:t,message:Ml(n)?n:"",ref:e}}var Is=n=>Bt(n)&&!ru(n)?n:{value:n,message:""},Av=async(n,e,t,r,i)=>{const{ref:s,refs:o,required:a,maxLength:c,minLength:u,min:h,max:f,pattern:y,validate:b,name:E,valueAsNumber:C,mount:N,disabled:$}=n._f,V=pe(e,E);if(!N||$)return{};const G=o?o[0]:s,J=I=>{r&&G.reportValidity&&(G.setCustomValidity(Jn(I)?"":I||""),G.reportValidity())},q={},z=qp(s),k=Nc(s),S=z||k,A=(C||zp(s))&&Vt(s.value)&&Vt(V)||nu(s)&&s.value===""||V===""||Array.isArray(V)&&!V.length,P=aS.bind(null,E,t,q),j=(I,x,ye,Oe=yr.maxLength,We=yr.minLength)=>{const Be=I?x:ye;q[E]={type:I?Oe:We,message:Be,ref:s,...P(I?Oe:We,Be)}};if(i?!Array.isArray(V)||!V.length:a&&(!S&&(A||pn(V))||Jn(V)&&!V||k&&!cS(o).isValid||z&&!lS(o).isValid)){const{value:I,message:x}=Ml(a)?{value:!!a,message:a}:Is(a);if(I&&(q[E]={type:yr.required,message:x,ref:G,...P(yr.required,x)},!t))return J(x),q}if(!A&&(!pn(h)||!pn(f))){let I,x;const ye=Is(f),Oe=Is(h);if(!pn(V)&&!isNaN(V)){const We=s.valueAsNumber||V&&+V;pn(ye.value)||(I=We>ye.value),pn(Oe.value)||(x=We<Oe.value)}else{const We=s.valueAsDate||new Date(V),Be=me=>new Date(new Date().toDateString()+" "+me),dt=s.type=="time",st=s.type=="week";rr(ye.value)&&V&&(I=dt?Be(V)>Be(ye.value):st?V>ye.value:We>new Date(ye.value)),rr(Oe.value)&&V&&(x=dt?Be(V)<Be(Oe.value):st?V<Oe.value:We<new Date(Oe.value))}if((I||x)&&(j(!!I,ye.message,Oe.message,yr.max,yr.min),!t))return J(q[E].message),q}if((c||u)&&!A&&(rr(V)||i&&Array.isArray(V))){const I=Is(c),x=Is(u),ye=!pn(I.value)&&V.length>+I.value,Oe=!pn(x.value)&&V.length<+x.value;if((ye||Oe)&&(j(ye,I.message,x.message),!t))return J(q[E].message),q}if(y&&!A&&rr(V)){const{value:I,message:x}=Is(y);if(ru(I)&&!V.match(I)&&(q[E]={type:yr.pattern,message:x,ref:s,...P(yr.pattern,x)},!t))return J(x),q}if(b){if(tr(b)){const I=await b(V,e),x=kv(I,G);if(x&&(q[E]={...x,...P(yr.validate,x.message)},!t))return J(x.message),q}else if(Bt(b)){let I={};for(const x in b){if(!wn(I)&&!t)break;const ye=kv(await b[x](V,e),G,x);ye&&(I={...ye,...P(x,ye.message)},J(ye.message),t&&(q[E]=I))}if(!wn(I)&&(q[E]={ref:G,...I},!t))return q}}return J(!0),q};function Kj(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Vt(n)?r++:n[e[r++]];return n}function Yj(n){for(const e in n)if(n.hasOwnProperty(e)&&!Vt(n[e]))return!1;return!0}function Gt(n,e){const t=Array.isArray(e)?e:$p(e)?[e]:oS(e),r=t.length===1?n:Kj(n,t),i=t.length-1,s=t[i];return r&&delete r[s],i!==0&&(Bt(r)&&wn(r)||Array.isArray(r)&&Yj(r))&&Gt(n,t.slice(0,-1)),n}var nh=()=>{let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next&&s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}},rf=n=>pn(n)||!sS(n);function Qr(n,e){if(rf(n)||rf(e))return n===e;if(zi(n)&&zi(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(zi(s)&&zi(o)||Bt(s)&&Bt(o)||Array.isArray(s)&&Array.isArray(o)?!Qr(s,o):s!==o)return!1}}return!0}var uS=n=>n.type==="select-multiple",Jj=n=>qp(n)||Nc(n),rh=n=>nu(n)&&n.isConnected,dS=n=>{for(const e in n)if(tr(n[e]))return!0;return!1};function iu(n,e={}){const t=Array.isArray(n);if(Bt(n)||t)for(const r in n)Array.isArray(n[r])||Bt(n[r])&&!dS(n[r])?(e[r]=Array.isArray(n[r])?[]:{},iu(n[r],e[r])):pn(n[r])||(e[r]=!0);return e}function hS(n,e,t){const r=Array.isArray(n);if(Bt(n)||r)for(const i in n)Array.isArray(n[i])||Bt(n[i])&&!dS(n[i])?Vt(e)||rf(t[i])?t[i]=Array.isArray(n[i])?iu(n[i],[]):{...iu(n[i])}:hS(n[i],pn(e)?{}:e[i],t[i]):t[i]=!Qr(n[i],e[i]);return t}var la=(n,e)=>hS(n,e,iu(e)),fS=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Vt(n)?n:e?n===""?NaN:n&&+n:t&&rr(n)?new Date(n):r?r(n):n;function ih(n){const e=n.ref;if(!(n.refs?n.refs.every(t=>t.disabled):e.disabled))return zp(e)?e.files:qp(e)?lS(n.refs).value:uS(e)?[...e.selectedOptions].map(({value:t})=>t):Nc(e)?cS(n.refs).value:fS(Vt(e.value)?n.ref.value:e.value,n)}var Zj=(n,e,t,r)=>{const i={};for(const s of n){const o=pe(e,s);o&&ht(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},ua=n=>Vt(n)?n:ru(n)?n.source:Bt(n)?ru(n.value)?n.value.source:n.value:n;const Cv="AsyncFunction";var Qj=n=>(!n||!n.validate)&&!!(tr(n.validate)&&n.validate.constructor.name===Cv||Bt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===Cv)),Xj=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function Rv(n,e,t){const r=pe(n,t);if(r||$p(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=pe(e,s),a=pe(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:t}}var eM=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,tM=(n,e)=>!sd(pe(n,e)).length&&Gt(n,e);const nM={mode:Un.onSubmit,reValidateMode:Un.onChange,shouldFocusError:!0};function rM(n={}){let e={...nM,...n},t={submitCount:0,isDirty:!1,isLoading:tr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Bt(e.defaultValues)||Bt(e.values)?Nn(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Nn(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:nh(),array:nh(),state:nh()},y=wv(e.mode),b=wv(e.reValidateMode),E=e.criteriaMode===Un.all,C=M=>D=>{clearTimeout(u),u=setTimeout(M,D)},N=async M=>{if(!e.disabled&&(h.isValid||M)){const D=e.resolver?wn((await S()).errors):await P(r,!0);D!==t.isValid&&f.state.next({isValid:D})}},$=(M,D)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((M||Array.from(a.mount)).forEach(H=>{H&&(D?ht(t.validatingFields,H,D):Gt(t.validatingFields,H))}),f.state.next({validatingFields:t.validatingFields,isValidating:!wn(t.validatingFields)}))},V=(M,D=[],H,ae,se=!0,te=!0)=>{if(ae&&H&&!e.disabled){if(o.action=!0,te&&Array.isArray(pe(r,M))){const ve=H(pe(r,M),ae.argA,ae.argB);se&&ht(r,M,ve)}if(te&&Array.isArray(pe(t.errors,M))){const ve=H(pe(t.errors,M),ae.argA,ae.argB);se&&ht(t.errors,M,ve),tM(t.errors,M)}if(h.touchedFields&&te&&Array.isArray(pe(t.touchedFields,M))){const ve=H(pe(t.touchedFields,M),ae.argA,ae.argB);se&&ht(t.touchedFields,M,ve)}h.dirtyFields&&(t.dirtyFields=la(i,s)),f.state.next({name:M,isDirty:I(M,D),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else ht(s,M,D)},G=(M,D)=>{ht(t.errors,M,D),f.state.next({errors:t.errors})},J=M=>{t.errors=M,f.state.next({errors:t.errors,isValid:!1})},q=(M,D,H,ae)=>{const se=pe(r,M);if(se){const te=pe(s,M,Vt(H)?pe(i,M):H);Vt(te)||ae&&ae.defaultChecked||D?ht(s,M,D?te:ih(se._f)):Oe(M,te),o.mount&&N()}},z=(M,D,H,ae,se)=>{let te=!1,ve=!1;const Ne={name:M};if(!e.disabled){const Ke=!!(pe(r,M)&&pe(r,M)._f&&pe(r,M)._f.disabled);if(!H||ae){h.isDirty&&(ve=t.isDirty,t.isDirty=Ne.isDirty=I(),te=ve!==Ne.isDirty);const Ze=Ke||Qr(pe(i,M),D);ve=!!(!Ke&&pe(t.dirtyFields,M)),Ze||Ke?Gt(t.dirtyFields,M):ht(t.dirtyFields,M,!0),Ne.dirtyFields=t.dirtyFields,te=te||h.dirtyFields&&ve!==!Ze}if(H){const Ze=pe(t.touchedFields,M);Ze||(ht(t.touchedFields,M,H),Ne.touchedFields=t.touchedFields,te=te||h.touchedFields&&Ze!==H)}te&&se&&f.state.next(Ne)}return te?Ne:{}},k=(M,D,H,ae)=>{const se=pe(t.errors,M),te=h.isValid&&Jn(D)&&t.isValid!==D;if(n.delayError&&H?(c=C(()=>G(M,H)),c(n.delayError)):(clearTimeout(u),c=null,H?ht(t.errors,M,H):Gt(t.errors,M)),(H?!Qr(se,H):se)||!wn(ae)||te){const ve={...ae,...te&&Jn(D)?{isValid:D}:{},errors:t.errors,name:M};t={...t,...ve},f.state.next(ve)}},S=async M=>{$(M,!0);const D=await e.resolver(s,e.context,Zj(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return $(M),D},A=async M=>{const{errors:D}=await S(M);if(M)for(const H of M){const ae=pe(D,H);ae?ht(t.errors,H,ae):Gt(t.errors,H)}else t.errors=D;return D},P=async(M,D,H={valid:!0})=>{for(const ae in M){const se=M[ae];if(se){const{_f:te,...ve}=se;if(te){const Ne=a.array.has(te.name),Ke=se._f&&Qj(se._f);Ke&&h.validatingFields&&$([ae],!0);const Ze=await Av(se,s,E,e.shouldUseNativeValidation&&!D,Ne);if(Ke&&h.validatingFields&&$([ae]),Ze[te.name]&&(H.valid=!1,D))break;!D&&(pe(Ze,te.name)?Ne?Hj(t.errors,Ze,te.name):ht(t.errors,te.name,Ze[te.name]):Gt(t.errors,te.name))}!wn(ve)&&await P(ve,D,H)}}return H.valid},j=()=>{for(const M of a.unMount){const D=pe(r,M);D&&(D._f.refs?D._f.refs.every(H=>!rh(H)):!rh(D._f.ref))&&F(M)}a.unMount=new Set},I=(M,D)=>!e.disabled&&(M&&D&&ht(s,M,D),!Qr(p(),i)),x=(M,D,H)=>Gj(M,a,{...o.mount?s:Vt(D)?i:rr(M)?{[M]:D}:D},H,D),ye=M=>sd(pe(o.mount?s:i,M,n.shouldUnregister?pe(i,M,[]):[])),Oe=(M,D,H={})=>{const ae=pe(r,M);let se=D;if(ae){const te=ae._f;te&&(!te.disabled&&ht(s,M,fS(D,te)),se=nu(te.ref)&&pn(D)?"":D,uS(te.ref)?[...te.ref.options].forEach(ve=>ve.selected=se.includes(ve.value)):te.refs?Nc(te.ref)?te.refs.length>1?te.refs.forEach(ve=>(!ve.defaultChecked||!ve.disabled)&&(ve.checked=Array.isArray(se)?!!se.find(Ne=>Ne===ve.value):se===ve.value)):te.refs[0]&&(te.refs[0].checked=!!se):te.refs.forEach(ve=>ve.checked=ve.value===se):zp(te.ref)?te.ref.value="":(te.ref.value=se,te.ref.type||f.values.next({name:M,values:{...s}})))}(H.shouldDirty||H.shouldTouch)&&z(M,se,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&me(M)},We=(M,D,H)=>{for(const ae in D){const se=D[ae],te=`${M}.${ae}`,ve=pe(r,te);(a.array.has(M)||Bt(se)||ve&&!ve._f)&&!zi(se)?We(te,se,H):Oe(te,se,H)}},Be=(M,D,H={})=>{const ae=pe(r,M),se=a.array.has(M),te=Nn(D);ht(s,M,te),se?(f.array.next({name:M,values:{...s}}),(h.isDirty||h.dirtyFields)&&H.shouldDirty&&f.state.next({name:M,dirtyFields:la(i,s),isDirty:I(M,te)})):ae&&!ae._f&&!pn(te)?We(M,te,H):Oe(M,te,H),Sv(M,a)&&f.state.next({...t}),f.values.next({name:o.mount?M:void 0,values:{...s}})},dt=async M=>{o.mount=!0;const D=M.target;let H=D.name,ae=!0;const se=pe(r,H),te=()=>D.type?ih(se._f):Fj(M),ve=Ne=>{ae=Number.isNaN(Ne)||zi(Ne)&&isNaN(Ne.getTime())||Qr(Ne,pe(s,H,Ne))};if(se){let Ne,Ke;const Ze=te(),vn=M.type===bv.BLUR||M.type===bv.FOCUS_OUT,Es=!Xj(se._f)&&!e.resolver&&!pe(t.errors,H)&&!se._f.deps||eM(vn,pe(t.touchedFields,H),t.isSubmitted,b,y),Vr=Sv(H,a,vn);ht(s,H,Ze),vn?(se._f.onBlur&&se._f.onBlur(M),c&&c(0)):se._f.onChange&&se._f.onChange(M);const Ri=z(H,Ze,vn,!1),Kn=!wn(Ri)||Vr;if(!vn&&f.values.next({name:H,type:M.type,values:{...s}}),Es)return h.isValid&&(n.mode==="onBlur"?vn&&N():N()),Kn&&f.state.next({name:H,...Vr?{}:Ri});if(!vn&&Vr&&f.state.next({...t}),e.resolver){const{errors:Ii}=await S([H]);if(ve(Ze),ae){const xs=Rv(t.errors,r,H),B=Rv(Ii,r,xs.name||H);Ne=B.error,H=B.name,Ke=wn(Ii)}}else $([H],!0),Ne=(await Av(se,s,E,e.shouldUseNativeValidation))[H],$([H]),ve(Ze),ae&&(Ne?Ke=!1:h.isValid&&(Ke=await P(r,!0)));ae&&(se._f.deps&&me(se._f.deps),k(H,Ke,Ne,Ri))}},st=(M,D)=>{if(pe(t.errors,D)&&M.focus)return M.focus(),1},me=async(M,D={})=>{let H,ae;const se=jl(M);if(e.resolver){const te=await A(Vt(M)?M:se);H=wn(te),ae=M?!se.some(ve=>pe(te,ve)):H}else M?(ae=(await Promise.all(se.map(async te=>{const ve=pe(r,te);return await P(ve&&ve._f?{[te]:ve}:ve)}))).every(Boolean),!(!ae&&!t.isValid)&&N()):ae=H=await P(r);return f.state.next({...!rr(M)||h.isValid&&H!==t.isValid?{}:{name:M},...e.resolver||!M?{isValid:H}:{},errors:t.errors}),D.shouldFocus&&!ae&&Ra(r,st,M?se:a.mount),ae},p=M=>{const D={...o.mount?s:i};return Vt(M)?D:rr(M)?pe(D,M):M.map(H=>pe(D,H))},m=(M,D)=>({invalid:!!pe((D||t).errors,M),isDirty:!!pe((D||t).dirtyFields,M),error:pe((D||t).errors,M),isValidating:!!pe(t.validatingFields,M),isTouched:!!pe((D||t).touchedFields,M)}),_=M=>{M&&jl(M).forEach(D=>Gt(t.errors,D)),f.state.next({errors:M?t.errors:{}})},T=(M,D,H)=>{const ae=(pe(r,M,{_f:{}})._f||{}).ref,se=pe(t.errors,M)||{},{ref:te,message:ve,type:Ne,...Ke}=se;ht(t.errors,M,{...Ke,...D,ref:ae}),f.state.next({name:M,errors:t.errors,isValid:!1}),H&&H.shouldFocus&&ae&&ae.focus&&ae.focus()},O=(M,D)=>tr(M)?f.values.subscribe({next:H=>M(x(void 0,D),H)}):x(M,D,!0),F=(M,D={})=>{for(const H of M?jl(M):a.mount)a.mount.delete(H),a.array.delete(H),D.keepValue||(Gt(r,H),Gt(s,H)),!D.keepError&&Gt(t.errors,H),!D.keepDirty&&Gt(t.dirtyFields,H),!D.keepTouched&&Gt(t.touchedFields,H),!D.keepIsValidating&&Gt(t.validatingFields,H),!e.shouldUnregister&&!D.keepDefaultValue&&Gt(i,H);f.values.next({values:{...s}}),f.state.next({...t,...D.keepDirty?{isDirty:I()}:{}}),!D.keepIsValid&&N()},Q=({disabled:M,name:D,field:H,fields:ae,value:se})=>{if(Jn(M)&&o.mount||M){const te=M?void 0:Vt(se)?ih(H?H._f:pe(ae,D)._f):se;ht(s,D,te),z(D,te,!1,!1,!0)}},X=(M,D={})=>{let H=pe(r,M);const ae=Jn(D.disabled)||Jn(e.disabled);return ht(r,M,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:M}},name:M,mount:!0,...D}}),a.mount.add(M),H?Q({field:H,disabled:Jn(D.disabled)?D.disabled:e.disabled,name:M,value:D.value}):q(M,!0,D.value),{...ae?{disabled:D.disabled||e.disabled}:{},...e.progressive?{required:!!D.required,min:ua(D.min),max:ua(D.max),minLength:ua(D.minLength),maxLength:ua(D.maxLength),pattern:ua(D.pattern)}:{},name:M,onChange:dt,onBlur:dt,ref:se=>{if(se){X(M,D),H=pe(r,M);const te=Vt(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,ve=Jj(te),Ne=H._f.refs||[];if(ve?Ne.find(Ke=>Ke===te):te===H._f.ref)return;ht(r,M,{_f:{...H._f,...ve?{refs:[...Ne.filter(rh),te,...Array.isArray(pe(i,M))?[{}]:[]],ref:{type:te.type,name:M}}:{ref:te}}}),q(M,!1,void 0,te)}else H=pe(r,M,{}),H._f&&(H._f.mount=!1),(e.shouldUnregister||D.shouldUnregister)&&!(Bj(a.array,M)&&o.action)&&a.unMount.add(M)}}},re=()=>e.shouldFocusError&&Ra(r,st,a.mount),Pe=M=>{Jn(M)&&(f.state.next({disabled:M}),Ra(r,(D,H)=>{const ae=pe(r,H);ae&&(D.disabled=ae._f.disabled||M,Array.isArray(ae._f.refs)&&ae._f.refs.forEach(se=>{se.disabled=ae._f.disabled||M}))},0,!1))},Je=(M,D)=>async H=>{let ae;if(H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist()),e.disabled){D&&await D({...t.errors},H);return}let se=Nn(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:te,values:ve}=await S();t.errors=te,se=ve}else await P(r);if(Gt(t.errors,"root"),wn(t.errors)){f.state.next({errors:{}});try{await M(se,H)}catch(te){ae=te}}else D&&await D({...t.errors},H),re(),setTimeout(re);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wn(t.errors)&&!ae,submitCount:t.submitCount+1,errors:t.errors}),ae)throw ae},je=(M,D={})=>{pe(r,M)&&(Vt(D.defaultValue)?Be(M,Nn(pe(i,M))):(Be(M,D.defaultValue),ht(i,M,Nn(D.defaultValue))),D.keepTouched||Gt(t.touchedFields,M),D.keepDirty||(Gt(t.dirtyFields,M),t.isDirty=D.defaultValue?I(M,Nn(pe(i,M))):I()),D.keepError||(Gt(t.errors,M),h.isValid&&N()),f.state.next({...t}))},Ge=(M,D={})=>{const H=M?Nn(M):i,ae=Nn(H),se=wn(M),te=se?i:ae;if(D.keepDefaultValues||(i=H),!D.keepValues){if(D.keepDirtyValues){const ve=new Set([...a.mount,...Object.keys(la(i,s))]);for(const Ne of Array.from(ve))pe(t.dirtyFields,Ne)?ht(te,Ne,pe(s,Ne)):Be(Ne,pe(te,Ne))}else{if(Bp&&Vt(M))for(const ve of a.mount){const Ne=pe(r,ve);if(Ne&&Ne._f){const Ke=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(nu(Ke)){const Ze=Ke.closest("form");if(Ze){Ze.reset();break}}}}r={}}s=n.shouldUnregister?D.keepDefaultValues?Nn(i):{}:Nn(te),f.array.next({values:{...te}}),f.values.next({values:{...te}})}a={mount:D.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!D.keepIsValid||!!D.keepDirtyValues,o.watch=!!n.shouldUnregister,f.state.next({submitCount:D.keepSubmitCount?t.submitCount:0,isDirty:se?!1:D.keepDirty?t.isDirty:!!(D.keepDefaultValues&&!Qr(M,i)),isSubmitted:D.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:se?{}:D.keepDirtyValues?D.keepDefaultValues&&s?la(i,s):t.dirtyFields:D.keepDefaultValues&&M?la(i,M):D.keepDirty?t.dirtyFields:{},touchedFields:D.keepTouched?t.touchedFields:{},errors:D.keepErrors?t.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},pt=(M,D)=>Ge(tr(M)?M(s):M,D);return{control:{register:X,unregister:F,getFieldState:m,handleSubmit:Je,setError:T,_executeSchema:S,_getWatch:x,_getDirty:I,_updateValid:N,_removeUnmounted:j,_updateFieldArray:V,_updateDisabledField:Q,_getFieldArray:ye,_reset:Ge,_resetDefaultValues:()=>tr(e.defaultValues)&&e.defaultValues().then(M=>{pt(M,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:M=>{t={...t,...M}},_disableForm:Pe,_subjects:f,_proxyFormState:h,_setErrors:J,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(M){o=M},get _defaultValues(){return i},get _names(){return a},set _names(M){a=M},get _formState(){return t},set _formState(M){t=M},get _options(){return e},set _options(M){e={...e,...M}}},trigger:me,register:X,handleSubmit:Je,watch:O,setValue:Be,getValues:p,reset:pt,resetField:je,clearErrors:_,unregister:F,setError:T,setFocus:(M,D={})=>{const H=pe(r,M),ae=H&&H._f;if(ae){const se=ae.refs?ae.refs[0]:ae.ref;se.focus&&(se.focus(),D.shouldSelect&&tr(se.select)&&se.select())}},getFieldState:m}}function Wp(n={}){const e=Me.useRef(),t=Me.useRef(),[r,i]=Me.useState({isDirty:!1,isValidating:!1,isLoading:tr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:tr(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...rM(n),formState:r});const s=e.current.control;return s._options=n,Wj({subject:s._subjects.state,next:o=>{qj(o,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),Me.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),Me.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Me.useEffect(()=>{n.values&&!Qr(n.values,t.current)?(s._reset(n.values,s._options.resetOptions),t.current=n.values,i(o=>({...o}))):s._resetDefaultValues()},[n.values,s]),Me.useEffect(()=>{n.errors&&s._setErrors(n.errors)},[n.errors,s]),Me.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Me.useEffect(()=>{n.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[n.shouldUnregister,s]),e.current.formState=zj(r,s),e.current}function ir(...n){return kk(T0(n))}function Gp({children:n,className:e}){return d.jsx("div",{className:ir("min-h-screen flex flex-col justify-center bg-gradient-radial from-primary-50 via-background to-secondary-50 py-12 px-4 sm:px-6 lg:px-8",e),children:d.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsxs("div",{className:"h-20 w-20 relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-primary-700 rounded-full blur-lg opacity-50"}),d.jsx("div",{className:"relative h-full w-full rounded-full bg-gradient-to-r from-primary-600 to-primary-700 flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-200",children:d.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})})]}),d.jsx("h1",{className:"text-2xl font-bold text-center bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-800",children:"LawLink"})]}),d.jsx("div",{className:"mt-8",children:n})]})})}function Ba({children:n,className:e}){return d.jsx("div",{className:ir("rounded-lg border bg-card text-card-foreground shadow-sm","transition-all duration-200 hover:shadow-md",e),children:d.jsx("div",{className:"p-6",children:n})})}const Iv=(n,e,t)=>{if(n&&"reportValidity"in n){const r=pe(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},pS=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?Iv(r.ref,t,n):r.refs&&r.refs.forEach(i=>Iv(i,t,n))}},iM=(n,e)=>{e.shouldUseNativeValidation&&pS(n,e);const t={};for(const r in n){const i=pe(e.fields,r),s=Object.assign(n[r]||{},{ref:i&&i.ref});if(sM(e.names||Object.keys(n),r)){const o=Object.assign({},pe(t,r));ht(o,"root",s),ht(t,r,o)}else ht(t,r,s)}return t},sM=(n,e)=>n.some(t=>t.startsWith(e+"."));var oM=function(n,e){for(var t={};n.length;){var r=n[0],i=r.code,s=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return n.push(f)})}),e){var c=t[o].types,u=c&&c[r.code];t[o]=aS(o,e,t,i,u?[].concat(u,r.message):r.message)}n.shift()}return t},Hp=function(n,e,t){return t===void 0&&(t={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&pS({},s),{errors:{},values:t.raw?r:u}})}catch(u){return a(u)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:iM(oM(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},nt;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(nt||(nt={}));var sf;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(sf||(sf={}));const he=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xr=n=>{switch(typeof n){case"undefined":return he.undefined;case"string":return he.string;case"number":return isNaN(n)?he.nan:he.number;case"boolean":return he.boolean;case"function":return he.function;case"bigint":return he.bigint;case"symbol":return he.symbol;case"object":return Array.isArray(n)?he.array:n===null?he.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?he.promise:typeof Map<"u"&&n instanceof Map?he.map:typeof Set<"u"&&n instanceof Set?he.set:typeof Date<"u"&&n instanceof Date?he.date:he.object;default:return he.unknown}},ee=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aM=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Rn extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Rn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Rn.create=n=>new Rn(n);const So=(n,e)=>{let t;switch(n.code){case ee.invalid_type:n.received===he.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ee.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,nt.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:t=`Unrecognized key(s) in object: ${nt.joinValues(n.keys,", ")}`;break;case ee.invalid_union:t="Invalid input";break;case ee.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${nt.joinValues(n.options)}`;break;case ee.invalid_enum_value:t=`Invalid enum value. Expected ${nt.joinValues(n.options)}, received '${n.received}'`;break;case ee.invalid_arguments:t="Invalid function arguments";break;case ee.invalid_return_type:t="Invalid function return type";break;case ee.invalid_date:t="Invalid date";break;case ee.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:nt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ee.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ee.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ee.custom:t="Invalid input";break;case ee.invalid_intersection_types:t="Intersection results could not be merged";break;case ee.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ee.not_finite:t="Number must be finite";break;default:t=e.defaultError,nt.assertNever(n)}return{message:t}};let mS=So;function cM(n){mS=n}function su(){return mS}const ou=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},lM=[];function de(n,e){const t=su(),r=ou({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===So?void 0:So].filter(i=>!!i)});n.common.issues.push(r)}class un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return Ae;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return un.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ae;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Ae=Object.freeze({status:"aborted"}),zs=n=>({status:"dirty",value:n}),gn=n=>({status:"valid",value:n}),of=n=>n.status==="aborted",af=n=>n.status==="dirty",$a=n=>n.status==="valid",za=n=>typeof Promise<"u"&&n instanceof Promise;function au(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function gS(n,e,t,r,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var _e;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_e||(_e={}));var ya,_a;class lr{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Nv=(n,e)=>{if($a(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Rn(n.common.issues);return this._error=t,this._error}}};function Fe(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var c,u;const{message:h}=n;return o.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(c=h??r)!==null&&c!==void 0?c:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=h??t)!==null&&u!==void 0?u:a.defaultError}},description:i}}class qe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Xr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new un,ctx:{common:e.parent.common,data:e.data,parsedType:Xr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(za(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Nv(i,s)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xr(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(za(i)?i:Promise.resolve(i));return Nv(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ee.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new zn({schema:this,typeName:ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return sr.create(this,this._def)}nullable(){return wi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $n.create(this,this._def)}promise(){return xo.create(this,this._def)}or(e){return Ha.create([this,e],this._def)}and(e){return Ka.create(this,e,this._def)}transform(e){return new zn({...Fe(this._def),schema:this,typeName:ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Xa({...Fe(this._def),innerType:this,defaultValue:t,typeName:ke.ZodDefault})}brand(){return new Kp({typeName:ke.ZodBranded,type:this,...Fe(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ec({...Fe(this._def),innerType:this,catchValue:t,typeName:ke.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Pc.create(this,e)}readonly(){return tc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uM=/^c[^\s-]{8,}$/i,dM=/^[0-9a-z]+$/,hM=/^[0-9A-HJKMNP-TV-Z]{26}$/,fM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pM=/^[a-z0-9_-]{21}$/i,mM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,gM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sh;const yM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_M=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,bM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wM=new RegExp(`^${vS}$`);function yS(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function SM(n){return new RegExp(`^${yS(n)}$`)}function _S(n){let e=`${vS}T${yS(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function EM(n,e){return!!((e==="v4"||!e)&&yM.test(n)||(e==="v6"||!e)&&_M.test(n))}class Bn extends qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==he.string){const s=this._getOrReturnCtx(e);return de(s,{code:ee.invalid_type,expected:he.string,received:s.parsedType}),Ae}const r=new un;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),de(i,{code:ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),de(i,{code:ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?de(i,{code:ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&de(i,{code:ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")gM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"email",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")sh||(sh=new RegExp(vM,"u")),sh.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"emoji",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")fM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"uuid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")pM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"nanoid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")uM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"cuid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")dM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"cuid2",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")hM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"ulid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),de(i,{validation:"url",code:ee.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"regex",code:ee.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?_S(s).test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?wM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?SM(s).test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{code:ee.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?mM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"duration",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?EM(e.data,s.version)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"ip",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?bM.test(e.data)||(i=this._getOrReturnCtx(e,i),de(i,{validation:"base64",code:ee.invalid_string,message:s.message}),r.dirty()):nt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:ee.invalid_string,..._e.errToObj(r)})}_addCheck(e){return new Bn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._e.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._e.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,..._e.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._e.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._e.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,..._e.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,..._e.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,..._e.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,..._e.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,..._e.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,..._e.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,..._e.errToObj(t)})}nonempty(e){return this.min(1,_e.errToObj(e))}trim(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Bn.create=n=>{var e;return new Bn({checks:[],typeName:ke.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Fe(n)})};function xM(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class yi extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==he.number){const s=this._getOrReturnCtx(e);return de(s,{code:ee.invalid_type,expected:he.number,received:s.parsedType}),Ae}let r;const i=new un;for(const s of this._def.checks)s.kind==="int"?nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:ee.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?xM(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:ee.not_finite,message:s.message}),i.dirty()):nt.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_e.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_e.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_e.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_e.toString(t))}setLimit(e,t,r,i){return new yi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:_e.toString(i)}]})}_addCheck(e){return new yi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:_e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}yi.create=n=>new yi({checks:[],typeName:ke.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Fe(n)});class _i extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==he.bigint){const s=this._getOrReturnCtx(e);return de(s,{code:ee.invalid_type,expected:he.bigint,received:s.parsedType}),Ae}let r;const i=new un;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),de(r,{code:ee.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):nt.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_e.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_e.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_e.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_e.toString(t))}setLimit(e,t,r,i){return new _i({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:_e.toString(i)}]})}_addCheck(e){return new _i({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_i.create=n=>{var e;return new _i({checks:[],typeName:ke.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Fe(n)})};class qa extends qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==he.boolean){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.boolean,received:r.parsedType}),Ae}return gn(e.data)}}qa.create=n=>new qa({typeName:ke.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Fe(n)});class ss extends qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==he.date){const s=this._getOrReturnCtx(e);return de(s,{code:ee.invalid_type,expected:he.date,received:s.parsedType}),Ae}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return de(s,{code:ee.invalid_date}),Ae}const r=new un;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),de(i,{code:ee.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),de(i,{code:ee.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):nt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ss({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:_e.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:_e.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ss.create=n=>new ss({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ke.ZodDate,...Fe(n)});class cu extends qe{_parse(e){if(this._getType(e)!==he.symbol){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.symbol,received:r.parsedType}),Ae}return gn(e.data)}}cu.create=n=>new cu({typeName:ke.ZodSymbol,...Fe(n)});class Wa extends qe{_parse(e){if(this._getType(e)!==he.undefined){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.undefined,received:r.parsedType}),Ae}return gn(e.data)}}Wa.create=n=>new Wa({typeName:ke.ZodUndefined,...Fe(n)});class Ga extends qe{_parse(e){if(this._getType(e)!==he.null){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.null,received:r.parsedType}),Ae}return gn(e.data)}}Ga.create=n=>new Ga({typeName:ke.ZodNull,...Fe(n)});class Eo extends qe{constructor(){super(...arguments),this._any=!0}_parse(e){return gn(e.data)}}Eo.create=n=>new Eo({typeName:ke.ZodAny,...Fe(n)});class Yi extends qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gn(e.data)}}Yi.create=n=>new Yi({typeName:ke.ZodUnknown,...Fe(n)});class Ar extends qe{_parse(e){const t=this._getOrReturnCtx(e);return de(t,{code:ee.invalid_type,expected:he.never,received:t.parsedType}),Ae}}Ar.create=n=>new Ar({typeName:ke.ZodNever,...Fe(n)});class lu extends qe{_parse(e){if(this._getType(e)!==he.undefined){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.void,received:r.parsedType}),Ae}return gn(e.data)}}lu.create=n=>new lu({typeName:ke.ZodVoid,...Fe(n)});class $n extends qe{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==he.array)return de(t,{code:ee.invalid_type,expected:he.array,received:t.parsedType}),Ae;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(de(t,{code:o?ee.too_big:ee.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(de(t,{code:ee.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(de(t,{code:ee.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new lr(t,o,t.path,a)))).then(o=>un.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new lr(t,o,t.path,a)));return un.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new $n({...this._def,minLength:{value:e,message:_e.toString(t)}})}max(e,t){return new $n({...this._def,maxLength:{value:e,message:_e.toString(t)}})}length(e,t){return new $n({...this._def,exactLength:{value:e,message:_e.toString(t)}})}nonempty(e){return this.min(1,e)}}$n.create=(n,e)=>new $n({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ke.ZodArray,...Fe(e)});function Ms(n){if(n instanceof Rt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=sr.create(Ms(r))}return new Rt({...n._def,shape:()=>e})}else return n instanceof $n?new $n({...n._def,type:Ms(n.element)}):n instanceof sr?sr.create(Ms(n.unwrap())):n instanceof wi?wi.create(Ms(n.unwrap())):n instanceof ur?ur.create(n.items.map(e=>Ms(e))):n}class Rt extends qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==he.object){const u=this._getOrReturnCtx(e);return de(u,{code:ee.invalid_type,expected:he.object,received:u.parsedType}),Ae}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ar&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const h=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new lr(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ar){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(u==="strict")a.length>0&&(de(i,{code:ee.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const f=i.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new lr(i,f,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key,y=await h.value;u.push({key:f,value:y,alwaysSet:h.alwaysSet})}return u}).then(u=>un.mergeObjectSync(r,u)):un.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return _e.errToObj,new Rt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=_e.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Rt({...this._def,unknownKeys:"strip"})}passthrough(){return new Rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ke.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Rt({...this._def,catchall:e})}pick(e){const t={};return nt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Rt({...this._def,shape:()=>t})}omit(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Rt({...this._def,shape:()=>t})}deepPartial(){return Ms(this)}partial(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Rt({...this._def,shape:()=>t})}required(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof sr;)s=s._def.innerType;t[r]=s}}),new Rt({...this._def,shape:()=>t})}keyof(){return bS(nt.objectKeys(this.shape))}}Rt.create=(n,e)=>new Rt({shape:()=>n,unknownKeys:"strip",catchall:Ar.create(),typeName:ke.ZodObject,...Fe(e)});Rt.strictCreate=(n,e)=>new Rt({shape:()=>n,unknownKeys:"strict",catchall:Ar.create(),typeName:ke.ZodObject,...Fe(e)});Rt.lazycreate=(n,e)=>new Rt({shape:n,unknownKeys:"strip",catchall:Ar.create(),typeName:ke.ZodObject,...Fe(e)});class Ha extends qe{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Rn(a.ctx.common.issues));return de(t,{code:ee.invalid_union,unionErrors:o}),Ae}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const u={...t,common:{...t.common,issues:[]},parent:null},h=c._parseSync({data:t.data,path:t.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Rn(c));return de(t,{code:ee.invalid_union,unionErrors:a}),Ae}}get options(){return this._def.options}}Ha.create=(n,e)=>new Ha({options:n,typeName:ke.ZodUnion,...Fe(e)});const br=n=>n instanceof Ja?br(n.schema):n instanceof zn?br(n.innerType()):n instanceof Za?[n.value]:n instanceof bi?n.options:n instanceof Qa?nt.objectValues(n.enum):n instanceof Xa?br(n._def.innerType):n instanceof Wa?[void 0]:n instanceof Ga?[null]:n instanceof sr?[void 0,...br(n.unwrap())]:n instanceof wi?[null,...br(n.unwrap())]:n instanceof Kp||n instanceof tc?br(n.unwrap()):n instanceof ec?br(n._def.innerType):[];class od extends qe{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==he.object)return de(t,{code:ee.invalid_type,expected:he.object,received:t.parsedType}),Ae;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(de(t,{code:ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=br(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new od({typeName:ke.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Fe(r)})}}function cf(n,e){const t=Xr(n),r=Xr(e);if(n===e)return{valid:!0,data:n};if(t===he.object&&r===he.object){const i=nt.objectKeys(e),s=nt.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const c=cf(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===he.array&&r===he.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],c=cf(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return t===he.date&&r===he.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Ka extends qe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(of(s)||of(o))return Ae;const a=cf(s.value,o.value);return a.valid?((af(s)||af(o))&&t.dirty(),{status:t.value,value:a.data}):(de(r,{code:ee.invalid_intersection_types}),Ae)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ka.create=(n,e,t)=>new Ka({left:n,right:e,typeName:ke.ZodIntersection,...Fe(t)});class ur extends qe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.array)return de(r,{code:ee.invalid_type,expected:he.array,received:r.parsedType}),Ae;if(r.data.length<this._def.items.length)return de(r,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ae;!this._def.rest&&r.data.length>this._def.items.length&&(de(r,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new lr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>un.mergeArray(t,o)):un.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ur({...this._def,rest:e})}}ur.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ur({items:n,typeName:ke.ZodTuple,rest:null,...Fe(e)})};class Ya extends qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.object)return de(r,{code:ee.invalid_type,expected:he.object,received:r.parsedType}),Ae;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new lr(r,a,r.path,a)),value:o._parse(new lr(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?un.mergeObjectAsync(t,i):un.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof qe?new Ya({keyType:e,valueType:t,typeName:ke.ZodRecord,...Fe(r)}):new Ya({keyType:Bn.create(),valueType:e,typeName:ke.ZodRecord,...Fe(t)})}}class uu extends qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.map)return de(r,{code:ee.invalid_type,expected:he.map,received:r.parsedType}),Ae;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:i._parse(new lr(r,a,r.path,[u,"key"])),value:s._parse(new lr(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Ae;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Ae;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}}}}uu.create=(n,e,t)=>new uu({valueType:e,keyType:n,typeName:ke.ZodMap,...Fe(t)});class os extends qe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.set)return de(r,{code:ee.invalid_type,expected:he.set,received:r.parsedType}),Ae;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(de(r,{code:ee.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(de(r,{code:ee.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return Ae;h.status==="dirty"&&t.dirty(),u.add(h.value)}return{status:t.value,value:u}}const a=[...r.data.values()].map((c,u)=>s._parse(new lr(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new os({...this._def,minSize:{value:e,message:_e.toString(t)}})}max(e,t){return new os({...this._def,maxSize:{value:e,message:_e.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}os.create=(n,e)=>new os({valueType:n,minSize:null,maxSize:null,typeName:ke.ZodSet,...Fe(e)});class Hs extends qe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==he.function)return de(t,{code:ee.invalid_type,expected:he.function,received:t.parsedType}),Ae;function r(a,c){return ou({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,su(),So].filter(u=>!!u),issueData:{code:ee.invalid_arguments,argumentsError:c}})}function i(a,c){return ou({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,su(),So].filter(u=>!!u),issueData:{code:ee.invalid_return_type,returnTypeError:c}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof xo){const a=this;return gn(async function(...c){const u=new Rn([]),h=await a._def.args.parseAsync(c,s).catch(b=>{throw u.addIssue(r(c,b)),u}),f=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(f,s).catch(b=>{throw u.addIssue(i(f,b)),u})})}else{const a=this;return gn(function(...c){const u=a._def.args.safeParse(c,s);if(!u.success)throw new Rn([r(c,u.error)]);const h=Reflect.apply(o,this,u.data),f=a._def.returns.safeParse(h,s);if(!f.success)throw new Rn([i(h,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Hs({...this._def,args:ur.create(e).rest(Yi.create())})}returns(e){return new Hs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Hs({args:e||ur.create([]).rest(Yi.create()),returns:t||Yi.create(),typeName:ke.ZodFunction,...Fe(r)})}}class Ja extends qe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ja.create=(n,e)=>new Ja({getter:n,typeName:ke.ZodLazy,...Fe(e)});class Za extends qe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return de(t,{received:t.data,code:ee.invalid_literal,expected:this._def.value}),Ae}return{status:"valid",value:e.data}}get value(){return this._def.value}}Za.create=(n,e)=>new Za({value:n,typeName:ke.ZodLiteral,...Fe(e)});function bS(n,e){return new bi({values:n,typeName:ke.ZodEnum,...Fe(e)})}class bi extends qe{constructor(){super(...arguments),ya.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return de(t,{expected:nt.joinValues(r),received:t.parsedType,code:ee.invalid_type}),Ae}if(au(this,ya)||gS(this,ya,new Set(this._def.values)),!au(this,ya).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return de(t,{received:t.data,code:ee.invalid_enum_value,options:r}),Ae}return gn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return bi.create(e,{...this._def,...t})}exclude(e,t=this._def){return bi.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}ya=new WeakMap;bi.create=bS;class Qa extends qe{constructor(){super(...arguments),_a.set(this,void 0)}_parse(e){const t=nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==he.string&&r.parsedType!==he.number){const i=nt.objectValues(t);return de(r,{expected:nt.joinValues(i),received:r.parsedType,code:ee.invalid_type}),Ae}if(au(this,_a)||gS(this,_a,new Set(nt.getValidEnumValues(this._def.values))),!au(this,_a).has(e.data)){const i=nt.objectValues(t);return de(r,{received:r.data,code:ee.invalid_enum_value,options:i}),Ae}return gn(e.data)}get enum(){return this._def.values}}_a=new WeakMap;Qa.create=(n,e)=>new Qa({values:n,typeName:ke.ZodNativeEnum,...Fe(e)});class xo extends qe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==he.promise&&t.common.async===!1)return de(t,{code:ee.invalid_type,expected:he.promise,received:t.parsedType}),Ae;const r=t.parsedType===he.promise?t.data:Promise.resolve(t.data);return gn(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}xo.create=(n,e)=>new xo({type:n,typeName:ke.ZodPromise,...Fe(e)});class zn extends qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{de(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Ae;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Ae:c.status==="dirty"||t.value==="dirty"?zs(c.value):c});{if(t.value==="aborted")return Ae;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ae:a.status==="dirty"||t.value==="dirty"?zs(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ae:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ae:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$a(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>$a(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);nt.assertNever(i)}}zn.create=(n,e,t)=>new zn({schema:n,typeName:ke.ZodEffects,effect:e,...Fe(t)});zn.createWithPreprocess=(n,e,t)=>new zn({schema:e,effect:{type:"preprocess",transform:n},typeName:ke.ZodEffects,...Fe(t)});class sr extends qe{_parse(e){return this._getType(e)===he.undefined?gn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sr.create=(n,e)=>new sr({innerType:n,typeName:ke.ZodOptional,...Fe(e)});class wi extends qe{_parse(e){return this._getType(e)===he.null?gn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wi.create=(n,e)=>new wi({innerType:n,typeName:ke.ZodNullable,...Fe(e)});class Xa extends qe{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===he.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Xa.create=(n,e)=>new Xa({innerType:n,typeName:ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class ec extends qe{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return za(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rn(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ec.create=(n,e)=>new ec({innerType:n,typeName:ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class du extends qe{_parse(e){if(this._getType(e)!==he.nan){const r=this._getOrReturnCtx(e);return de(r,{code:ee.invalid_type,expected:he.nan,received:r.parsedType}),Ae}return{status:"valid",value:e.data}}}du.create=n=>new du({typeName:ke.ZodNaN,...Fe(n)});const TM=Symbol("zod_brand");class Kp extends qe{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Pc extends qe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ae:s.status==="dirty"?(t.dirty(),zs(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ae:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new Pc({in:e,out:t,typeName:ke.ZodPipeline})}}class tc extends qe{_parse(e){const t=this._def.innerType._parse(e),r=i=>($a(i)&&(i.value=Object.freeze(i.value)),i);return za(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}tc.create=(n,e)=>new tc({innerType:n,typeName:ke.ZodReadonly,...Fe(e)});function wS(n,e={},t){return n?Eo.create().superRefine((r,i)=>{var s,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):Eo.create()}const kM={object:Rt.lazycreate};var ke;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ke||(ke={}));const AM=(n,e={message:`Input not instance of ${n.name}`})=>wS(t=>t instanceof n,e),SS=Bn.create,ES=yi.create,CM=du.create,RM=_i.create,xS=qa.create,IM=ss.create,NM=cu.create,PM=Wa.create,jM=Ga.create,MM=Eo.create,OM=Yi.create,DM=Ar.create,LM=lu.create,VM=$n.create,FM=Rt.create,UM=Rt.strictCreate,BM=Ha.create,$M=od.create,zM=Ka.create,qM=ur.create,WM=Ya.create,GM=uu.create,HM=os.create,KM=Hs.create,YM=Ja.create,JM=Za.create,ZM=bi.create,QM=Qa.create,XM=xo.create,Pv=zn.create,eO=sr.create,tO=wi.create,nO=zn.createWithPreprocess,rO=Pc.create,iO=()=>SS().optional(),sO=()=>ES().optional(),oO=()=>xS().optional(),aO={string:n=>Bn.create({...n,coerce:!0}),number:n=>yi.create({...n,coerce:!0}),boolean:n=>qa.create({...n,coerce:!0}),bigint:n=>_i.create({...n,coerce:!0}),date:n=>ss.create({...n,coerce:!0})},cO=Ae;var Le=Object.freeze({__proto__:null,defaultErrorMap:So,setErrorMap:cM,getErrorMap:su,makeIssue:ou,EMPTY_PATH:lM,addIssueToContext:de,ParseStatus:un,INVALID:Ae,DIRTY:zs,OK:gn,isAborted:of,isDirty:af,isValid:$a,isAsync:za,get util(){return nt},get objectUtil(){return sf},ZodParsedType:he,getParsedType:Xr,ZodType:qe,datetimeRegex:_S,ZodString:Bn,ZodNumber:yi,ZodBigInt:_i,ZodBoolean:qa,ZodDate:ss,ZodSymbol:cu,ZodUndefined:Wa,ZodNull:Ga,ZodAny:Eo,ZodUnknown:Yi,ZodNever:Ar,ZodVoid:lu,ZodArray:$n,ZodObject:Rt,ZodUnion:Ha,ZodDiscriminatedUnion:od,ZodIntersection:Ka,ZodTuple:ur,ZodRecord:Ya,ZodMap:uu,ZodSet:os,ZodFunction:Hs,ZodLazy:Ja,ZodLiteral:Za,ZodEnum:bi,ZodNativeEnum:Qa,ZodPromise:xo,ZodEffects:zn,ZodTransformer:zn,ZodOptional:sr,ZodNullable:wi,ZodDefault:Xa,ZodCatch:ec,ZodNaN:du,BRAND:TM,ZodBranded:Kp,ZodPipeline:Pc,ZodReadonly:tc,custom:wS,Schema:qe,ZodSchema:qe,late:kM,get ZodFirstPartyTypeKind(){return ke},coerce:aO,any:MM,array:VM,bigint:RM,boolean:xS,date:IM,discriminatedUnion:$M,effect:Pv,enum:ZM,function:KM,instanceof:AM,intersection:zM,lazy:YM,literal:JM,map:GM,nan:CM,nativeEnum:QM,never:DM,null:jM,nullable:tO,number:ES,object:FM,oboolean:oO,onumber:sO,optional:eO,ostring:iO,pipeline:rO,preprocess:nO,promise:XM,record:WM,set:HM,strictObject:UM,string:SS,symbol:NM,transformer:Pv,tuple:qM,undefined:PM,union:BM,unknown:OM,void:LM,NEVER:cO,ZodIssueCode:ee,quotelessJson:aM,ZodError:Rn});const lO=Le.object({email:Le.string().email("Invalid email address"),password:Le.string().min(8,"Password must be at least 8 characters"),rememberMe:Le.boolean().optional()}),uO=Le.object({email:Le.string().email("Invalid email address"),password:Le.string().min(8,"Password must be at least 8 characters"),confirmPassword:Le.string(),firstName:Le.string().min(2,"First name is required"),lastName:Le.string().min(2,"Last name is required"),planId:Le.string().optional()}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});Le.object({displayName:Le.string().min(2,"Display name is required"),expertise:Le.array(Le.string()).min(1,"Select at least one area of expertise"),hourlyRate:Le.number().min(0,"Hourly rate must be positive"),experience:Le.string().min(50,"Experience description must be at least 50 characters"),certifications:Le.array(Le.string())});Le.object({password:Le.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:Le.string()}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});Le.object({title:Le.string().min(5,"Title must be at least 5 characters"),description:Le.string().min(20,"Description must be at least 20 characters"),practiceArea:Le.enum(["Corporate","Litigation","Intellectual Property","Real Estate","Employment"]),billableHours:Le.number().min(0,"Billable hours must be positive"),deadlines:Le.array(Le.object({date:Le.date(),description:Le.string().min(5,"Deadline description required")}))});const Ji=R.forwardRef(({className:n,label:e,error:t,type:r="text",...i},s)=>d.jsxs("div",{className:"space-y-2",children:[e&&d.jsx("label",{className:"text-sm font-medium text-foreground",children:e}),d.jsx("input",{type:r,className:ir("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2","text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200",n),ref:s,...i}),t&&d.jsx("p",{className:"text-sm text-destructive",children:t})]}));Ji.displayName="Input";function dO({title:n,titleId:e,...t},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?R.createElement("title",{id:e},n):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const hO=R.forwardRef(dO);function fO({title:n,titleId:e,...t},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?R.createElement("title",{id:e},n):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const jv=R.forwardRef(fO);function pO({title:n,titleId:e,...t},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?R.createElement("title",{id:e},n):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const mO=R.forwardRef(pO);function gO({title:n,titleId:e,...t},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?R.createElement("title",{id:e},n):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const vO=R.forwardRef(gO);function yO({title:n,titleId:e,...t},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?R.createElement("title",{id:e},n):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _O=R.forwardRef(yO),hu=R.forwardRef(({label:n,error:e,...t},r)=>{const[i,s]=R.useState(!1);return d.jsxs("div",{className:"relative",children:[d.jsx(Ji,{type:i?"text":"password",label:n,error:e,ref:r,...t}),d.jsx("button",{type:"button",className:"absolute right-3 top-[32px] text-gray-400 hover:text-gray-600",onClick:()=>s(!i),children:i?d.jsx(mO,{className:"h-5 w-5"}):d.jsx(vO,{className:"h-5 w-5"})})]})});hu.displayName="PasswordInput";function bO({onSuccess:n,onError:e,className:t}){const r=GA({onSuccess:n,onError:e,flow:"auth-code"});return d.jsxs("button",{onClick:()=>r(),className:ir("w-full flex items-center justify-center px-4 py-2.5 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",t),children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d.jsx("span",{className:"text-sm font-medium ml-3",children:"Google"})]})}const Mv=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Ov=T0,TS=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Ov(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=t==null?void 0:t[u],f=s==null?void 0:s[u];if(h===null)return null;const y=Mv(h)||Mv(f);return i[u][y]}),a=t&&Object.entries(t).reduce((u,h)=>{let[f,y]=h;return y===void 0||(u[f]=y),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:y,...b}=h;return Object.entries(b).every(E=>{let[C,N]=E;return Array.isArray(N)?N.includes({...s,...a}[C]):{...s,...a}[C]===N})?[...u,f,y]:u},[]);return Ov(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},wO=TS("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function jt({className:n,variant:e,size:t,children:r,isLoading:i,disabled:s,...o}){return d.jsx("button",{className:ir(wO({variant:e,size:t,className:n})),disabled:s||i,...o,children:i?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r})}function SO(){var h,f;const[n,e]=R.useState(""),t=vs(),{login:r}=ws(),{register:i,handleSubmit:s,formState:{errors:o,isSubmitting:a}}=Wp({resolver:Hp(lO)}),c=async y=>{try{e(""),await r(y.email,y.password),t("/")}catch{e("Failed to sign in")}},u=async y=>{try{e(""),console.log("Google auth success:",y),t("/")}catch{e("Failed to sign in with Google")}};return d.jsx(Gp,{children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-800",children:"Sign in to LawLink"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Your trusted legal consultation platform"})]}),n&&d.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-md",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm text-red-700",children:n})})]})}),d.jsx(Ba,{children:d.jsxs("form",{className:"space-y-6",onSubmit:s(c),children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(Ji,{label:"Email address",type:"email",autoComplete:"email",...i("email"),error:(h=o.email)==null?void 0:h.message}),d.jsx(hu,{label:"Password",autoComplete:"current-password",...i("password"),error:(f=o.password)==null?void 0:f.message})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"remember-me",type:"checkbox",...i("rememberMe"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"}),d.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),d.jsx("div",{className:"text-sm",children:d.jsx(Cn,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),d.jsx("div",{children:d.jsx(jt,{type:"submit",variant:"primary",size:"lg",isLoading:a,className:"w-full",children:a?"Signing in...":"Sign in"})}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or"})})]}),d.jsx(bO,{onSuccess:u,onError:()=>e("Google sign in failed")}),d.jsxs("div",{className:"mt-6 text-sm text-center border-t pt-6",children:[d.jsx("span",{className:"text-gray-600",children:"Don't have an account?"})," ",d.jsx(Cn,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})]})})]})})}function EO(){return d.jsx(Gp,{children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-center text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-800",children:"Join LawLink"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Choose how you want to join our platform"})]}),d.jsxs("div",{className:"mt-8 grid gap-4",children:[d.jsxs(Ba,{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Client Account"}),d.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Perfect for individuals seeking legal consultation and advice."}),d.jsx(Cn,{to:"/register/client",className:"block",children:d.jsx(jt,{variant:"primary",size:"lg",className:"w-full",children:"Sign up as a Client"})})]}),d.jsxs(Ba,{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Legal Consultant"}),d.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"For legal professionals looking to offer their expertise."}),d.jsx(Cn,{to:"/register/consultant",className:"block",children:d.jsx(jt,{variant:"outline",size:"lg",className:"w-full",children:"Sign up as a Legal Consultant"})})]})]}),d.jsx("div",{className:"text-sm text-center border-t border-gray-200 pt-6 mt-6",children:d.jsx(Cn,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Already have an account? Sign in"})})]})})}const xO=[{id:"basic",name:"Basic",price:49,features:["Up to 10 clients","Basic document management","Chat support","Calendar integration"],stripeProductId:"prod_basic",stripePriceId:"price_basic"},{id:"professional",name:"Professional",price:99,features:["Up to 50 clients","Advanced document management","Priority chat support","Video conferencing","Custom availability hours"],stripeProductId:"prod_professional",stripePriceId:"price_professional"},{id:"enterprise",name:"Enterprise",price:199,features:["Unlimited clients","Enterprise document management","24/7 priority support","Advanced video conferencing","Custom branding","API access"],stripeProductId:"prod_enterprise",stripePriceId:"price_enterprise"}];function TO({selectedPlan:n,onSelectPlan:e}){return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:xO.map(t=>d.jsx(Ba,{className:`cursor-pointer transition-all duration-200 ${n===t.id?"ring-2 ring-primary-500 border-primary-500 bg-primary-50/50":"hover:shadow-lg border border-gray-200"}`,onClick:()=>e(t.id),children:d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),n===t.id&&d.jsx(jv,{className:"h-6 w-6 text-primary-500"})]}),d.jsxs("p",{children:[d.jsxs("span",{className:"text-3xl font-bold text-gray-800",children:["$",t.price]}),d.jsx("span",{className:"text-base font-normal text-muted-foreground",children:"/mo"})]}),d.jsx("ul",{className:"space-y-3",children:t.features.map((r,i)=>d.jsxs("li",{className:"flex items-start",children:[d.jsx(jv,{className:"h-5 w-5 text-primary-500 shrink-0"}),d.jsx("span",{className:"ml-3 text-sm text-gray-600",children:r})]},i))})]})},t.id))})}function Yp(){const[n,e]=R.useState([]),t=R.useCallback((i,s="info")=>{const o=Math.random().toString(36).substr(2,9);e(a=>[...a,{id:o,message:i,type:s}]),setTimeout(()=>{e(a=>a.filter(c=>c.id!==o))},3e3)},[]),r=R.useCallback(i=>{e(s=>s.filter(o=>o.id!==i))},[]);return{toasts:n,addToast:t,removeToast:r}}function kO(){var h,f,y,b,E;const n=vs(),{register:e}=ws(),{addToast:t}=Yp(),{register:r,setValue:i,watch:s,handleSubmit:o,formState:{errors:a,isSubmitting:c}}=Wp({resolver:Hp(uO),defaultValues:{planId:"basic"}}),u=async C=>{try{await e(C.email,C.password),n("/")}catch(N){console.error("Registration error:",N),t("Registration failed. Please try again.","error")}};return d.jsx(Gp,{children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-800",children:"Register as a Legal Consultant"}),d.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Join our platform and start offering your legal expertise"})]}),d.jsx(Ba,{children:d.jsxs("form",{className:"space-y-6",onSubmit:o(u),children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ji,{label:"First Name",...r("firstName"),error:(h=a.firstName)==null?void 0:h.message}),d.jsx(Ji,{label:"Last Name",...r("lastName"),error:(f=a.lastName)==null?void 0:f.message})]}),d.jsx(Ji,{label:"Email",type:"email",...r("email"),error:(y=a.email)==null?void 0:y.message}),d.jsx(hu,{label:"Password",...r("password"),error:(b=a.password)==null?void 0:b.message}),d.jsx(hu,{label:"Confirm Password",...r("confirmPassword"),error:(E=a.confirmPassword)==null?void 0:E.message}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Subscription Plan"}),d.jsx("div",{className:"mt-4",children:d.jsx(TO,{selectedPlan:s("planId"),onSelectPlan:C=>{i("planId",C,{shouldValidate:!0})}})})]}),d.jsx(jt,{type:"submit",variant:"primary",size:"lg",isLoading:c,className:"w-full",children:c?"Processing...":"Create Account"})]})})]})})}const hl={"test-user-123":{id:"test-user-123",email:"test@example.com",displayName:"John Smith",userType:"consultant",createdAt:new Date,expertise:["Corporate Law","Contract Law"],hourlyRate:150,availability:{Monday:["09:00","10:00","11:00"],Tuesday:["14:00","15:00","16:00"]},experience:"Senior legal consultant with 10+ years of experience",certifications:["Bar Association","Legal Tech Certificate"],rating:4.8,reviews:[{id:"review-1",clientId:"client-1",rating:5,comment:"Excellent service and advice",createdAt:new Date}]}},$i=class $i{constructor(){}static getInstance(){return $i.instance||($i.instance=new $i),$i.instance}async createProfile(e,t){await new Promise(r=>setTimeout(r,800)),hl[e]={...t,createdAt:new Date}}async getProfile(e){return await new Promise(t=>setTimeout(t,500)),hl[e]||null}async updateProfile(e,t){await new Promise(r=>setTimeout(r,800)),hl[e]={...hl[e],...t}}};Fg($i,"instance");let To=$i;const AO=Le.object({email:Le.string().email("Invalid email address"),password:Le.string().min(8,"Password must be at least 8 characters"),confirmPassword:Le.string(),firstName:Le.string().min(2,"First name is required"),lastName:Le.string().min(2,"Last name is required")}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function CO(){const n=vs(),{register:e}=ws(),[t,r]=R.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[i,s]=R.useState({}),[o,a]=R.useState(!1),c=async u=>{u.preventDefault(),a(!0),s({});try{const h=AO.parse(t),f=await e(h.email,h.password);f&&(await To.getInstance().createProfile(f.user.uid,{id:f.user.uid,email:h.email,displayName:`${h.firstName} ${h.lastName}`,userType:"client",createdAt:new Date}),n("/"))}catch(h){if(h instanceof Le.ZodError){const f={};h.errors.forEach(y=>{y.path&&(f[y.path[0]]=y.message)}),s(f)}else s({submit:"Registration failed. Please try again."})}finally{a(!1)}};return d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your Client Account"}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",d.jsx(Cn,{to:"/register/consultant",className:"font-medium text-blue-600 hover:text-blue-500",children:"register as a Legal Consultant"})]})]}),d.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:d.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:d.jsxs("form",{className:"space-y-6",onSubmit:c,children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),d.jsx("input",{type:"text",value:t.firstName,onChange:u=>r({...t,firstName:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i.firstName&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.firstName})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),d.jsx("input",{type:"text",value:t.lastName,onChange:u=>r({...t,lastName:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i.lastName&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.lastName})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",value:t.email,onChange:u=>r({...t,email:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i.email&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",value:t.password,onChange:u=>r({...t,password:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i.password&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),d.jsx("input",{type:"password",value:t.confirmPassword,onChange:u=>r({...t,confirmPassword:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i.confirmPassword&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),i.submit&&d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-600",children:i.submit})}),d.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Creating Account...":"Create Account"})]})})})]})}function RO({profile:n}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[n.photoURL?d.jsx("img",{src:n.photoURL,alt:n.displayName,className:"h-16 w-16 rounded-full"}):d.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:d.jsx("span",{className:"text-2xl font-medium text-blue-600",children:n.displayName.charAt(0)})}),d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium text-lg",children:n.displayName}),d.jsx(ie,{className:"text-gray-500",children:n.email})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx(ie,{className:"font-medium mb-2",children:"Account Settings"}),d.jsxs("nav",{className:"space-y-2",children:[d.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-md",children:"Edit Profile"}),d.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-md",children:"Security Settings"}),d.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-md",children:"Notification Preferences"})]})]})]})}function Dv({userId:n}){const[e,t]=R.useState([]),[r,i]=R.useState(!0);R.useEffect(()=>{const o=[{id:"1",type:"consultation",description:"Consultation scheduled with John Doe",timestamp:new Date,metadata:{consultantName:"John Doe",duration:"1 hour"}},{id:"2",type:"document",description:"Contract review completed",timestamp:new Date(Date.now()-864e5),metadata:{documentName:"Service Agreement.pdf"}}];t(o),i(!1)},[n]);const s=o=>{switch(o){case"consultation":return d.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:d.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})});case"document":return d.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:d.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})});case"payment":return d.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:d.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"message":return d.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:d.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})})}};return r?d.jsx("div",{children:"Loading activities..."}):d.jsxs(xe,{children:[d.jsx(He,{children:"Recent Activity"}),d.jsx("div",{className:"mt-6 space-y-8",children:e.map(o=>d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:s(o.type)}),d.jsxs("div",{className:"ml-4 flex-1",children:[d.jsx(ie,{className:"font-medium",children:o.description}),d.jsx(ie,{className:"text-gray-500 text-sm",children:Jt(o.timestamp,"MMM d, yyyy h:mm a")}),o.metadata&&d.jsx("div",{className:"mt-2 text-sm text-gray-600",children:Object.entries(o.metadata).map(([a,c])=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"font-medium",children:[a,":"]}),d.jsx("span",{children:c})]},a))})]})]},o.id))})]})}function IO({notifications:n}){const e=n.filter(t=>!t.read).length;return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(ie,{className:"font-medium",children:"Notifications"}),e>0&&d.jsxs(Lt,{color:"red",children:[e," new"]})]}),d.jsx("div",{className:"space-y-2",children:n.map(t=>d.jsxs("div",{className:`p-3 rounded-lg ${t.read?"bg-gray-50":"bg-blue-50"}`,children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsx(ie,{className:t.read?"text-gray-600":"text-gray-900",children:t.message}),!t.read&&d.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),d.jsx(ie,{className:"text-xs text-gray-500 mt-1",children:t.timestamp.toLocaleString()})]},t.id))}),n.length===0&&d.jsx(ie,{className:"text-gray-500 text-center py-4",children:"No notifications"})]})}function NO({userId:n}){const[e,t]=R.useState([]),[r,i]=R.useState(!0);R.useEffect(()=>{const a=[{id:"1",amount:250,status:"completed",date:new Date,description:"Legal consultation - 1 hour",consultantName:"John Doe"},{id:"2",amount:500,status:"pending",date:new Date(Date.now()-864e5),description:"Document review service",consultantName:"Jane Smith"}];t(a),i(!1)},[n]);const s=a=>{switch(a){case"completed":return"green";case"pending":return"yellow";case"failed":return"red"}},o=Array.from({length:6}).map((a,c)=>{const u=new Date;u.setMonth(u.getMonth()-c);const h=e.filter(f=>f.date.getMonth()===u.getMonth()&&f.date.getFullYear()===u.getFullYear()&&f.status==="completed").reduce((f,y)=>f+y.amount,0);return{month:Jt(u,"MMM yyyy"),"Total Spent":h}}).reverse();return r?d.jsx("div",{children:"Loading payment history..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Monthly Spending"}),d.jsx(wc,{className:"mt-6",data:o,index:"month",categories:["Total Spent"],colors:["blue"],valueFormatter:a=>`$${a}`})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Recent Transactions"}),d.jsx("div",{className:"mt-6 space-y-4",children:e.map(a=>d.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium",children:a.description}),d.jsxs(ie,{className:"text-sm text-gray-500",children:[a.consultantName," • ",Jt(a.date,"MMM d, yyyy")]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs(ie,{className:"font-medium",children:["$",a.amount]}),d.jsx(Lt,{color:s(a.status),size:"sm",children:a.status})]})]},a.id))})]})]})}function PO({userId:n}){const[e,t]=R.useState([]),[r,i]=R.useState(!0);R.useEffect(()=>{t([{id:"1",title:"Contract Review",status:"active",progress:75,consultant:"John Doe",startDate:new Date("2024-01-15"),nextMilestone:{title:"Final Review",dueDate:new Date("2024-03-01")}},{id:"2",title:"Legal Documentation",status:"on_hold",progress:30,consultant:"Jane Smith",startDate:new Date("2024-02-01")}]),i(!1)},[n]);const s=o=>{switch(o){case"active":return"green";case"completed":return"blue";case"on_hold":return"yellow"}};return r?d.jsx("div",{children:"Loading projects..."}):d.jsx("div",{className:"space-y-6",children:e.map(o=>d.jsxs(xe,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(He,{children:o.title}),d.jsxs(ie,{className:"text-gray-500",children:["Consultant: ",o.consultant]})]}),d.jsx(Lt,{color:s(o.status),children:o.status.replace("_"," ")})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx(ie,{children:"Progress"}),d.jsxs(ie,{children:[o.progress,"%"]})]}),d.jsx(vp,{value:o.progress,color:"blue"})]}),d.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(ie,{className:"text-gray-500",children:"Start Date"}),d.jsx(ie,{children:o.startDate.toLocaleDateString()})]}),o.endDate&&d.jsxs("div",{children:[d.jsx(ie,{className:"text-gray-500",children:"End Date"}),d.jsx(ie,{children:o.endDate.toLocaleDateString()})]})]}),o.nextMilestone&&d.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[d.jsx(ie,{className:"font-medium",children:"Next Milestone"}),d.jsxs("div",{className:"mt-1",children:[d.jsx(ie,{children:o.nextMilestone.title}),d.jsxs(ie,{className:"text-gray-500",children:["Due: ",o.nextMilestone.dueDate.toLocaleDateString()]})]})]})]},o.id))})}function jO({userId:n}){const[e,t]=R.useState([]),[r,i]=R.useState(!0),[s,o]=R.useState("all");R.useEffect(()=>{const h=[{id:"1",name:"Service Agreement.pdf",type:"contract",size:25e5,uploadedAt:new Date,status:"final",sharedWith:["John Doe"]},{id:"2",name:"Legal Consultation Report.docx",type:"report",size:15e5,uploadedAt:new Date(Date.now()-864e5),status:"draft",sharedWith:[]}];t(h),i(!1)},[n]);const a=h=>{const f=["Bytes","KB","MB","GB"];if(h===0)return"0 Bytes";const y=Math.floor(Math.log(h)/Math.log(1024));return`${(h/Math.pow(1024,y)).toFixed(2)} ${f[y]}`},c=h=>{switch(h){case"draft":return"yellow";case"final":return"green";case"archived":return"gray"}},u=e.filter(h=>s==="all"||h.type===s);return r?d.jsx("div",{children:"Loading documents..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"flex space-x-2",children:d.jsxs("select",{value:s,onChange:h=>o(h.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Documents"}),d.jsx("option",{value:"contract",children:"Contracts"}),d.jsx("option",{value:"report",children:"Reports"}),d.jsx("option",{value:"invoice",children:"Invoices"}),d.jsx("option",{value:"other",children:"Other"})]})}),d.jsx(jt,{variant:"primary",children:"Upload Document"})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Documents"}),d.jsx("div",{className:"mt-6 space-y-4",children:u.map(h=>d.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:d.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium",children:h.name}),d.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[d.jsx("span",{children:a(h.size)}),d.jsx("span",{children:"•"}),d.jsx("span",{children:Jt(h.uploadedAt,"MMM d, yyyy")})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(Lt,{color:c(h.status),size:"sm",children:h.status}),d.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:"Download"})]})]},h.id))})]})]})}function MO({userId:n}){const[e,t]=R.useState([]),[r,i]=R.useState(!0),[s,o]=R.useState("all");R.useEffect(()=>{const h=[{id:"1",subject:"Payment Issue",description:"Unable to process payment for consultation",status:"open",priority:"high",createdAt:new Date,lastUpdated:new Date,assignedTo:"Support Team",responses:[]},{id:"2",subject:"Document Access",description:"Cannot access shared documents",status:"in_progress",priority:"medium",createdAt:new Date(Date.now()-864e5),lastUpdated:new Date(Date.now()-36e5),assignedTo:"Technical Support",responses:[{id:"r1",message:"We are investigating the issue",sender:"Technical Support",timestamp:new Date(Date.now()-36e5)}]}];t(h),i(!1)},[n]);const a=h=>{switch(h){case"open":return"yellow";case"in_progress":return"blue";case"resolved":return"green";case"closed":return"gray"}},c=h=>{switch(h){case"low":return"gray";case"medium":return"yellow";case"high":return"red"}},u=e.filter(h=>s==="all"||h.status===s);return r?d.jsx("div",{children:"Loading tickets..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"flex space-x-2",children:d.jsxs("select",{value:s,onChange:h=>o(h.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Tickets"}),d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"in_progress",children:"In Progress"}),d.jsx("option",{value:"resolved",children:"Resolved"}),d.jsx("option",{value:"closed",children:"Closed"})]})}),d.jsx(jt,{variant:"primary",children:"New Ticket"})]}),d.jsx("div",{className:"space-y-4",children:u.map(h=>d.jsxs(xe,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx(He,{children:h.subject}),d.jsxs(ie,{className:"text-gray-500 mt-1",children:["Created ",Jt(h.createdAt,"MMM d, yyyy")]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(Lt,{color:c(h.priority),children:h.priority}),d.jsx(Lt,{color:a(h.status),children:h.status.replace("_"," ")})]})]}),d.jsx(ie,{className:"mt-4",children:h.description}),h.responses.length>0&&d.jsxs("div",{className:"mt-4 border-t pt-4",children:[d.jsx(ie,{className:"font-medium",children:"Latest Response"}),d.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded-lg",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx(ie,{className:"font-medium",children:h.responses[0].sender}),d.jsx(ie,{className:"text-gray-500",children:Jt(h.responses[0].timestamp,"MMM d, h:mm a")})]}),d.jsx(ie,{className:"mt-1",children:h.responses[0].message})]})]}),d.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[d.jsx(jt,{variant:"outline",children:"View Details"}),h.status!=="closed"&&d.jsx(jt,{variant:"primary",children:"Reply"})]})]},h.id))})]})}function OO({userId:n}){var y;const[e,t]=R.useState([]),[r,i]=R.useState(null),[s,o]=R.useState([]),[a,c]=R.useState(!0),[u,h]=R.useState("");R.useEffect(()=>{const b=[{id:"conv1",participantId:"consultant1",participantName:"John Doe",lastMessage:{id:"msg1",senderId:"consultant1",senderName:"John Doe",recipientId:n,content:"I have reviewed the documents you sent.",timestamp:new Date,read:!1},unreadCount:2},{id:"conv2",participantId:"consultant2",participantName:"Jane Smith",lastMessage:{id:"msg2",senderId:n,senderName:"You",recipientId:"consultant2",content:"Thank you for the consultation.",timestamp:new Date(Date.now()-864e5),read:!0},unreadCount:0}];t(b),c(!1)},[n]),R.useEffect(()=>{if(r){const b=[{id:"msg1",senderId:"consultant1",senderName:"John Doe",recipientId:n,content:"I have reviewed the documents you sent.",timestamp:new Date,read:!1},{id:"msg2",senderId:n,senderName:"You",recipientId:"consultant1",content:"Great, what are your thoughts?",timestamp:new Date(Date.now()-36e5),read:!0},{id:"msg3",senderId:"consultant1",senderName:"John Doe",recipientId:n,content:"Let me outline my key findings.",timestamp:new Date(Date.now()-72e5),read:!0}];o(b)}},[r,n]);const f=()=>{var E;if(!u.trim()||!r)return;const b={id:`msg${Date.now()}`,senderId:n,senderName:"You",recipientId:((E=e.find(C=>C.id===r))==null?void 0:E.participantId)||"",content:u,timestamp:new Date,read:!1};o(C=>[...C,b]),h("")};return a?d.jsx("div",{children:"Loading messages..."}):d.jsxs("div",{className:"grid grid-cols-12 gap-6 h-[calc(100vh-16rem)]",children:[d.jsxs("div",{className:"col-span-4 bg-white rounded-lg shadow overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx(He,{children:"Conversations"})}),d.jsx("div",{className:"overflow-y-auto h-full",children:e.map(b=>d.jsxs("button",{onClick:()=>i(b.id),className:`w-full p-4 text-left hover:bg-gray-50 ${r===b.id?"bg-blue-50":""}`,children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx(ie,{className:"font-medium",children:b.participantName}),b.unreadCount>0&&d.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:b.unreadCount})]}),d.jsx(ie,{className:"text-sm text-gray-500 truncate",children:b.lastMessage.content}),d.jsx(ie,{className:"text-xs text-gray-400",children:Jt(b.lastMessage.timestamp,"MMM d, h:mm a")})]},b.id))})]}),d.jsx("div",{className:"col-span-8 bg-white rounded-lg shadow overflow-hidden",children:r?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx(He,{children:(y=e.find(b=>b.id===r))==null?void 0:y.participantName})}),d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.map(b=>d.jsx("div",{className:`flex ${b.senderId===n?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${b.senderId===n?"bg-blue-500 text-white":"bg-gray-100"}`,children:[d.jsx(ie,{children:b.content}),d.jsx(ie,{className:`text-xs ${b.senderId===n?"text-blue-100":"text-gray-500"}`,children:Jt(b.timestamp,"h:mm a")})]})},b.id))}),d.jsx("div",{className:"p-4 border-t",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("input",{type:"text",value:u,onChange:b=>h(b.target.value),placeholder:"Type your message...",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",onKeyPress:b=>{b.key==="Enter"&&f()}}),d.jsx(jt,{variant:"primary",onClick:f,disabled:!u.trim(),children:"Send"})]})})]})]}):d.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a conversation to start messaging"})})]})}var kS="Expected a function",Lv=NaN,DO="[object Symbol]",LO=/^\s+|\s+$/g,VO=/^[-+]0x[0-9a-f]+$/i,FO=/^0b[01]+$/i,UO=/^0o[0-7]+$/i,BO=parseInt,$O=typeof ol=="object"&&ol&&ol.Object===Object&&ol,zO=typeof self=="object"&&self&&self.Object===Object&&self,qO=$O||zO||Function("return this")(),WO=Object.prototype,GO=WO.toString,HO=Math.max,KO=Math.min,oh=function(){return qO.Date.now()};function YO(n,e,t){var r,i,s,o,a,c,u=0,h=!1,f=!1,y=!0;if(typeof n!="function")throw new TypeError(kS);e=Vv(e)||0,fu(t)&&(h=!!t.leading,f="maxWait"in t,s=f?HO(Vv(t.maxWait)||0,e):s,y="trailing"in t?!!t.trailing:y);function b(z){var k=r,S=i;return r=i=void 0,u=z,o=n.apply(S,k),o}function E(z){return u=z,a=setTimeout($,e),h?b(z):o}function C(z){var k=z-c,S=z-u,A=e-k;return f?KO(A,s-S):A}function N(z){var k=z-c,S=z-u;return c===void 0||k>=e||k<0||f&&S>=s}function $(){var z=oh();if(N(z))return V(z);a=setTimeout($,C(z))}function V(z){return a=void 0,y&&r?b(z):(r=i=void 0,o)}function G(){a!==void 0&&clearTimeout(a),u=0,r=c=i=a=void 0}function J(){return a===void 0?o:V(oh())}function q(){var z=oh(),k=N(z);if(r=arguments,i=this,c=z,k){if(a===void 0)return E(c);if(f)return a=setTimeout($,e),b(c)}return a===void 0&&(a=setTimeout($,e)),o}return q.cancel=G,q.flush=J,q}function JO(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(kS);return fu(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),YO(n,e,{leading:r,maxWait:e,trailing:i})}function fu(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function ZO(n){return!!n&&typeof n=="object"}function QO(n){return typeof n=="symbol"||ZO(n)&&GO.call(n)==DO}function Vv(n){if(typeof n=="number")return n;if(QO(n))return Lv;if(fu(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=fu(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(LO,"");var t=FO.test(n);return t||UO.test(n)?BO(n.slice(2),t?2:8):VO.test(n)?Lv:+n}var XO=JO;const eD=Uk(XO);function tD(n,e){if(n==null)return{};var t,r,i=function(o,a){if(o==null)return{};var c,u,h={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],a.indexOf(c)>=0||(h[c]=o[c]);return h}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Fv(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function Ee(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){Fv(s,r,i,o,a,"next",c)}function a(c){Fv(s,r,i,o,a,"throw",c)}o(void 0)})}}function Wn(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(n){return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(n)}function AS(n){var e=function(t,r){if(wt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,r||"default");if(wt(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}(n,"string");return wt(e)==="symbol"?e:String(e)}function Uv(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,AS(r.key),r)}}function Gn(n,e,t){return e&&Uv(n.prototype,e),t&&Uv(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function wr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nc(n,e){return nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},nc(n,e)}function ad(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nc(n,e)}function cd(n,e){if(e&&(wt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wr(n)}function qn(n){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(n)}function Yr(n,e,t){return(e=AS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function as(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,r){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var s,o,a,c,u=[],h=!0,f=!1;try{if(a=(i=i.call(t)).next,r===0){if(Object(i)!==i)return;h=!1}else for(;!(h=(s=a.call(i)).done)&&(u.push(s.value),u.length!==r);h=!0);}catch(y){f=!0,o=y}finally{try{if(!h&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(n,e)||function(t,r){if(t){if(typeof t=="string")return Bv(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Bv(t,r):void 0}}(n,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var CS,fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={},nD={get exports(){return Er},set exports(n){Er=n}},Ks=typeof Reflect=="object"?Reflect:null,$v=Ks&&typeof Ks.apply=="function"?Ks.apply:function(n,e,t){return Function.prototype.apply.call(n,e,t)};CS=Ks&&typeof Ks.ownKeys=="function"?Ks.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};var zv=Number.isNaN||function(n){return n!=n};function ft(){ft.init.call(this)}nD.exports=ft,Er.once=function(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}Yv(n,e,s,{once:!0}),e!=="error"&&function(o,a,c){typeof o.on=="function"&&Yv(o,"error",a,c)}(n,i,{once:!0})})},ft.EventEmitter=ft,ft.prototype._events=void 0,ft.prototype._eventsCount=0,ft.prototype._maxListeners=void 0;var qv=10;function Ol(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function RS(n){return n._maxListeners===void 0?ft.defaultMaxListeners:n._maxListeners}function Wv(n,e,t,r){var i,s,o,a;if(Ol(t),(s=n._events)===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),(i=RS(n))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return n}function rD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gv(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=rD.bind(r);return i.listener=t,r.wrapFn=i,i}function Hv(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?function(s){for(var o=new Array(s.length),a=0;a<o.length;++a)o[a]=s[a].listener||s[a];return o}(i):IS(i,i.length)}function Kv(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function IS(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function Yv(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else{if(typeof n.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)})}}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return qv},set:function(n){if(typeof n!="number"||n<0||zv(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");qv=n}}),ft.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ft.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||zv(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},ft.prototype.getMaxListeners=function(){return RS(this)},ft.prototype.emit=function(n){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var r=n==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[n];if(a===void 0)return!1;if(typeof a=="function")$v(a,this,e);else{var c=a.length,u=IS(a,c);for(t=0;t<c;++t)$v(u[t],this,e)}return!0},ft.prototype.addListener=function(n,e){return Wv(this,n,e,!1)},ft.prototype.on=ft.prototype.addListener,ft.prototype.prependListener=function(n,e){return Wv(this,n,e,!0)},ft.prototype.once=function(n,e){return Ol(e),this.on(n,Gv(this,n,e)),this},ft.prototype.prependOnceListener=function(n,e){return Ol(e),this.prependListener(n,Gv(this,n,e)),this},ft.prototype.removeListener=function(n,e){var t,r,i,s,o;if(Ol(e),(r=this._events)===void 0)return this;if((t=r[n])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[n],r.removeListener&&this.emit("removeListener",n,t.listener||e));else if(typeof t!="function"){for(i=-1,s=t.length-1;s>=0;s--)if(t[s]===e||t[s].listener===e){o=t[s].listener,i=s;break}if(i<0)return this;i===0?t.shift():function(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()}(t,i),t.length===1&&(r[n]=t[0]),r.removeListener!==void 0&&this.emit("removeListener",n,o||e)}return this},ft.prototype.off=ft.prototype.removeListener,ft.prototype.removeAllListeners=function(n){var e,t,r;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[n]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[n]),this;if(arguments.length===0){var i,s=Object.keys(t);for(r=0;r<s.length;++r)(i=s[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[n])=="function")this.removeListener(n,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(n,e[r]);return this},ft.prototype.listeners=function(n){return Hv(this,n,!0)},ft.prototype.rawListeners=function(n){return Hv(this,n,!1)},ft.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):Kv.call(n,e)},ft.prototype.listenerCount=Kv,ft.prototype.eventNames=function(){return this._eventsCount>0?CS(this._events):[]};var iD=typeof Map=="function",sD=typeof Set=="function",oD=typeof WeakSet=="function",Jv=Object.keys,Zv=function(n,e){return n&&typeof n=="object"&&e.add(n)},Qv=function(n,e,t,r){for(var i,s=0;s<n.length;s++)if(t((i=n[s])[0],e[0],r)&&t(i[1],e[1],r))return!0;return!1},lf=function(n,e,t,r){for(var i=0;i<n.length;i++)if(t(n[i],e,r))return!0;return!1},rc=function(n,e){return n===e||n!=n&&e!=e},Xv=function(n){return n.constructor===Object},ey=function(n){return typeof n.then=="function"},ty=function(n){return!(!n.$$typeof||!n._store)},ny=function(n){return function(e){var t=n||e;return function(r,i,s){s===void 0&&(s=oD?new WeakSet:Object.create({_values:[],add:function(c){this._values.push(c)},has:function(c){return!!~this._values.indexOf(c)}}));var o=s.has(r),a=s.has(i);return o||a?o&&a:(Zv(r,s),Zv(i,s),t(r,i,s))}}},ry=function(n){var e=[];return n.forEach(function(t,r){return e.push([r,t])}),e},iy=function(n){var e=[];return n.forEach(function(t){return e.push(t)}),e},sy=function(n,e,t,r){var i,s=Jv(n),o=Jv(e);if(s.length!==o.length)return!1;for(var a=0;a<s.length;a++)if(i=s[a],!lf(o,i,rc)||(i!=="_owner"||!ty(n)||!ty(e))&&!t(n[i],e[i],r))return!1;return!0},oy=Array.isArray,pu=function(n){var e=typeof n=="function"?n(t):t;function t(r,i,s){if(rc(r,i))return!0;var o=typeof r;if(o!==typeof i||o!=="object"||!r||!i)return!1;if(Xv(r)&&Xv(i))return sy(r,i,e,s);var a=oy(r),c=oy(i);if(a||c)return a===c&&function(G,J,q,z){if(G.length!==J.length)return!1;for(var k=0;k<G.length;k++)if(!q(G[k],J[k],z))return!1;return!0}(r,i,e,s);var u=r instanceof Date,h=i instanceof Date;if(u||h)return u===h&&rc(r.getTime(),i.getTime());var f,y,b=r instanceof RegExp,E=i instanceof RegExp;if(b||E)return b===E&&(y=i,(f=r).source===y.source&&f.global===y.global&&f.ignoreCase===y.ignoreCase&&f.multiline===y.multiline&&f.unicode===y.unicode&&f.sticky===y.sticky&&f.lastIndex===y.lastIndex);if(ey(r)||ey(i))return r===i;if(iD){var C=r instanceof Map,N=i instanceof Map;if(C||N)return C===N&&function(G,J,q,z){if(G.size!==J.size)return!1;for(var k=ry(G),S=ry(J),A=0;A<k.length;A++)if(!Qv(S,k[A],q,z)||!Qv(k,S[A],q,z))return!1;return!0}(r,i,e,s)}if(sD){var $=r instanceof Set,V=i instanceof Set;if($||V)return $===V&&function(G,J,q,z){if(G.size!==J.size)return!1;for(var k=iy(G),S=iy(J),A=0;A<k.length;A++)if(!lf(S,k[A],q,z)||!lf(k,S[A],q,z))return!1;return!0}(r,i,e,s)}return sy(r,i,e,s)}return t};pu(ny()),pu(ny(rc));var Gr=pu();pu(function(){return rc});const aD={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},NS={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Dt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},hn={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Hr={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};let K=class Os{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5))return t[0]===1&&t[1]<6?"Cupcake":t[0]===1&&t[1]>=6?"Donut":t[0]===2&&t[1]<2?"Eclair":t[0]===2&&t[1]===2?"Froyo":t[0]===2&&t[1]>2?"Gingerbread":t[0]===3?"Honeycomb":t[0]===4&&t[1]<1?"Ice Cream Sandwich":t[0]===4&&t[1]<4?"Jelly Bean":t[0]===4&&t[1]>=4?"KitKat":t[0]===5?"Lollipop":t[0]===6?"Marshmallow":t[0]===7?"Nougat":t[0]===8?"Oreo":t[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const i=Os.getVersionPrecision(e),s=Os.getVersionPrecision(t);let o=Math.max(i,s),a=0;const c=Os.map([e,t],u=>{const h=o-Os.getVersionPrecision(u),f=u+new Array(h+1).join(".0");return Os.map(f.split("."),y=>new Array(20-y.length).join("0")+y).reverse()});for(r&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(e,t){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)r.push(t(e[i]));return r}static find(e,t){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(t(s,r))return s}}static assign(e,...t){const r=e;let i,s;if(Object.assign)return Object.assign(e,...t);for(i=0,s=t.length;i<s;i+=1){const o=t[i];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{r[a]=o[a]})}return e}static getBrowserAlias(e){return aD[e]}static getBrowserTypeByAlias(e){return NS[e]||""}};const yt=/version\/(\d+(\.?_?\d+)+)/i,cD=[{test:[/googlebot/i],describe(n){const e={name:"Googlebot"},t=K.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/opera/i],describe(n){const e={name:"Opera"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(n){const e={name:"Opera"},t=K.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(n){const e={name:"Samsung Internet for Android"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Whale/i],describe(n){const e={name:"NAVER Whale Browser"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(n){const e={name:"MZ Browser"},t=K.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/focus/i],describe(n){const e={name:"Focus"},t=K.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/swing/i],describe(n){const e={name:"Swing"},t=K.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/coast/i],describe(n){const e={name:"Opera Coast"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(n){const e={name:"Opera Touch"},t=K.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(n){const e={name:"Yandex Browser"},t=K.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(n){const e={name:"UC Browser"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(n){const e={name:"Maxthon"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(n){const e={name:"Epiphany"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/puffin/i],describe(n){const e={name:"Puffin"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(n){const e={name:"Sleipnir"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(n){const e={name:"K-Meleon"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(n){const e={name:"WeChat"},t=K.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(n){const e={name:/qqbrowserlite/i.test(n)?"QQ Browser Lite":"QQ Browser"},t=K.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(n){const e={name:"Internet Explorer"},t=K.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(n){const e={name:"Microsoft Edge"},t=K.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(n){const e={name:"Microsoft Edge"},t=K.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(n){const e={name:"Vivaldi"},t=K.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(n){const e={name:"SeaMonkey"},t=K.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(n){const e={name:"Sailfish"},t=K.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,n);return t&&(e.version=t),e}},{test:[/silk/i],describe(n){const e={name:"Amazon Silk"},t=K.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/phantom/i],describe(n){const e={name:"PhantomJS"},t=K.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(n){const e={name:"SlimerJS"},t=K.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e={name:"BlackBerry"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(n){const e={name:"WebOS Browser"},t=K.getFirstMatch(yt,n)||K.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/bada/i],describe(n){const e={name:"Bada"},t=K.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/tizen/i],describe(n){const e={name:"Tizen"},t=K.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(n){const e={name:"QupZilla"},t=K.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(n){const e={name:"Firefox"},t=K.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/electron/i],describe(n){const e={name:"Electron"},t=K.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(n){const e={name:"Miui"},t=K.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/chromium/i],describe(n){const e={name:"Chromium"},t=K.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,n)||K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(n){const e={name:"Chrome"},t=K.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/GSA/i],describe(n){const e={name:"Google Search"},t=K.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e={name:"Android Browser"},t=K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(n){const e={name:"PlayStation 4"},t=K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(n){const e={name:"Safari"},t=K.getFirstMatch(yt,n);return t&&(e.version=t),e}},{test:[/.*/i],describe(n){const e=n.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:K.getFirstMatch(e,n),version:K.getSecondMatch(e,n)}}}];var lD=[{test:[/Roku\/DVP/],describe(n){const e=K.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,n);return{name:hn.Roku,version:e}}},{test:[/windows phone/i],describe(n){const e=K.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,n);return{name:hn.WindowsPhone,version:e}}},{test:[/windows /i],describe(n){const e=K.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,n),t=K.getWindowsVersionName(e);return{name:hn.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(n){const e={name:hn.iOS},t=K.getSecondMatch(/(Version\/)(\d[\d.]+)/,n);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(n){const e=K.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,n).replace(/[_\s]/g,"."),t=K.getMacOSVersionName(e),r={name:hn.MacOS,version:e};return t&&(r.versionName=t),r}},{test:[/(ipod|iphone|ipad)/i],describe(n){const e=K.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,n).replace(/[_\s]/g,".");return{name:hn.iOS,version:e}}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e=K.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,n),t=K.getAndroidVersionName(e),r={name:hn.Android,version:e};return t&&(r.versionName=t),r}},{test:[/(web|hpw)[o0]s/i],describe(n){const e=K.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,n),t={name:hn.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e=K.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,n)||K.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,n)||K.getFirstMatch(/\bbb(\d+)/i,n);return{name:hn.BlackBerry,version:e}}},{test:[/bada/i],describe(n){const e=K.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,n);return{name:hn.Bada,version:e}}},{test:[/tizen/i],describe(n){const e=K.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,n);return{name:hn.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:hn.Linux})},{test:[/CrOS/],describe:()=>({name:hn.ChromeOS})},{test:[/PlayStation 4/],describe(n){const e=K.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,n);return{name:hn.PlayStation4,version:e}}}],uD=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(n){const e=K.getFirstMatch(/(can-l01)/i,n)&&"Nova",t={type:Dt.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Dt.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Dt.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Dt.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Dt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Dt.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Dt.tablet})},{test(n){const e=n.test(/ipod|iphone/i),t=n.test(/like (ipod|iphone)/i);return e&&!t},describe(n){const e=K.getFirstMatch(/(ipod|iphone)/i,n);return{type:Dt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Dt.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Dt.mobile})},{test:n=>n.getBrowserName(!0)==="blackberry",describe:()=>({type:Dt.mobile,vendor:"BlackBerry"})},{test:n=>n.getBrowserName(!0)==="bada",describe:()=>({type:Dt.mobile})},{test:n=>n.getBrowserName()==="windows phone",describe:()=>({type:Dt.mobile,vendor:"Microsoft"})},{test(n){const e=Number(String(n.getOSVersion()).split(".")[0]);return n.getOSName(!0)==="android"&&e>=3},describe:()=>({type:Dt.tablet})},{test:n=>n.getOSName(!0)==="android",describe:()=>({type:Dt.mobile})},{test:n=>n.getOSName(!0)==="macos",describe:()=>({type:Dt.desktop,vendor:"Apple"})},{test:n=>n.getOSName(!0)==="windows",describe:()=>({type:Dt.desktop})},{test:n=>n.getOSName(!0)==="linux",describe:()=>({type:Dt.desktop})},{test:n=>n.getOSName(!0)==="playstation 4",describe:()=>({type:Dt.tv})},{test:n=>n.getOSName(!0)==="roku",describe:()=>({type:Dt.tv})}],dD=[{test:n=>n.getBrowserName(!0)==="microsoft edge",describe(n){if(/\sedg\//i.test(n))return{name:Hr.Blink};const e=K.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,n);return{name:Hr.EdgeHTML,version:e}}},{test:[/trident/i],describe(n){const e={name:Hr.Trident},t=K.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:n=>n.test(/presto/i),describe(n){const e={name:Hr.Presto},t=K.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=n.test(/gecko/i),t=n.test(/like gecko/i);return e&&!t},describe(n){const e={name:Hr.Gecko},t=K.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Hr.Blink})},{test:[/(apple)?webkit/i],describe(n){const e={name:Hr.WebKit},t=K.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}}];let ay=class{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=K.find(cD,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=K.find(lD,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=K.find(uD,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=K.find(dD,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return K.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(o=>{const a=e[o];typeof a=="string"?(i[o]=a,s+=1):typeof a=="object"&&(t[o]=a,r+=1)}),r>0){const o=Object.keys(t),a=K.find(o,u=>this.isOS(u));if(a){const u=this.satisfies(t[a]);if(u!==void 0)return u}const c=K.find(o,u=>this.isPlatform(u));if(c){const u=this.satisfies(t[c]);if(u!==void 0)return u}}if(s>0){const o=Object.keys(i),a=K.find(o,c=>this.isBrowser(c,!0));if(a!==void 0)return this.compareVersion(i[a])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=K.getBrowserTypeByAlias(i);return t&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let t=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),t.indexOf(K.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}};/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */let hD=class{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new ay(e,t)}static parse(e){return new ay(e).getResult()}static get BROWSER_MAP(){return NS}static get ENGINE_MAP(){return Hr}static get OS_MAP(){return hn}static get PLATFORMS_MAP(){return Dt}};function ld(){return Date.now()+Math.random().toString()}function da(){throw new Error("Method must be implemented in subclass")}function PS(n){return window._dailyConfig&&window._dailyConfig.proxyUrl?window._dailyConfig.proxyUrl+(window._dailyConfig.proxyUrl.slice(-1)==="/"?"":"/")+n.substring(8):n}function Jp(){return window._dailyConfig&&window._dailyConfig.callObjectBundleUrlOverride?window._dailyConfig.callObjectBundleUrlOverride:PS("https://c.daily.co/call-machine/versioned/".concat("0.55.1","/static/call-machine-object-bundle.js"))}function ic(n){try{new URL(n)}catch{return!1}return!0}const jS=Object.prototype.toString;function MS(n){switch(jS.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ls(n,Error)}}function Bo(n,e){return jS.call(n)===`[object ${e}]`}function Zp(n){return Bo(n,"ErrorEvent")}function cy(n){return Bo(n,"DOMError")}function cs(n){return Bo(n,"String")}function OS(n){return n===null||typeof n!="object"&&typeof n!="function"}function ko(n){return Bo(n,"Object")}function mu(n){return typeof Event<"u"&&ls(n,Event)}function Qp(n){return!!(n&&n.then&&typeof n.then=="function")}function ls(n,e){try{return n instanceof e}catch{return!1}}function Ys(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.slice(0,e)}...`}function ly(n,e){if(!Array.isArray(n))return"";const t=[];for(let r=0;r<n.length;r++){const i=n[r];try{t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function fD(n,e,t=!1){return!!cs(n)&&(Bo(e,"RegExp")?e.test(n):!!cs(e)&&(t?n===e:n.includes(e)))}function pl(n,e=[],t=!1){return e.some(r=>fD(n,r,t))}function pD(n,e,t=250,r,i,s,o){if(!(s.exception&&s.exception.values&&o&&ls(o.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;a&&(s.exception.values=(c=uf(n,e,i,o.originalException,r,s.exception.values,a,0),u=t,c.map(h=>(h.value&&(h.value=Ys(h.value,u)),h))))}function uf(n,e,t,r,i,s,o,a){if(s.length>=t+1)return s;let c=[...s];if(ls(r[i],Error)){uy(o,a);const u=n(e,r[i]),h=c.length;dy(u,i,h,a),c=uf(n,e,t,r[i],i,[u,...c],u,h)}return Array.isArray(r.errors)&&r.errors.forEach((u,h)=>{if(ls(u,Error)){uy(o,a);const f=n(e,u),y=c.length;dy(f,`errors[${h}]`,y,a),c=uf(n,e,t,u,i,[f,...c],f,y)}}),c}function uy(n,e){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,is_exception_group:!0,exception_id:e}}function dy(n,e,t,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:e,exception_id:t,parent_id:r}}function ml(n){return n&&n.Math==Math?n:void 0}const jn=typeof globalThis=="object"&&ml(globalThis)||typeof window=="object"&&ml(window)||typeof self=="object"&&ml(self)||typeof global=="object"&&ml(global)||function(){return this}()||{};function jc(){return jn}function Xp(n,e,t){const r=t||jn,i=r.__SENTRY__=r.__SENTRY__||{};return i[n]||(i[n]=e())}const mD=jc(),gD=80;function df(n,e={}){try{let t=n;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let u;const h=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||gD;for(;t&&s++<r&&(u=vD(t,h),!(u==="html"||s>1&&o+i.length*c+u.length>=f));)i.push(u),o+=u.length,t=t.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function vD(n,e){const t=n,r=[];let i,s,o,a,c;if(!t||!t.tagName)return"";r.push(t.tagName.toLowerCase());const u=e&&e.length?e.filter(f=>t.getAttribute(f)).map(f=>[f,t.getAttribute(f)]):null;if(u&&u.length)u.forEach(f=>{r.push(`[${f[0]}="${f[1]}"]`)});else if(t.id&&r.push(`#${t.id}`),i=t.className,i&&cs(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const h=["aria-label","type","name","title","alt"];for(c=0;c<h.length;c++)o=h[c],a=t.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}const gu=["debug","info","warn","error","log","assert","trace"];function DS(n){if(!("console"in jn))return n();const e=jn.console,t={};gu.forEach(r=>{const i=e[r]&&e[r].__sentry_original__;r in e&&i&&(t[r]=e[r],e[r]=i)});try{return n()}finally{Object.keys(t).forEach(r=>{e[r]=t[r]})}}function hy(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?gu.forEach(t=>{e[t]=(...r)=>{n&&DS(()=>{jn.console[t](`Sentry Logger [${t}]:`,...r)})}}):gu.forEach(t=>{e[t]=()=>{}}),e}let $e;$e=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Xp("logger",hy):hy();const yD=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function vu(n,e=!1){const{host:t,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=n;return`${a}://${c}${e&&i?`:${i}`:""}@${t}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function fy(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function _D(n){const e=typeof n=="string"?function(t){const r=yD.exec(t);if(!r)return void console.error(`Invalid Sentry Dsn: ${t}`);const[i,s,o="",a,c="",u]=r.slice(1);let h="",f=u;const y=f.split("/");if(y.length>1&&(h=y.slice(0,-1).join("/"),f=y.pop()),f){const b=f.match(/^\d+/);b&&(f=b[0])}return fy({host:a,pass:o,path:h,projectId:f,port:c,protocol:i,publicKey:s})}(n):fy(n);if(e&&function(t){if(typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__)return!0;const{port:r,projectId:i,protocol:s}=t;return!(["protocol","publicKey","host","projectId"].find(o=>!t[o]&&($e.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(i.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(s)?r&&isNaN(parseInt(r,10))&&($e.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):($e.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):($e.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}class Fn extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Qt(n,e,t){if(!(e in n))return;const r=n[e],i=t(r);if(typeof i=="function")try{LS(i,r)}catch{}n[e]=i}function em(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}function LS(n,e){const t=e.prototype||{};n.prototype=e.prototype=t,em(n,"__sentry_original__",e)}function tm(n){return n.__sentry_original__}function VS(n){if(MS(n))return{message:n.message,name:n.name,stack:n.stack,...my(n)};if(mu(n)){const e={type:n.type,target:py(n.target),currentTarget:py(n.currentTarget),...my(n)};return typeof CustomEvent<"u"&&ls(n,CustomEvent)&&(e.detail=n.detail),e}return n}function py(n){try{return e=n,typeof Element<"u"&&ls(e,Element)?df(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}var e}function my(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}return{}}function ud(n){return hf(n,new Map)}function hf(n,e){if(ko(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))n[i]!==void 0&&(r[i]=hf(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(hf(i,e))}),r}return n}const gy="<anonymous>";function Si(n){try{return n&&typeof n=="function"&&n.name||gy}catch{return gy}}const ah=jc();function ff(n){return n&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function bD(){if(!function(){if(!("fetch"in ah))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(ff(ah.fetch))return!0;let n=!1;const e=ah.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(n=ff(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return n}const gl=jc(),kt=jc(),ba="__sentry_xhr_v2__",Ia={},vy={};function wD(n){if(!vy[n])switch(vy[n]=!0,n){case"console":(function(){"console"in kt&&gu.forEach(function(e){e in kt.console&&Qt(kt.console,e,function(t){return function(...r){Ln("console",{args:r,level:e}),t&&t.apply(kt.console,r)}})})})();break;case"dom":(function(){if(!("document"in kt))return;const e=Ln.bind(null,"dom"),t=_y(e,!0);kt.document.addEventListener("click",t,!1),kt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(r=>{const i=kt[r]&&kt[r].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(Qt(i,"addEventListener",function(s){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this,h=u.__sentry_instrumentation_handlers__=u.__sentry_instrumentation_handlers__||{},f=h[o]=h[o]||{refCount:0};if(!f.handler){const y=_y(e);f.handler=y,s.call(this,o,y,c)}f.refCount++}catch{}return s.call(this,o,a,c)}}),Qt(i,"removeEventListener",function(s){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this,h=u.__sentry_instrumentation_handlers__||{},f=h[o];f&&(f.refCount--,f.refCount<=0&&(s.call(this,o,f.handler,c),f.handler=void 0,delete h[o]),Object.keys(h).length===0&&delete u.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,c)}}))})})();break;case"xhr":(function(){if(!("XMLHttpRequest"in kt))return;const e=XMLHttpRequest.prototype;Qt(e,"open",function(t){return function(...r){const i=r[1],s=this[ba]={method:cs(r[0])?r[0].toUpperCase():r[0],url:r[1],request_headers:{}};cs(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[ba];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}Ln("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?Qt(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),Qt(this,"setRequestHeader",function(a){return function(...c){const[u,h]=c,f=this[ba];return f&&(f.request_headers[u.toLowerCase()]=h),a.apply(this,c)}}),t.apply(this,r)}}),Qt(e,"send",function(t){return function(...r){const i=this[ba];return i&&r[0]!==void 0&&(i.body=r[0]),Ln("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),t.apply(this,r)}})})();break;case"fetch":(function(){bD()&&Qt(kt,"fetch",function(e){return function(...t){const{method:r,url:i}=function(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[c,u]=o;return{url:yy(c),method:pf(u,"method")?String(u.method).toUpperCase():"GET"}}const a=o[0];return{url:yy(a),method:pf(a,"method")?String(a.method).toUpperCase():"GET"}}(t),s={args:t,fetchData:{method:r,url:i},startTimestamp:Date.now()};return Ln("fetch",{...s}),e.apply(kt,t).then(o=>(Ln("fetch",{...s,endTimestamp:Date.now(),response:o}),o),o=>{throw Ln("fetch",{...s,endTimestamp:Date.now(),error:o}),o})}})})();break;case"history":(function(){if(!function(){const r=gl.chrome,i=r&&r.app&&r.app.runtime,s="history"in gl&&!!gl.history.pushState&&!!gl.history.replaceState;return!i&&s}())return;const e=kt.onpopstate;function t(r){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const o=vl,a=String(s);vl=a,Ln("history",{from:o,to:a})}return r.apply(this,i)}}kt.onpopstate=function(...r){const i=kt.location.href,s=vl;if(vl=i,Ln("history",{from:s,to:i}),e)try{return e.apply(this,r)}catch{}},Qt(kt.history,"pushState",t),Qt(kt.history,"replaceState",t)})();break;case"error":_l=kt.onerror,kt.onerror=function(e,t,r,i,s){return Ln("error",{column:i,error:s,line:r,msg:e,url:t}),!(!_l||_l.__SENTRY_LOADER__)&&_l.apply(this,arguments)},kt.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":bl=kt.onunhandledrejection,kt.onunhandledrejection=function(e){return Ln("unhandledrejection",e),!(bl&&!bl.__SENTRY_LOADER__)||bl.apply(this,arguments)},kt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("unknown instrumentation type:",n))}}function Ui(n,e){Ia[n]=Ia[n]||[],Ia[n].push(e),wD(n)}function Ln(n,e){if(n&&Ia[n])for(const t of Ia[n]||[])try{t(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${Si(t)}
Error:`,r)}}function pf(n,e){return!!n&&typeof n=="object"&&!!n[e]}function yy(n){return typeof n=="string"?n:n?pf(n,"url")?n.url:n.toString?n.toString():"":""}let vl;const SD=1e3;let yl,ch;function _y(n,e=!1){return t=>{if(!t||ch===t||function(i){if(i.type!=="keypress")return!1;try{const s=i.target;if(!s||!s.tagName)return!0;if(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)return!1}catch{}return!0}(t))return;const r=t.type==="keypress"?"input":t.type;(yl===void 0||function(i,s){if(!i||i.type!==s.type)return!0;try{if(i.target!==s.target)return!0}catch{}return!1}(ch,t))&&(n({event:t,name:r,global:e}),ch=t),clearTimeout(yl),yl=kt.setTimeout(()=>{yl=void 0},SD)}}let _l=null,bl=null;function fi(){const n=jn,e=n.crypto||n.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const t=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&t())>>r/4).toString(16))}function FS(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function Jr(n){const{message:e,event_id:t}=n;if(e)return e;const r=FS(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||t||"<unknown>":t||"<unknown>"}function mf(n,e,t){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function sc(n,e){const t=FS(n);if(!t)return;const r=t.mechanism;if(t.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};t.mechanism.data=i}}function by(n){if(n&&n.__sentry_captured__)return!0;try{em(n,"__sentry_captured__",!0)}catch{}return!1}function Zr(n,e=100,t=1/0){try{return gf("",n,e,t)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function US(n,e=3,t=102400){const r=Zr(n,e);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>t?US(n,e-1,t):r;var i}function gf(n,e,t=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",o=s?new WeakSet:[];return[function(a){if(s)return!!o.has(a)||(o.add(a),!1);for(let c=0;c<o.length;c++)if(o[c]===a)return!0;return o.push(a),!1},function(a){if(s)o.delete(a);else for(let c=0;c<o.length;c++)if(o[c]===a){o.splice(c,1);break}}]}()){const[s,o]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&(typeof(a=e)!="number"||a==a))return e;var a;const c=function(E,C){try{if(E==="domain"&&C&&typeof C=="object"&&C._events)return"[Domain]";if(E==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&C===global)return"[Global]";if(typeof window<"u"&&C===window)return"[Window]";if(typeof document<"u"&&C===document)return"[Document]";if(function($){return ko($)&&"nativeEvent"in $&&"preventDefault"in $&&"stopPropagation"in $}(C))return"[SyntheticEvent]";if(typeof C=="number"&&C!=C)return"[NaN]";if(typeof C=="function")return`[Function: ${Si(C)}]`;if(typeof C=="symbol")return`[${String(C)}]`;if(typeof C=="bigint")return`[BigInt: ${String(C)}]`;const N=function($){const V=Object.getPrototypeOf($);return V?V.constructor.name:"null prototype"}(C);return/^HTML(\w*)Element$/.test(N)?`[HTMLElement: ${N}]`:`[object ${N}]`}catch(N){return`**non-serializable** (${N})`}}(n,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:t;if(u===0)return c.replace("object ","");if(s(e))return"[Circular ~]";const h=e;if(h&&typeof h.toJSON=="function")try{return gf("",h.toJSON(),u-1,r,i)}catch{}const f=Array.isArray(e)?[]:{};let y=0;const b=VS(e);for(const E in b){if(!Object.prototype.hasOwnProperty.call(b,E))continue;if(y>=r){f[E]="[MaxProperties ~]";break}const C=b[E];f[E]=gf(E,C,u-1,r,i),y++}return o(e),f}var Sr;function us(n){return new Sn(e=>{e(n)})}function yu(n){return new Sn((e,t)=>{t(n)})}(function(n){n[n.PENDING=0]="PENDING",n[n.RESOLVED=1]="RESOLVED",n[n.REJECTED=2]="REJECTED"})(Sr||(Sr={}));class Sn{__init(){this._state=Sr.PENDING}__init2(){this._handlers=[]}constructor(e){Sn.prototype.__init.call(this),Sn.prototype.__init2.call(this),Sn.prototype.__init3.call(this),Sn.prototype.__init4.call(this),Sn.prototype.__init5.call(this),Sn.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new Sn((r,i)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(o){i(o)}else r(s)},s=>{if(t)try{r(t(s))}catch(o){i(o)}else i(s)}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new Sn((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{s?r(i):t(i)})})}__init3(){this._resolve=e=>{this._setResult(Sr.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(Sr.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===Sr.PENDING&&(Qp(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===Sr.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===Sr.RESOLVED&&t[1](this._value),this._state===Sr.REJECTED&&t[2](this._value),t[0]=!0)})}}}function ED(n){const e=[];function t(r){return e.splice(e.indexOf(r),1)[0]}return{$:e,add:function(r){if(!(n===void 0||e.length<n))return yu(new Fn("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>t(i)).then(null,()=>t(i).then(null,()=>{})),i},drain:function(r){return new Sn((i,s)=>{let o=e.length;if(!o)return i(!0);const a=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(c=>{us(c).then(()=>{--o||(clearTimeout(a),i(!0))},s)})})}}}function lh(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:r,relative:e[5]+t+r}}const xD=["fatal","error","warning","log","info","debug"],BS=jc(),vf={nowSeconds:()=>Date.now()/1e3},uh=typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__||Object.prototype.toString.call(typeof process<"u"?process:0)!=="[object process]"?function(){const{performance:n}=BS;if(!(!n||!n.now))return{now:()=>n.now(),timeOrigin:Date.now()-n.now()}}():function(){try{return(n=XT,e="perf_hooks",n.require(e)).performance}catch{return}var n,e}(),wy=uh===void 0?vf:{nowSeconds:()=>(uh.timeOrigin+uh.now())/1e3},dd=vf.nowSeconds.bind(vf),$S=wy.nowSeconds.bind(wy);function oc(n,e=[]){return[n,e]}function TD(n,e){const[t,r]=n;return[t,[...r,e]]}function Sy(n,e){const t=n[1];for(const r of t)if(e(r,r[0].type))return!0;return!1}function yf(n,e){return(e||new TextEncoder).encode(n)}function kD(n,e){const[t,r]=n;let i=JSON.stringify(t);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[yf(i,e),o]:i.push(typeof o=="string"?yf(o,e):o)}for(const o of r){const[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(Zr(c))}s(u)}}return typeof i=="string"?i:function(o){const a=o.reduce((h,f)=>h+f.length,0),c=new Uint8Array(a);let u=0;for(const h of o)c.set(h,u),u+=h.length;return c}(i)}function AD(n,e){const t=typeof n.data=="string"?yf(n.data,e):n.data;return[ud({type:"attachment",length:t.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),t]}(()=>{const{performance:n}=BS;if(!n||!n.now)return;const e=36e5,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,a=typeof o=="number"?Math.abs(o+t-r):e;(s||a<e)&&i<=a&&n.timeOrigin})();const CD={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Ey(n){return CD[n]}function zS(n){if(!n||!n.sdk)return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}const RD=6e4;function ID(n,{statusCode:e,headers:t},r=Date.now()){const i={...n},s=t&&t["x-sentry-rate-limits"],o=t&&t["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,u]=a.split(":",2),h=parseInt(c,10),f=1e3*(isNaN(h)?60:h);if(u)for(const y of u.split(";"))i[y]=r+f;else i.all=r+f}else o?i.all=r+function(a,c=Date.now()){const u=parseInt(`${a}`,10);if(!isNaN(u))return 1e3*u;const h=Date.parse(`${a}`);return isNaN(h)?RD:h-c}(o,r):e===429&&(i.all=r+6e4);return i}const nm="production";function ND(n){const e=$S(),t={sid:fi(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return ud({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(t)};return n&&Ao(t,n),t}function Ao(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),n.did||e.did||(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||$S(),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:fi()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}class Zi{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=xy()}static clone(e){const t=new Zi;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&Ao(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const t=e(this);return t instanceof Zi?t:this}return e instanceof Zi?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):ko(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=xy(),this}addBreadcrumb(e,t){const r=typeof t=="number"?t:100;if(r<=0)return this;const i={timestamp:dd(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction;if(r){e.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const i=r.name;i&&(e.tags={transaction:i,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...qS(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,t,r,i=0){return new Sn((s,o)=>{const a=e[i];if(t===null||typeof a!="function")s(t);else{const c=a({...t},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&$e.log(`Event processor "${a.id}" dropped event`),Qp(c)?c.then(u=>this._notifyEventProcessors(e,u,r,i+1).then(s)).then(null,o):this._notifyEventProcessors(e,c,r,i+1).then(s).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function qS(){return Xp("globalEventProcessors",()=>[])}function WS(n){qS().push(n)}function xy(){return{traceId:fi(),spanId:fi().substring(16),sampled:!1}}const GS=4,PD=100;class rm{constructor(e,t=new Zi,r=GS){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Zi.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:fi(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},o)}),r}captureMessage(e,t,r){const i=this._lastEventId=r&&r.event_id?r.event_id:fi(),s=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:fi();return e.type||(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(e,{...t,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=PD}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const a={timestamp:dd(),...e},c=s?DS(()=>s(a,t)):a;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Ty(this);try{e(this)}finally{Ty(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__||r||console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(r,i){let s={};r.status==="ok"&&(s={status:"exited"}),Ao(r,s)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:i,environment:s=nm}=r&&r.getOptions()||{},{userAgent:o}=jn.navigator||{},a=ND({release:i,environment:s,user:t.getUser(),...o&&{userAgent:o},...e}),c=t.getSession&&t.getSession();return c&&c.status==="ok"&&Ao(c,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return!!(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const r=_u().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[e]=="function")return r.extensions[e].apply(this,t);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function _u(){return jn.__SENTRY__=jn.__SENTRY__||{extensions:{},hub:void 0},jn}function Ty(n){const e=_u(),t=_f(e);return HS(e,n),t}function In(){const n=_u();if(n.__SENTRY__&&n.__SENTRY__.acs){const e=n.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(e=_u()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!_f(e).isOlderThan(GS)||HS(e,new rm);var t;return _f(e)}(n)}function _f(n){return Xp("hub",()=>new rm,n)}function HS(n,e){return n?((n.__SENTRY__=n.__SENTRY__||{}).hub=e,!0):!1}const jD="7";function MD(n,e){return t={sentry_key:n.publicKey,sentry_version:jD,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&");var t}function OD(n,e,t,r){const i=zS(t),s=n.type&&n.type!=="replay_event"?n.type:"event";(function(a,c){c&&(a.sdk=a.sdk||{},a.sdk.name=a.sdk.name||c.name,a.sdk.version=a.sdk.version||c.version,a.sdk.integrations=[...a.sdk.integrations||[],...c.integrations||[]],a.sdk.packages=[...a.sdk.packages||[],...c.packages||[]])})(n,t&&t.sdk);const o=function(a,c,u,h){const f=a.sdkProcessingMetadata&&a.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...c&&{sdk:c},...!!u&&{dsn:vu(h)},...f&&{trace:ud({...f})}}}(n,i,r,e);return delete n.sdkProcessingMetadata,oc(o,[[{type:s},n]])}const ky=[];function Ay(n,e){e[n.name]=n,ky.indexOf(n.name)===-1&&(n.setupOnce(WS,In),ky.push(n.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log(`Integration installed: ${n.name}`))}function DD(n,e,t,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=n,o={...e,event_id:e.event_id||t.event_id||fi(),timestamp:e.timestamp||dd()},a=t.integrations||n.integrations.map(h=>h.name);(function(h,f){const{environment:y,release:b,dist:E,maxValueLength:C=250}=f;"environment"in h||(h.environment="environment"in f?y:nm),h.release===void 0&&b!==void 0&&(h.release=b),h.dist===void 0&&E!==void 0&&(h.dist=E),h.message&&(h.message=Ys(h.message,C));const N=h.exception&&h.exception.values&&h.exception.values[0];N&&N.value&&(N.value=Ys(N.value,C));const $=h.request;$&&$.url&&($.url=Ys($.url,C))})(o,n),function(h,f){f.length>0&&(h.sdk=h.sdk||{},h.sdk.integrations=[...h.sdk.integrations||[],...f])}(o,a),e.type===void 0&&function(h,f){const y=jn._sentryDebugIds;if(!y)return;let b;const E=Cy.get(f);E?b=E:(b=new Map,Cy.set(f,b));const C=Object.keys(y).reduce((N,$)=>{let V;const G=b.get($);G?V=G:(V=f($),b.set($,V));for(let J=V.length-1;J>=0;J--){const q=V[J];if(q.filename){N[q.filename]=y[$];break}}return N},{});try{h.exception.values.forEach(N=>{N.stacktrace.frames.forEach($=>{$.filename&&($.debug_id=C[$.filename])})})}catch{}}(o,n.stackParser);let c=r;t.captureContext&&(c=Zi.clone(c).update(t.captureContext));let u=us(o);if(c){if(c.getAttachments){const h=[...t.attachments||[],...c.getAttachments()];h.length&&(t.attachments=h)}u=c.applyToEvent(o,t)}return u.then(h=>(h&&function(f){const y={};try{f.exception.values.forEach(E=>{E.stacktrace.frames.forEach(C=>{C.debug_id&&(C.abs_path?y[C.abs_path]=C.debug_id:C.filename&&(y[C.filename]=C.debug_id),delete C.debug_id)})})}catch{}if(Object.keys(y).length===0)return;f.debug_meta=f.debug_meta||{},f.debug_meta.images=f.debug_meta.images||[];const b=f.debug_meta.images;Object.keys(y).forEach(E=>{b.push({type:"sourcemap",code_file:E,debug_id:y[E]})})}(h),typeof i=="number"&&i>0?function(f,y,b){if(!f)return null;const E={...f,...f.breadcrumbs&&{breadcrumbs:f.breadcrumbs.map(C=>({...C,...C.data&&{data:Zr(C.data,y,b)}}))},...f.user&&{user:Zr(f.user,y,b)},...f.contexts&&{contexts:Zr(f.contexts,y,b)},...f.extra&&{extra:Zr(f.extra,y,b)}};return f.contexts&&f.contexts.trace&&E.contexts&&(E.contexts.trace=f.contexts.trace,f.contexts.trace.data&&(E.contexts.trace.data=Zr(f.contexts.trace.data,y,b))),f.spans&&(E.spans=f.spans.map(C=>(C.data&&(C.data=Zr(C.data,y,b)),C))),E}(h,i,s):h))}const Cy=new WeakMap,Ry="Not capturing exception because it's already been captured.";class Bi{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(Bi.prototype.__init.call(this),Bi.prototype.__init2.call(this),Bi.prototype.__init3.call(this),Bi.prototype.__init4.call(this),Bi.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=_D(e.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("No DSN provided, client will not do anything."),this._dsn){const t=function(r,i={}){const s=typeof i=="string"?i:i.tunnel,o=typeof i!="string"&&i._metadata?i._metadata.sdk:void 0;return s||`${function(a){return`${function(c){const u=c.protocol?`${c.protocol}:`:"",h=c.port?`:${c.port}`:"";return`${u}//${c.host}${h}${c.path?`/${c.path}`:""}/api/`}(a)}${a.projectId}/envelope/`}(r)}?${MD(r,o)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(by(e))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log(Ry));let i=t&&t.event_id;return this._process(this.eventFromException(e,t).then(s=>this._captureEvent(s,t,r)).then(s=>{i=s})),i}captureMessage(e,t,r,i){let s=r&&r.event_id;const o=OS(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(e,t,r){if(t&&t.originalException&&by(t.originalException))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log(Ry));let i=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then(s=>{i=s})),i}captureSession(e){this._isEnabled()?typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Ao(e,{init:!1})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then(r=>t.flush(e).then(i=>r&&i)):us(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,t))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach(r=>{r&&Ay(r,t)}),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Ay(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let r=OD(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of t.attachments||[])r=TD(r,AD(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}}sendSession(e){if(this._dsn){const t=function(r,i,s,o){const a=zS(s);return oc({sent_at:new Date().toISOString(),...a&&{sdk:a},...!!o&&{dsn:vu(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const i=`${e}:${t}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach(r=>r(...t))}_updateSessionFromEvent(e,t){let r=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const a of s){const c=a.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Ao(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Sn(t=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),t(!0)):(r+=1,e&&r>=e&&(clearInterval(i),t(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,t,r){const i=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),DD(i,e,t,r).then(o=>{if(o===null)return o;const{propagationContext:a}=o.sdkProcessingMetadata||{};if(!(o.contexts&&o.contexts.trace)&&a){const{traceId:c,spanId:u,parentSpanId:h,dsc:f}=a;o.contexts={trace:{trace_id:c,span_id:u,parent_span_id:h},...o.contexts};const y=f||function(b,E,C){const N=E.getOptions(),{publicKey:$}=E.getDsn()||{},{segment:V}=C&&C.getUser()||{},G=ud({environment:N.environment||nm,release:N.release,user_segment:V,public_key:$,trace_id:b});return E.emit&&E.emit("createDsc",G),G}(c,this,r);o.sdkProcessingMetadata={dynamicSamplingContext:y,...o.sdkProcessingMetadata}}return o})}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const s=i;s.logLevel==="log"?$e.log(s.message):$e.warn(s)}})}_processEvent(e,t,r){const i=this.getOptions(),{sampleRate:s}=i;if(!this._isEnabled())return yu(new Fn("SDK not enabled, will not capture event.","log"));const o=Ny(e),a=Iy(e),c=e.type||"error",u=`before send for type \`${c}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),yu(new Fn(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const h=c==="replay_event"?"replay":c;return this._prepareEvent(e,t,r).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",h,e),new Fn("An event processor returned `null`, will not send event.","log");if(t.data&&t.data.__sentry__===!0)return f;const y=function(b,E,C){const{beforeSend:N,beforeSendTransaction:$}=b;return Iy(E)&&N?N(E,C):Ny(E)&&$?$(E,C):E}(i,f,t);return function(b,E){const C=`${E} must return \`null\` or a valid event.`;if(Qp(b))return b.then(N=>{if(!ko(N)&&N!==null)throw new Fn(C);return N},N=>{throw new Fn(`${E} rejected with ${N}`)});if(!ko(b)&&b!==null)throw new Fn(C);return b}(y,u)}).then(f=>{if(f===null)throw this.recordDroppedEvent("before_send",h,e),new Fn(`${u} returned \`null\`, will not send event.`,"log");const y=r&&r.getSession();!o&&y&&this._updateSessionFromEvent(y,f);const b=f.transaction_info;if(o&&b&&f.transaction!==e.transaction){const E="custom";f.transaction_info={...b,source:E}}return this.sendEvent(f,t),f}).then(null,f=>{throw f instanceof Fn?f:(this.captureException(f,{data:{__sentry__:!0},originalException:f}),new Fn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(e){this._numProcessing++,e.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,t=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error("Error while sending event:",t)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{const[r,i]=t.split(":");return{reason:r,category:i,quantity:e[t]}})}}function Iy(n){return n.type===void 0}function Ny(n){return n.type==="transaction"}const LD=30;function VD(n,e,t=ED(n.bufferSize||LD)){let r={};function i(s){const o=[];if(Sy(s,(u,h)=>{const f=Ey(h);if(function(y,b,E=Date.now()){return function(C,N){return C[N]||C.all||0}(y,b)>E}(r,f)){const y=Py(u,h);n.recordDroppedEvent("ratelimit_backoff",f,y)}else o.push(u)}),o.length===0)return us();const a=oc(s[0],o),c=u=>{Sy(a,(h,f)=>{const y=Py(h,f);n.recordDroppedEvent(u,Ey(f),y)})};return t.add(()=>e({body:kD(a,n.textEncoder)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),r=ID(r,u),u),u=>{throw c("network_error"),u})).then(u=>u,u=>{if(u instanceof Fn)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error("Skipped sending event because buffer is full."),c("queue_overflow"),us();throw u})}return i.__sentry__baseTransport__=!0,{send:i,flush:s=>t.drain(s)}}function Py(n,e){if(e==="event"||e==="transaction")return Array.isArray(n)?n[1]:void 0}const jy="7.60.1";let My;class ac{constructor(){ac.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=ac.id}setupOnce(){My=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=tm(this)||this;return My.apply(t,e)}}catch{}}}ac.__initStatic();const FD=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],UD=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class Js{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Js.id}constructor(e={}){this._options=e,Js.prototype.__init.call(this)}setupOnce(e,t){const r=i=>{const s=t();if(s){const o=s.getIntegration(Js);if(o){const a=s.getClient(),c=a?a.getOptions():{},u=function(h={},f={}){return{allowUrls:[...h.allowUrls||[],...f.allowUrls||[]],denyUrls:[...h.denyUrls||[],...f.denyUrls||[]],ignoreErrors:[...h.ignoreErrors||[],...f.ignoreErrors||[],...h.disableErrorDefaults?[]:FD],ignoreTransactions:[...h.ignoreTransactions||[],...f.ignoreTransactions||[],...h.disableTransactionDefaults?[]:UD],ignoreInternal:h.ignoreInternal===void 0||h.ignoreInternal}}(o._options,c);return function(h,f){return f.ignoreInternal&&function(y){try{return y.exception.values[0].type==="SentryError"}catch{}return!1}(h)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Event dropped due to being internal Sentry Error.
Event: ${Jr(h)}`),!0):function(y,b){return y.type||!b||!b.length?!1:function(E){if(E.message)return[E.message];if(E.exception){const{values:C}=E.exception;try{const{type:N="",value:$=""}=C&&C[C.length-1]||{};return[`${$}`,`${N}: ${$}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error(`Cannot extract message for event ${Jr(E)}`),[]}}return[]}(y).some(E=>pl(E,b))}(h,f.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Jr(h)}`),!0):function(y,b){if(y.type!=="transaction"||!b||!b.length)return!1;const E=y.transaction;return!!E&&pl(E,b)}(h,f.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Jr(h)}`),!0):function(y,b){if(!b||!b.length)return!1;const E=wl(y);return!!E&&pl(E,b)}(h,f.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Jr(h)}.
Url: ${wl(h)}`),!0):function(y,b){if(!b||!b.length)return!0;const E=wl(y);return!E||pl(E,b)}(h,f.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Jr(h)}.
Url: ${wl(h)}`),!0)}(i,u)?null:i}}return i};r.id=this.name,e(r)}}function wl(n){try{let e;try{e=n.exception.values[0].stacktrace.frames}catch{}return e?function(t=[]){for(let r=t.length-1;r>=0;r--){const i=t[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.error(`Cannot extract url for event ${Jr(n)}`),null}}Js.__initStatic();var BD=Object.freeze({__proto__:null,FunctionToString:ac,InboundFilters:Js});const bt=jn;let bf=0;function KS(){return bf>0}function Co(n,e={},t){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return i;if(tm(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{t&&typeof t=="function"&&t.apply(this,arguments);const o=i.map(a=>Co(a,e));return n.apply(this,o)}catch(o){throw bf++,setTimeout(()=>{bf--}),s=a=>{var c,u;a.addEventProcessor(h=>(e.mechanism&&(mf(h,void 0),sc(h,e.mechanism)),h.extra={...h.extra,arguments:i},h)),c=o,In().captureException(c,{captureContext:u})},In().withScope(s),o}var s};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}LS(r,n),em(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>n.name})}catch{}return r}function YS(n,e){const t=im(n,e),r={type:e&&e.name,value:zD(e)};return t.length&&(r.stacktrace={frames:t}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function dh(n,e){return{exception:{values:[YS(n,e)]}}}function im(n,e){const t=e.stacktrace||e.stack||"",r=function(i){if(i){if(typeof i.framesToPop=="number")return i.framesToPop;if($D.test(i.message))return 1}return 0}(e);try{return n(t,r)}catch{}return[]}const $D=/Minified React error #\d+;/i;function zD(n){const e=n&&n.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function sm(n,e,t,r,i){let s;if(Zp(e)&&e.error)return dh(n,e.error);if(cy(e)||Bo(e,"DOMException")){const o=e;if("stack"in e)s=dh(n,e);else{const a=o.name||(cy(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=wf(n,c,t,r),mf(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return MS(e)?dh(n,e):ko(e)||mu(e)?(s=function(o,a,c,u){const h=In().getClient(),f=h&&h.getOptions().normalizeDepth,y={exception:{values:[{type:mu(a)?a.constructor.name:u?"UnhandledRejection":"Error",value:qD(a,{isUnhandledRejection:u})}]},extra:{__serialized__:US(a,f)}};if(c){const b=im(o,c);b.length&&(y.exception.values[0].stacktrace={frames:b})}return y}(n,e,t,i),sc(s,{synthetic:!0}),s):(s=wf(n,e,t,r),mf(s,`${e}`),sc(s,{synthetic:!0}),s)}function wf(n,e,t,r){const i={message:e};if(r&&t){const s=im(n,t);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}return i}function qD(n,{isUnhandledRejection:e}){const t=function(i,s=40){const o=Object.keys(VS(i));if(o.sort(),!o.length)return"[object has no keys]";if(o[0].length>=s)return Ys(o[0],s);for(let a=o.length;a>0;a--){const c=o.slice(0,a).join(", ");if(!(c.length>s))return a===o.length?c:Ys(c,s)}return""}(n),r=e?"promise rejection":"exception";return Zp(n)?`Event \`ErrorEvent\` captured as ${r} with message \`${n.message}\``:mu(n)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(n)}\` (type=${n.type}) captured as ${r}`:`Object captured as ${r} with keys: ${t}`}const Oy=1024,JS="Breadcrumbs";class cc{static __initStatic(){this.id=JS}__init(){this.name=cc.id}constructor(e){cc.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Ui("console",WD),this.options.dom&&Ui("dom",function(e){function t(r){let i,s=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>Oy&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Oy),typeof s=="string"&&(s=[s]);try{const a=r.event;i=function(c){return!!c&&!!c.target}(a)?df(a.target,{keyAttrs:s,maxStringLength:o}):df(a,{keyAttrs:s,maxStringLength:o})}catch{i="<unknown>"}i.length!==0&&In().addBreadcrumb({category:`ui.${r.name}`,message:i},{event:r.event,name:r.name,global:r.global})}return t}(this.options.dom)),this.options.xhr&&Ui("xhr",GD),this.options.fetch&&Ui("fetch",HD),this.options.history&&Ui("history",KD)}addSentryBreadcrumb(e){this.options.sentry&&In().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:Jr(e)},{event:e})}}function WD(n){for(let r=0;r<n.args.length;r++)if(n.args[r]==="ref=Ref<"){n.args[r+1]="viewRef";break}const e={category:"console",data:{arguments:n.args,logger:"console"},level:(t=n.level,t==="warn"?"warning":xD.includes(t)?t:"log"),message:ly(n.args," ")};var t;if(n.level==="assert"){if(n.args[0]!==!1)return;e.message=`Assertion failed: ${ly(n.args.slice(1)," ")||"console.assert"}`,e.data.arguments=n.args.slice(1)}In().addBreadcrumb(e,{input:n.args,level:n.level})}function GD(n){const{startTimestamp:e,endTimestamp:t}=n,r=n.xhr[ba];if(!e||!t||!r)return;const{method:i,url:s,status_code:o,body:a}=r,c={method:i,url:s,status_code:o},u={xhr:n.xhr,input:a,startTimestamp:e,endTimestamp:t};In().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function HD(n){const{startTimestamp:e,endTimestamp:t}=n;if(t&&(!n.fetchData.url.match(/sentry_key/)||n.fetchData.method!=="POST"))if(n.error){const r=n.fetchData,i={data:n.error,input:n.args,startTimestamp:e,endTimestamp:t};In().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},i)}else{const r={...n.fetchData,status_code:n.response&&n.response.status},i={input:n.args,response:n.response,startTimestamp:e,endTimestamp:t};In().addBreadcrumb({category:"fetch",data:r,type:"http"},i)}}function KD(n){let e=n.from,t=n.to;const r=lh(bt.location.href);let i=lh(e);const s=lh(t);i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(t=s.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),In().addBreadcrumb({category:"navigation",data:{from:e,to:t}})}cc.__initStatic();class YD extends Bi{constructor(e){const t=bt.SENTRY_SDK_SOURCE||"npm";e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:jy}],version:jy},super(e),e.sendClientReports&&bt.document&&bt.document.addEventListener("visibilitychange",()=>{bt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return function(r,i,s,o){const a=sm(r,i,s&&s.syntheticException||void 0,o);return sc(a),a.level="error",s&&s.event_id&&(a.event_id=s.event_id),us(a)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(i,s,o="info",a,c){const u=wf(i,s,a&&a.syntheticException||void 0,c);return u.level=o,a&&a.event_id&&(u.event_id=a.event_id),us(u)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}sendEvent(e,t){const r=this.getIntegrationById(JS);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,t)}captureUserFeedback(e){if(!this._isEnabled())return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("SDK not enabled, will not capture user feedback."));const t=function(r,{metadata:i,tunnel:s,dsn:o}){const a={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!o&&{dsn:vu(o)}};return oc(a,[function(u){return[{type:"user_report"},u]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log("No outcomes to send"));if(!this._dsn)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log("No dsn provided, will not send outcomes"));(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log("Sending outcomes:",e);const t=(r=e,oc((i=this._options.tunnel&&vu(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||dd(),discarded_events:r}]]));var r,i,s;this._sendEnvelope(t)}}let ha;function JD(n,e=function(){if(ha)return ha;if(ff(bt.fetch))return ha=bt.fetch.bind(bt);const t=bt.document;let r=bt.fetch;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const s=i.contentWindow;s&&s.fetch&&(r=s.fetch),t.head.removeChild(i)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return ha=r.bind(bt)}()){let t=0,r=0;return VD(n,function(i){const s=i.body.length;t+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:t<=6e4&&r<15,...n.fetchOptions};try{return e(n.url,o).then(a=>(t-=s,r--,{statusCode:a.status,headers:{"x-sentry-rate-limits":a.headers.get("X-Sentry-Rate-Limits"),"retry-after":a.headers.get("Retry-After")}}))}catch(a){return ha=void 0,t-=s,r--,yu(a)}})}class pi{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=pi.id}__init2(){this._installFunc={onerror:ZD,onunhandledrejection:QD}}constructor(e){pi.prototype.__init.call(this),pi.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const i=this._installFunc[r];i&&e[r]&&(t=r,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.log(`Global Handler attached: ${t}`),i(),this._installFunc[r]=void 0)}var t}}function ZD(){Ui("error",n=>{const[e,t,r]=QS();if(!e.getIntegration(pi))return;const{msg:i,url:s,line:o,column:a,error:c}=n;if(KS()||c&&c.__sentry_own_request__)return;const u=c===void 0&&cs(i)?function(h,f,y,b){const E=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let C=Zp(h)?h.message:h,N="Error";const $=C.match(E);return $&&(N=$[1],C=$[2]),Dy({exception:{values:[{type:N,value:C}]}},f,y,b)}(i,s,o,a):Dy(sm(t,c||i,void 0,r,!1),s,o,a);u.level="error",ZS(e,c,u,"onerror")})}function QD(){Ui("unhandledrejection",n=>{const[e,t,r]=QS();if(!e.getIntegration(pi))return;let i=n;try{"reason"in n?i=n.reason:"detail"in n&&"reason"in n.detail&&(i=n.detail.reason)}catch{}if(KS()||i&&i.__sentry_own_request__)return!0;const s=OS(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:sm(t,i,void 0,r,!0);s.level="error",ZS(e,i,s,"onunhandledrejection")})}function Dy(n,e,t,r){const i=n.exception=n.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(t,10))?void 0:t,f=cs(e)&&e.length>0?e:function(){try{return mD.document.location.href}catch{return""}}();return c.length===0&&c.push({colno:u,filename:f,function:"?",in_app:!0,lineno:h}),n}function ZS(n,e,t,r){sc(t,{handled:!1,type:r}),n.captureEvent(t,{originalException:e})}function QS(){const n=In(),e=n.getClient(),t=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[n,t.stackParser,t.attachStacktrace]}pi.__initStatic();const XD=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class lc{static __initStatic(){this.id="TryCatch"}__init(){this.name=lc.id}constructor(e){lc.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&Qt(bt,"setTimeout",Ly),this._options.setInterval&&Qt(bt,"setInterval",Ly),this._options.requestAnimationFrame&&Qt(bt,"requestAnimationFrame",eL),this._options.XMLHttpRequest&&"XMLHttpRequest"in bt&&Qt(XMLHttpRequest.prototype,"send",tL);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:XD).forEach(nL)}}function Ly(n){return function(...e){const t=e[0];return e[0]=Co(t,{mechanism:{data:{function:Si(n)},handled:!0,type:"instrument"}}),n.apply(this,e)}}function eL(n){return function(e){return n.apply(this,[Co(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Si(n)},handled:!0,type:"instrument"}})])}}function tL(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in t&&typeof t[r]=="function"&&Qt(t,r,function(i){const s={mechanism:{data:{function:r,handler:Si(i)},handled:!0,type:"instrument"}},o=tm(i);return o&&(s.mechanism.data.handler=Si(o)),Co(i,s)})}),n.apply(this,e)}}function nL(n){const e=bt,t=e[n]&&e[n].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(Qt(t,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Co(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Si(s),target:n},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,Co(s,{mechanism:{data:{function:"addEventListener",handler:Si(s),target:n},handled:!0,type:"instrument"}}),o])}}),Qt(t,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,o)}catch{}return r.call(this,i,a,o)}}))}lc.__initStatic();class Zs{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Zs.id}constructor(e={}){Zs.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,t){e((r,i)=>{const s=t(),o=s.getClient(),a=s.getIntegration(Zs);if(!o||!a)return r;const c=o.getOptions();return pD(YS,c.stackParser,c.maxValueLength,a._key,a._limit,r,i),r})}}Zs.__initStatic();class Qs{constructor(){Qs.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Qs.id}setupOnce(){WS(e=>{if(In().getIntegration(Qs)){if(!bt.navigator&&!bt.location&&!bt.document)return e;const t=e.request&&e.request.url||bt.location&&bt.location.href,{referrer:r}=bt.document||{},{userAgent:i}=bt.navigator||{},s={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},o={...e.request,...t&&{url:t},headers:s};return{...e,request:o}}return e})}}Qs.__initStatic();class Xs{constructor(){Xs.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Xs.id}setupOnce(e,t){const r=i=>{if(i.type)return i;const s=t().getIntegration(Xs);if(s){try{if(function(o,a){return a?!!(function(c,u){const h=c.message,f=u.message;return!(!h&&!f||h&&!f||!h&&f||h!==f||!Fy(c,u)||!Vy(c,u))}(o,a)||function(c,u){const h=Uy(u),f=Uy(c);return!(!h||!f||h.type!==f.type||h.value!==f.value||!Fy(c,u)||!Vy(c,u))}(o,a)):!1}(i,s._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&$e.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return s._previousEvent=i}return s._previousEvent=i}return i};r.id=this.name,e(r)}}function Vy(n,e){let t=By(n),r=By(e);if(!t&&!r)return!0;if(t&&!r||!t&&r||r.length!==t.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],o=t[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function Fy(n,e){let t=n.fingerprint,r=e.fingerprint;if(!t&&!r)return!0;if(t&&!r||!t&&r)return!1;try{return t.join("")===r.join("")}catch{return!1}}function Uy(n){return n.exception&&n.exception.values&&n.exception.values[0]}function By(n){const e=n.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}Xs.__initStatic();var rL=Object.freeze({__proto__:null,Breadcrumbs:cc,Dedupe:Xs,GlobalHandlers:pi,HttpContext:Qs,LinkedErrors:Zs,TryCatch:lc});let XS={};bt.Sentry&&bt.Sentry.Integrations&&(XS=bt.Sentry.Integrations);const iL={...XS,...BD,...rL};var $y="new",zy="loading",qy="loaded",fa="joining-meeting",Pn="joined-meeting",$r="left-meeting",zr="error",hh="unknown",sL="full",oL="base",aL="*",cL="iframe-ready-for-launch-config",lL="iframe-launch-config",Wy="theme-updated",Gy="loading",Hy="load-attempt-failed",fh="loaded",uL="started-camera",dL="camera-error",Ky="joining-meeting",hL="joined-meeting",fL="left-meeting",Yy="available-devices-updated",pL="participant-joined",mL="participant-updated",gL="participant-left",vL="participant-counts-updated",yL="access-state-updated",_L="meeting-session-summary-updated",bL="meeting-session-state-updated",wL="waiting-participant-added",SL="waiting-participant-updated",EL="waiting-participant-removed",Jy="track-started",Zy="track-stopped",xL="transcription-started",TL="transcription-stopped",kL="transcription-error",ph="recording-started",mh="recording-stopped",AL="recording-stats",CL="recording-error",RL="recording-upload-completed",IL="recording-data",NL="app-message",PL="remote-media-player-started",jL="remote-media-player-updated",ML="remote-media-player-stopped",OL="local-screen-share-started",DL="local-screen-share-stopped",LL="active-speaker-change",VL="active-speaker-mode-change",FL="network-quality-change",UL="network-connection",BL="cpu-load-change",Ns="fullscreen",Ps="exited-fullscreen",$L="live-streaming-started",zL="live-streaming-updated",qL="live-streaming-stopped",WL="live-streaming-error",GL="lang-updated",HL="receive-settings-updated",KL="input-settings-updated",gh="nonfatal-error",vh="error",Qy=102400,yh="iframe-call-message",Xy="local-screen-start",Sl="register-input-handler",e_="daily-method-update-live-streaming-endpoints",_h="transmit-log",wa="daily-custom-track",Dl={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image"},eE={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Sf={PLAY:"play",PAUSE:"pause"},t_=10,bh=["jpg","png","jpeg"],YL="add-endpoints",JL="remove-endpoints";function dr(){return!xt()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function xt(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function tE(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function ZL(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(n,e){if(!n||!e)return!0;switch(n){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(uc(),function(){switch(uc()){case"Chrome":return sE();case"Safari":return aE();case"Firefox":return cE();case"Edge":return function(){var n=0,e=0;if(typeof window<"u"){var t=dr().match(/Edge\/(\d+).(\d+)/);if(t)try{n=parseInt(t[1]),e=parseInt(t[2])}catch{}}return{major:n,minor:e}}()}}())||xt())}function n_(){if(xt()||!document)return!1;var n=document.createElement("iframe");return!!n.requestFullscreen||!!n.webkitRequestFullscreen}var QL=["Chrome","Firefox"];function nE(){return!xt()&&!iE()&&QL.includes(uc())}var XL=["Chrome","Firefox"];function rE(){return!xt()&&!iE()&&typeof AudioWorkletNode<"u"&&XL.includes(uc())}function r_(){return tE()&&!function(){var n,e=uc();if(!dr())return!0;switch(e){case"Chrome":return(n=sE()).major&&n.major>0&&n.major<61;case"Firefox":return(n=cE()).major<78;case"Safari":return(n=aE()).major<12;default:return!0}}()}function iE(){var n,e,t=dr(),r=t.match(/Mac/)&&(!xt()&&typeof window<"u"&&(n=window)!==null&&n!==void 0&&(e=n.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(t.match(/Mobi/)||t.match(/Android/)||r)||!!dr().match(/DailyAnd\//)||void 0}function uc(){if(typeof window<"u"){var n=dr();return oE()?"Safari":n.indexOf("Edge")>-1?"Edge":n.match(/Chrome\//)?"Chrome":n.indexOf("Safari")>-1?"Safari":n.indexOf("Firefox")>-1?"Firefox":n.indexOf("MSIE")>-1||n.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function sE(){var n=0,e=0,t=0,r=0,i=!1;if(typeof window<"u"){var s=dr(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{n=parseInt(o[1]),e=parseInt(o[2]),t=parseInt(o[3]),r=parseInt(o[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:n,minor:e,build:t,patch:r,opera:i}}function oE(){return!!dr().match(/iPad|iPhone|iPod/i)&&tE()}function aE(){var n=0,e=0,t=0;if(typeof window<"u"){var r=dr().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{n=parseInt(r[1]),e=parseInt(r[2]),t=parseInt(r[4])}catch{}else oE()&&(n=14,e=0,t=3)}return{major:n,minor:e,point:t}}function cE(){var n=0,e=0;if(typeof window<"u"){var t=dr().match(/Firefox\/(\d+).(\d+)/);if(t)try{n=parseInt(t[1]),e=parseInt(t[2])}catch{}}return{major:n,minor:e}}var lE=function(){function n(){Wn(this,n)}return Gn(n,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){da()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){da()}},{key:"sendMessageToCallMachine",value:function(e,t,r,i){da()}},{key:"sendMessageToDailyJs",value:function(e,t){da()}},{key:"removeListener",value:function(e){da()}}]),n}();function i_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?i_(Object(t),!0).forEach(function(r){Yr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function e2(n){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,r=qn(n);if(e){var i=qn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return cd(this,t)}}var t2=function(n){ad(t,lE);var e=e2(t);function t(){var r;return Wn(this,t),(r=e.call(this))._wrappedListeners={},r._messageCallbacks={},r}return Gn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(r,i,s){var o=this,a=function(c){if(c.data&&c.data.what==="iframe-call-message"&&(!c.data.callFrameId||c.data.callFrameId===i)&&(!c.data.from||c.data.from!=="module")){var u=wh({},c.data);if(delete u.from,u.callbackStamp&&o._messageCallbacks[u.callbackStamp]){var h=u.callbackStamp;o._messageCallbacks[h].call(s,u),delete o._messageCallbacks[h]}delete u.what,delete u.callbackStamp,r.call(s,u)}};this._wrappedListeners[r]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(r,i,s){var o=function(a){if(!(!a.data||a.data.what!==yh||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callFrameId&&i&&a.data.callFrameId!==i)){var c=a.data;r.call(s,c)}};this._wrappedListeners[r]=o,window.addEventListener("message",o)}},{key:"sendMessageToCallMachine",value:function(r,i,s,o){if(!o)throw new Error("undefined callFrameId. Are you trying to use a DailyCall instance previously destroyed?");var a=wh({},r);if(a.what=yh,a.from="module",a.callFrameId=o,i){var c=ld();this._messageCallbacks[c]=i,a.callbackStamp=c}(s?s.contentWindow:window).postMessage(a,"*")}},{key:"sendMessageToDailyJs",value:function(r,i){r.what=yh,r.callFrameId=i,r.from="embedded",window.postMessage(r,"*")}},{key:"removeListener",value:function(r){var i=this._wrappedListeners[r];i&&(window.removeEventListener("message",i),delete this._wrappedListeners[r])}},{key:"forwardPackagedMessageToCallMachine",value:function(r,i,s){var o=wh({},r);o.callFrameId=s,(i?i.contentWindow:window).postMessage(o,"*")}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(r,i){var s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callFrameId||o.data.callFrameId===i)&&(!o.data.from||o.data.from!=="module")){var a=o.data;r(a)}};return this._wrappedListeners[r]=s,window.addEventListener("message",s),r}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(r){var i=this._wrappedListeners[r];i&&(window.removeEventListener("message",i),delete this._wrappedListeners[r])}}]),t}();function n2(n){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,r=qn(n);if(e){var i=qn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return cd(this,t)}}var r2=function(n){ad(t,lE);var e=n2(t);function t(){var r;return Wn(this,t),r=e.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Er.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Er.EventEmitter,r._wrappedListeners={},r._messageCallbacks={},r}return Gn(t,[{key:"addListenerForMessagesFromCallMachine",value:function(r,i,s){this._addListener(r,global.callMachineToDailyJsEmitter,s,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(r,i,s){this._addListener(r,global.dailyJsToCallMachineEmitter,s,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(r,i){this._sendMessage(r,global.dailyJsToCallMachineEmitter,"sending message to call machine",i)}},{key:"sendMessageToDailyJs",value:function(r){this._sendMessage(r,global.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(r){var i=this._wrappedListeners[r];i&&(global.callMachineToDailyJsEmitter.removeListener("message",i),global.dailyJsToCallMachineEmitter.removeListener("message",i),delete this._wrappedListeners[r])}},{key:"_addListener",value:function(r,i,s,o){var a=this,c=function(u){if(u.callbackStamp&&a._messageCallbacks[u.callbackStamp]){var h=u.callbackStamp;a._messageCallbacks[h].call(s,u),delete a._messageCallbacks[h]}r.call(s,u)};this._wrappedListeners[r]=c,i.addListener("message",c)}},{key:"_sendMessage",value:function(r,i,s,o){if(o){var a=ld();this._messageCallbacks[a]=o,r.callbackStamp=a}i.emit("message",r)}}]),t}(),s_=Object.prototype.hasOwnProperty;function o_(n,e,t){for(t of n.keys())if(eo(t,e))return t}function eo(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&eo(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if((i=r)&&typeof i=="object"&&!(i=o_(e,i))||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if((i=r[0])&&typeof i=="object"&&!(i=o_(e,i))||!eo(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){for(t in r=0,n)if(s_.call(n,t)&&++r&&!s_.call(e,t)||!(t in e)||!eo(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!=n&&e!=e}var Ef="replace",xf="shallow-merge",a_=[Ef,xf],i2=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.data,r=e.mergeStrategy,i=r===void 0?Ef:r;Wn(this,n),n._validateMergeStrategy(i),n._validateData(t,i),this.mergeStrategy=i,this.data=t}return Gn(n,[{key:"isNoOp",value:function(){return n.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,t){return Object.keys(e).length===0&&t===xf}},{key:"_validateMergeStrategy",value:function(e){if(!a_.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(a_,"]"))}},{key:"_validateData",value:function(e,t){if(!function(a){if(a==null||wt(a)!=="object")return!1;var c=Object.getPrototypeOf(a);return c==null||c===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),t===Ef){var i=JSON.parse(r);eo(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(t===xf){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var o=JSON.parse(JSON.stringify(e[s]));eo(e[s],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,e[s])}}}catch(a){throw Error("Meeting session data must be serializable to JSON: ".concat(a))}if(r.length>Qy)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(Qy,"."))}}]),n}();function Tf(n,e,t){return Tf=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&nc(a,s.prototype),a},Tf.apply(null,arguments)}function kf(n){var e=typeof Map=="function"?new Map:void 0;return kf=function(t){if(t===null||(r=t,Function.toString.call(r).indexOf("[native code]")===-1))return t;var r;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return Tf(t,arguments,qn(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),nc(i,t)},kf(n)}function s2(n){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,r=qn(n);if(e){var i=qn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return cd(this,t)}}var o2=function(){function n(){Wn(this,n),this._currentLoad=null}return Gn(n,[{key:"load",value:function(e,t,r,i){if(this.loaded)return window._dailyCallObjectSetup(e),void r(!0);(function(s,o){window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.callFrameId=s,window._dailyConfig.avoidEval=o})(e,t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new a2(function(){r(!1)},i),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel()}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),n}(),a2=function(){function n(e,t){Wn(this,n),this._attemptsRemaining=3,this._currentAttempt=null,this._successCallback=e,this._failureCallback=t}return Gn(n,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new c_(this._successCallback,function t(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new c_(e._successCallback,t),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),n}(),Sh=function(n){ad(t,kf(Error));var e=s2(t);function t(){return Wn(this,t),e.apply(this,arguments)}return Gn(t)}(),bu=2e4,c_=function(){function n(t,r){Wn(this,n),this._loadAttemptImpl=xt()||!_dailyConfig.avoidEval?new c2(t,r):new l2(t,r)}var e;return Gn(n,[{key:"start",value:(e=Ee(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),n}(),c2=function(){function n(s,o){Wn(this,n),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._successCallback=s,this._failureCallback=o}var e,t,r,i;return Gn(n,[{key:"start",value:(i=Ee(function*(){var s=Jp();!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=Ee(function*(s){if(!this._iosCache)return!1;try{var o=yield this._iosCache.get(s);return!!this.cancelled||!!o&&(o.code?(Function('"use strict";'+o.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=o.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(t=Ee(function*(s){var o=this;this._networkTimeout=setTimeout(function(){o._networkTimedOut=!0,o._failureCallback("Timed out (>".concat(bu," ms) when loading call object bundle ").concat(s))},bu);try{var a=this._refetchHeaders?{headers:this._refetchHeaders}:{},c=yield fetch(s,a);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Sh;var u=yield this._getBundleCodeFromResponse(s,c);if(this.cancelled)throw new Sh;Function('"use strict";'+u)(),this._iosCache&&this._iosCache.set(s,u,c.headers),this.succeeded=!0,this._successCallback()}catch(h){if(clearTimeout(this._networkTimeout),h instanceof Sh||this.cancelled||this._networkTimedOut)return;this._failureCallback("Failed to load call object bundle ".concat(s,": ").concat(h))}}),function(s){return t.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=Ee(function*(s,o){if(o.ok)return yield o.text();if(this._iosCache&&o.status===304)return(yield this._iosCache.renew(s,o.headers)).code;throw new Error("Received ".concat(o.status," response"))}),function(s,o){return e.apply(this,arguments)})}]),n}(),l2=function(){function n(t,r){Wn(this,n),this.cancelled=!1,this.succeeded=!1,this._successCallback=t,this._failureCallback=r,this._attemptId=ld(),this._networkTimeout=null,this._scriptElement=null}var e;return Gn(n,[{key:"start",value:(e=Ee(function*(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=Jp();(typeof document>"u"?"undefined":wt(document))==="object"?this._startLoading(t):this._failureCallback("Call object bundle must be loaded in a DOM/web context")}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var r=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){r._stopLoading(),r._failureCallback("Timed out (>".concat(bu," ms) when loading call object bundle ").concat(t))},bu);var i=document.getElementsByTagName("head")[0],s=document.createElement("script");this._scriptElement=s,s.onload=Ee(function*(){r._stopLoading(),r.succeeded=!0,r._successCallback()}),s.onerror=function(){var o=Ee(function*(a){r._stopLoading(),r._failureCallback("Failed to load call object bundle ".concat(a.target.src))});return function(a){return o.apply(this,arguments)}}(),s.src=t,i.appendChild(s)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),n}(),uE=function(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s},u2=function(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[++i];if(t(s[c],c,s)===!1)break}return e}},d2=u2(),h2=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r},dE=typeof fl=="object"&&fl&&fl.Object===Object&&fl,f2=dE,p2=typeof self=="object"&&self&&self.Object===Object&&self,Mr=f2||p2||Function("return this")(),ds=Mr.Symbol,l_=ds,hE=Object.prototype,m2=hE.hasOwnProperty,g2=hE.toString,pa=l_?l_.toStringTag:void 0,v2=function(n){var e=m2.call(n,pa),t=n[pa];try{n[pa]=void 0;var r=!0}catch{}var i=g2.call(n);return r&&(e?n[pa]=t:delete n[pa]),i},y2=Object.prototype.toString,_2=v2,b2=function(n){return y2.call(n)},u_=ds?ds.toStringTag:void 0,Mc=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":u_&&u_ in Object(n)?_2(n):b2(n)},Oc=function(n){return n!=null&&typeof n=="object"},w2=Mc,S2=Oc,d_=function(n){return S2(n)&&w2(n)=="[object Arguments]"},E2=Oc,fE=Object.prototype,x2=fE.hasOwnProperty,T2=fE.propertyIsEnumerable,pE=d_(function(){return arguments}())?d_:function(n){return E2(n)&&x2.call(n,"callee")&&!T2.call(n,"callee")},Hn=Array.isArray,Na={},k2=function(){return!1};(function(n,e){var t=Mr,r=k2,i=e&&!e.nodeType&&e,s=i&&n&&!n.nodeType&&n,o=s&&s.exports===i?t.Buffer:void 0,a=(o?o.isBuffer:void 0)||r;n.exports=a})({get exports(){return Na},set exports(n){Na=n}},Na);var A2=/^(?:0|[1-9]\d*)$/,mE=function(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&(t=="number"||t!="symbol"&&A2.test(n))&&n>-1&&n%1==0&&n<e},om=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},C2=Mc,R2=om,I2=Oc,Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var N2=function(n){return I2(n)&&R2(n.length)&&!!Et[C2(n)]},gE=function(n){return function(e){return n(e)}},Pa={};(function(n,e){var t=dE,r=e&&!e.nodeType&&e,i=r&&n&&!n.nodeType&&n,s=i&&i.exports===r&&t.process,o=function(){try{var a=i&&i.require&&i.require("util").types;return a||s&&s.binding&&s.binding("util")}catch{}}();n.exports=o})({get exports(){return Pa},set exports(n){Pa=n}},Pa);var P2=N2,j2=gE,h_=Pa&&Pa.isTypedArray,vE=h_?j2(h_):P2,M2=h2,O2=pE,D2=Hn,L2=Na,V2=mE,F2=vE,U2=Object.prototype.hasOwnProperty,B2=function(n,e){var t=D2(n),r=!t&&O2(n),i=!t&&!r&&L2(n),s=!t&&!r&&!i&&F2(n),o=t||r||i||s,a=o?M2(n.length,String):[],c=a.length;for(var u in n)!e&&!U2.call(n,u)||o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||V2(u,c))||a.push(u);return a},$2=Object.prototype,z2=function(n){var e=n&&n.constructor;return n===(typeof e=="function"&&e.prototype||$2)},q2=function(n,e){return function(t){return n(e(t))}}(Object.keys,Object),W2=z2,G2=q2,H2=Object.prototype.hasOwnProperty,am=function(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")},K2=Mc,Y2=am,yE=function(n){if(!Y2(n))return!1;var e=K2(n);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},J2=yE,Z2=om,cm=function(n){return n!=null&&Z2(n.length)&&!J2(n)},Q2=B2,X2=function(n){if(!W2(n))return G2(n);var e=[];for(var t in Object(n))H2.call(n,t)&&t!="constructor"&&e.push(t);return e},eV=cm,lm=function(n){return eV(n)?Q2(n):X2(n)},tV=d2,nV=lm,rV=cm,iV=function(n,e){return function(t,r){if(t==null)return t;if(!rV(t))return n(t,r);for(var i=t.length,s=-1,o=Object(t);++s<i&&r(o[s],s,o)!==!1;);return t}},_E=iV(function(n,e){return n&&tV(n,e,nV)}),sV=_E,oV=function(n,e){var t=[];return sV(n,function(r,i,s){e(r,i,s)&&t.push(r)}),t},aV=function(){this.__data__=[],this.size=0},bE=function(n,e){return n===e||n!=n&&e!=e},cV=bE,hd=function(n,e){for(var t=n.length;t--;)if(cV(n[t][0],e))return t;return-1},lV=hd,uV=Array.prototype.splice,dV=function(n){var e=this.__data__,t=lV(e,n);return!(t<0)&&(t==e.length-1?e.pop():uV.call(e,t,1),--this.size,!0)},hV=hd,fV=function(n){var e=this.__data__,t=hV(e,n);return t<0?void 0:e[t][1]},pV=hd,mV=hd,gV=function(n,e){var t=this.__data__,r=mV(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this},vV=aV,yV=dV,_V=fV,bV=function(n){return pV(this.__data__,n)>-1},wV=gV;function Ds(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ds.prototype.clear=vV,Ds.prototype.delete=yV,Ds.prototype.get=_V,Ds.prototype.has=bV,Ds.prototype.set=wV;var fd=Ds,SV=fd,EV=function(){this.__data__=new SV,this.size=0},xV=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},TV=function(n){return this.__data__.get(n)},f_,kV=function(n){return this.__data__.has(n)},Eh=Mr["__core-js_shared__"],p_=(f_=/[^.]+$/.exec(Eh&&Eh.keys&&Eh.keys.IE_PROTO||""))?"Symbol(src)_1."+f_:"",AV=function(n){return!!p_&&p_ in n},CV=Function.prototype.toString,wE=function(n){if(n!=null){try{return CV.call(n)}catch{}try{return n+""}catch{}}return""},RV=yE,IV=AV,NV=am,PV=wE,jV=/^\[object .+?Constructor\]$/,MV=Function.prototype,OV=Object.prototype,DV=MV.toString,LV=OV.hasOwnProperty,VV=RegExp("^"+DV.call(LV).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),FV=function(n){return!(!NV(n)||IV(n))&&(RV(n)?VV:jV).test(PV(n))},UV=function(n,e){return n==null?void 0:n[e]},$o=function(n,e){var t=UV(n,e);return FV(t)?t:void 0},um=$o(Mr,"Map"),pd=$o(Object,"create"),m_=pd,BV=function(){this.__data__=m_?m_(null):{},this.size=0},$V=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},zV=pd,qV=Object.prototype.hasOwnProperty,WV=function(n){var e=this.__data__;if(zV){var t=e[n];return t==="__lodash_hash_undefined__"?void 0:t}return qV.call(e,n)?e[n]:void 0},GV=pd,HV=Object.prototype.hasOwnProperty,KV=pd,YV=BV,JV=$V,ZV=WV,QV=function(n){var e=this.__data__;return GV?e[n]!==void 0:HV.call(e,n)},XV=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=KV&&e===void 0?"__lodash_hash_undefined__":e,this};function Ls(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ls.prototype.clear=YV,Ls.prototype.delete=JV,Ls.prototype.get=ZV,Ls.prototype.has=QV,Ls.prototype.set=XV;var g_=Ls,eF=fd,tF=um,nF=function(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null},md=function(n,e){var t=n.__data__;return nF(e)?t[typeof e=="string"?"string":"hash"]:t.map},rF=md,iF=md,sF=md,oF=md,aF=function(){this.size=0,this.__data__={hash:new g_,map:new(tF||eF),string:new g_}},cF=function(n){var e=rF(this,n).delete(n);return this.size-=e?1:0,e},lF=function(n){return iF(this,n).get(n)},uF=function(n){return sF(this,n).has(n)},dF=function(n,e){var t=oF(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};function Vs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Vs.prototype.clear=aF,Vs.prototype.delete=cF,Vs.prototype.get=lF,Vs.prototype.has=uF,Vs.prototype.set=dF;var dm=Vs,hF=fd,fF=um,pF=dm,mF=fd,gF=EV,vF=xV,yF=TV,_F=kV,bF=function(n,e){var t=this.__data__;if(t instanceof hF){var r=t.__data__;if(!fF||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new pF(r)}return t.set(n,e),this.size=t.size,this};function Fs(n){var e=this.__data__=new mF(n);this.size=e.size}Fs.prototype.clear=gF,Fs.prototype.delete=vF,Fs.prototype.get=yF,Fs.prototype.has=_F,Fs.prototype.set=bF;var SE=Fs,wF=dm,SF=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},EF=function(n){return this.__data__.has(n)};function Ll(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new wF;++e<t;)this.add(n[e])}Ll.prototype.add=Ll.prototype.push=SF,Ll.prototype.has=EF;var xF=function(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1},TF=Ll,kF=xF,AF=function(n,e){return n.has(e)},EE=function(n,e,t,r,i,s){var o=1&t,a=n.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var u=s.get(n),h=s.get(e);if(u&&h)return u==e&&h==n;var f=-1,y=!0,b=2&t?new TF:void 0;for(s.set(n,e),s.set(e,n);++f<a;){var E=n[f],C=e[f];if(r)var N=o?r(C,E,f,e,n,s):r(E,C,f,n,e,s);if(N!==void 0){if(N)continue;y=!1;break}if(b){if(!kF(e,function($,V){if(!AF(b,V)&&(E===$||i(E,$,t,r,s)))return b.push(V)})){y=!1;break}}else if(E!==C&&!i(E,C,t,r,s)){y=!1;break}}return s.delete(n),s.delete(e),y},CF=function(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t},RF=function(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t},v_=Mr.Uint8Array,IF=bE,NF=EE,PF=CF,jF=RF,y_=ds?ds.prototype:void 0,xh=y_?y_.valueOf:void 0,MF=function(n,e,t,r,i,s,o){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!s(new v_(n),new v_(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return IF(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var a=PF;case"[object Set]":var c=1&r;if(a||(a=jF),n.size!=e.size&&!c)return!1;var u=o.get(n);if(u)return u==e;r|=2,o.set(n,e);var h=NF(a(n),a(e),r,i,s,o);return o.delete(n),h;case"[object Symbol]":if(xh)return xh.call(n)==xh.call(e)}return!1},OF=function(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},DF=OF,LF=Hn,VF=function(n,e,t){var r=e(n);return LF(n)?r:DF(r,t(n))},FF=uE,UF=function(){return[]},BF=Object.prototype.propertyIsEnumerable,__=Object.getOwnPropertySymbols,$F=VF,zF=__?function(n){return n==null?[]:(n=Object(n),FF(__(n),function(e){return BF.call(n,e)}))}:UF,qF=lm,b_=function(n){return $F(n,qF,zF)},WF=Object.prototype.hasOwnProperty,GF=function(n,e,t,r,i,s){var o=1&t,a=b_(n),c=a.length;if(c!=b_(e).length&&!o)return!1;for(var u=c;u--;){var h=a[u];if(!(o?h in e:WF.call(e,h)))return!1}var f=s.get(n),y=s.get(e);if(f&&y)return f==e&&y==n;var b=!0;s.set(n,e),s.set(e,n);for(var E=o;++u<c;){var C=n[h=a[u]],N=e[h];if(r)var $=o?r(N,C,h,e,n,s):r(C,N,h,n,e,s);if(!($===void 0?C===N||i(C,N,t,r,s):$)){b=!1;break}E||(E=h=="constructor")}if(b&&!E){var V=n.constructor,G=e.constructor;V==G||!("constructor"in n)||!("constructor"in e)||typeof V=="function"&&V instanceof V&&typeof G=="function"&&G instanceof G||(b=!1)}return s.delete(n),s.delete(e),b},Af=$o(Mr,"DataView"),Cf=um,Rf=$o(Mr,"Promise"),If=$o(Mr,"Set"),Nf=$o(Mr,"WeakMap"),xE=Mc,zo=wE,w_="[object Map]",S_="[object Promise]",E_="[object Set]",x_="[object WeakMap]",T_="[object DataView]",HF=zo(Af),KF=zo(Cf),YF=zo(Rf),JF=zo(If),ZF=zo(Nf),Li=xE;(Af&&Li(new Af(new ArrayBuffer(1)))!=T_||Cf&&Li(new Cf)!=w_||Rf&&Li(Rf.resolve())!=S_||If&&Li(new If)!=E_||Nf&&Li(new Nf)!=x_)&&(Li=function(n){var e=xE(n),t=e=="[object Object]"?n.constructor:void 0,r=t?zo(t):"";if(r)switch(r){case HF:return T_;case KF:return w_;case YF:return S_;case JF:return E_;case ZF:return x_}return e});var Th=SE,QF=EE,XF=MF,eU=GF,k_=Li,A_=Hn,C_=Na,tU=vE,R_="[object Arguments]",I_="[object Array]",El="[object Object]",N_=Object.prototype.hasOwnProperty,nU=function(n,e,t,r,i,s){var o=A_(n),a=A_(e),c=o?I_:k_(n),u=a?I_:k_(e),h=(c=c==R_?El:c)==El,f=(u=u==R_?El:u)==El,y=c==u;if(y&&C_(n)){if(!C_(e))return!1;o=!0,h=!1}if(y&&!h)return s||(s=new Th),o||tU(n)?QF(n,e,t,r,i,s):XF(n,e,c,t,r,i,s);if(!(1&t)){var b=h&&N_.call(n,"__wrapped__"),E=f&&N_.call(e,"__wrapped__");if(b||E){var C=b?n.value():n,N=E?e.value():e;return s||(s=new Th),i(C,N,t,r,s)}}return!!y&&(s||(s=new Th),eU(n,e,t,r,i,s))},P_=Oc,TE=function n(e,t,r,i,s){return e===t||(e==null||t==null||!P_(e)&&!P_(t)?e!=e&&t!=t:nU(e,t,r,i,n,s))},rU=SE,iU=TE,sU=function(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){var c=(a=t[i])[0],u=n[c],h=a[1];if(o&&a[2]){if(u===void 0&&!(c in n))return!1}else{var f=new rU;if(r)var y=r(u,h,c,n,e,f);if(!(y===void 0?iU(h,u,3,r,f):y))return!1}}return!0},oU=am,kE=function(n){return n==n&&!oU(n)},aU=kE,cU=lm,AE=function(n,e){return function(t){return t!=null&&t[n]===e&&(e!==void 0||n in Object(t))}},lU=sU,uU=function(n){for(var e=cU(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,aU(i)]}return e},dU=AE,hU=function(n){var e=uU(n);return e.length==1&&e[0][2]?dU(e[0][0],e[0][1]):function(t){return t===n||lU(t,n,e)}},fU=Mc,pU=Oc,gd=function(n){return typeof n=="symbol"||pU(n)&&fU(n)=="[object Symbol]"},mU=Hn,gU=gd,vU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yU=/^\w*$/,hm=function(n,e){if(mU(n))return!1;var t=typeof n;return!(t!="number"&&t!="symbol"&&t!="boolean"&&n!=null&&!gU(n))||yU.test(n)||!vU.test(n)||e!=null&&n in Object(e)},CE=dm;function fm(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(fm.Cache||CE),t}fm.Cache=CE;var _U=fm,bU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wU=/\\(\\)?/g,SU=function(n){var e=_U(n,function(r){return t.size===500&&t.clear(),r}),t=e.cache;return e}(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(bU,function(t,r,i,s){e.push(i?s.replace(wU,"$1"):r||t)}),e}),RE=function(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i},EU=RE,xU=Hn,TU=gd,j_=ds?ds.prototype:void 0,M_=j_?j_.toString:void 0,kU=function n(e){if(typeof e=="string")return e;if(xU(e))return EU(e,n)+"";if(TU(e))return M_?M_.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},AU=kU,CU=Hn,RU=hm,IU=SU,NU=function(n){return n==null?"":AU(n)},IE=function(n,e){return CU(n)?n:RU(n,e)?[n]:IU(NU(n))},PU=gd,vd=function(n){if(typeof n=="string"||PU(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e},jU=IE,MU=vd,pm=function(n,e){for(var t=0,r=(e=jU(e,n)).length;n!=null&&t<r;)n=n[MU(e[t++])];return t&&t==r?n:void 0},OU=pm,DU=IE,LU=pE,VU=Hn,FU=mE,UU=om,BU=vd,$U=function(n,e,t){for(var r=-1,i=(e=DU(e,n)).length,s=!1;++r<i;){var o=BU(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:!!(i=n==null?0:n.length)&&UU(i)&&FU(o,i)&&(VU(n)||LU(n))},zU=function(n,e){return n!=null&&e in Object(n)},qU=$U,WU=TE,GU=function(n,e,t){var r=n==null?void 0:OU(n,e);return r===void 0?t:r},HU=function(n,e){return n!=null&&qU(n,e,zU)},KU=hm,YU=kE,JU=AE,ZU=vd,NE=function(n){return n},QU=pm,XU=function(n){return function(e){return e==null?void 0:e[n]}},eB=function(n){return function(e){return QU(e,n)}},tB=hm,nB=vd,rB=hU,iB=function(n,e){return KU(n)&&YU(e)?JU(ZU(n),e):function(t){var r=GU(t,n);return r===void 0&&r===e?HU(t,n):WU(e,r,3)}},sB=NE,oB=Hn,aB=function(n){return tB(n)?XU(nB(n)):eB(n)},PE=function(n){return typeof n=="function"?n:n==null?sB:typeof n=="object"?oB(n)?iB(n[0],n[1]):rB(n):aB(n)},cB=uE,lB=oV,uB=PE,dB=Hn,hB=function(n,e){return(dB(n)?cB:lB)(n,uB(e))},fB=_E,pB=cm,mB=function(n,e){var t=-1,r=pB(n)?Array(n.length):[];return fB(n,function(i,s,o){r[++t]=e(i,s,o)}),r},O_=gd,gB=function(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n==n,s=O_(n),o=e!==void 0,a=e===null,c=e==e,u=O_(e);if(!a&&!u&&!s&&n>e||s&&o&&c&&!a&&!u||r&&o&&c||!t&&c||!i)return 1;if(!r&&!s&&!u&&n<e||u&&t&&i&&!r&&!s||a&&t&&i||!o&&i||!c)return-1}return 0},vB=function(n,e,t){for(var r=-1,i=n.criteria,s=e.criteria,o=i.length,a=t.length;++r<o;){var c=gB(i[r],s[r]);if(c)return r>=a?c:c*(t[r]=="desc"?-1:1)}return n.index-e.index},kh=RE,yB=pm,_B=PE,bB=mB,wB=function(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n},SB=gE,EB=vB,xB=NE,TB=Hn,kB=function(n,e,t){e=e.length?kh(e,function(s){return TB(s)?function(o){return yB(o,s.length===1?s[0]:s)}:s}):[xB];var r=-1;e=kh(e,SB(_B));var i=bB(n,function(s,o,a){return{criteria:kh(e,function(c){return c(s)}),index:++r,value:s}});return wB(i,function(s,o){return EB(s,o,t)})},AB=kB,D_=Hn,CB=function(n,e,t,r){return n==null?[]:(D_(e)||(e=e==null?[]:[e]),D_(t=t)||(t=t==null?[]:[t]),AB(n,e,t))},xl=function(n,e,t){return IB(n.local,e,t)===!0},RB=function(n,e,t){return n.local.streams&&n.local.streams[e]&&n.local.streams[e].stream&&n.local.streams[e].stream["get".concat(t==="video"?"Video":"Audio","Tracks")]()[0]},qs=function(n,e,t,r){var i=NB(n,e,t,r);return i&&i.pendingTrack},IB=function(n,e,t){if(!n)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=n.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(t)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[t]):r(i[e][t]):!i||r(i.ALL)},NB=function(n,e,t,r){var i=CB(hB(n.streams,function(s){return s.participantId===e&&s.type===t&&s.pendingTrack&&s.pendingTrack.kind===r}),"starttime","desc");return i&&i[0]},PB=function(n,e){var t=n.local.public.customTracks;if(t&&t[e])return t[e].track};function L_(n){for(var e=store.getState(),t=0,r=["cam","screen"];t<r.length;t++)for(var i=r[t],s=0,o=["video","audio"];s<o.length;s++){var a=o[s],c=i==="cam"?a:"screen".concat(a.charAt(0).toUpperCase()+a.slice(1)),u=n.tracks[c];if(u){var h=n.local?RB(e,i,a):qs(e,n.session_id,i,a);u.state==="playable"&&(u.track=h),u.persistentTrack=h}}}function V_(n){try{var e=store.getState();for(var t in n.tracks)if(!jB(t)){var r=n.tracks[t].kind;if(r){var i=n.tracks[t];if(i){var s=n.local?PB(e,t):qs(e,n.session_id,t,r);i.state==="playable"&&(n.tracks[t].track=s),i.persistentTrack=s}}else console.error("unknown type for custom track")}}catch(o){console.error(o)}}function jB(n){return["video","audio","screenVideo","screenAudio"].includes(n)}function F_(n,e){var t=store.getState();if(n.local){if(n.audio)try{n.audioTrack=t.local.streams.cam.stream.getAudioTracks()[0],n.audioTrack||(n.audio=!1)}catch{}if(n.video)try{n.videoTrack=t.local.streams.cam.stream.getVideoTracks()[0],n.videoTrack||(n.video=!1)}catch{}if(n.screen)try{n.screenVideoTrack=t.local.streams.screen.stream.getVideoTracks()[0],n.screenAudioTrack=t.local.streams.screen.stream.getAudioTracks()[0],n.screenVideoTrack||n.screenAudioTrack||(n.screen=!1)}catch{}}else{var r=!0;try{var i=t.participants[n.session_id];i&&i.public&&i.public.rtcType&&i.public.rtcType.impl==="peer-to-peer"&&i.private&&!["connected","completed"].includes(i.private.peeringState)&&(r=!1)}catch(u){console.error(u)}if(!r)return n.audio=!1,n.audioTrack=!1,n.video=!1,n.videoTrack=!1,n.screen=!1,void(n.screenTrack=!1);try{if(t.streams,n.audio&&xl(t,n.session_id,"cam-audio")){var s=qs(t,n.session_id,"cam","audio");s&&(e&&e.audioTrack&&e.audioTrack.id===s.id?n.audioTrack=s:s.muted||(n.audioTrack=s)),n.audioTrack||(n.audio=!1)}if(n.video&&xl(t,n.session_id,"cam-video")){var o=qs(t,n.session_id,"cam","video");o&&(e&&e.videoTrack&&e.videoTrack.id===o.id?n.videoTrack=o:o.muted||(n.videoTrack=o)),n.videoTrack||(n.video=!1)}if(n.screen&&xl(t,n.session_id,"screen-audio")){var a=qs(t,n.session_id,"screen","audio");a&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===a.id?n.screenAudioTrack=a:a.muted||(n.screenAudioTrack=a))}if(n.screen&&xl(t,n.session_id,"screen-video")){var c=qs(t,n.session_id,"screen","video");c&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===c.id?n.screenVideoTrack=c:c.muted||(n.screenVideoTrack=c))}n.screenVideoTrack||n.screenAudioTrack||(n.screen=!1)}catch(u){console.error("unexpected error matching up tracks",u)}}}function MB(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(c,u){if(c){if(typeof c=="string")return U_(c,u);var h=Object.prototype.toString.call(c).slice(8,-1);if(h==="Object"&&c.constructor&&(h=c.constructor.name),h==="Map"||h==="Set")return Array.from(c);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return U_(c,u)}}(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function U_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Zn=new Map,to=null;function OB(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(c,u){if(c){if(typeof c=="string")return B_(c,u);var h=Object.prototype.toString.call(c).slice(8,-1);if(h==="Object"&&c.constructor&&(h=c.constructor.name),h==="Map"||h==="Set")return Array.from(c);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return B_(c,u)}}(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function B_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Qn=new Map,ja=null,DB=3e3;function LB(n){jE()?function(e){Zn.has(e)||(Zn.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){Zn.has(e)&&(Zn.get(e).lastDevicesString=JSON.stringify(t),to||(to=function(){var r=Ee(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),o=MB(Zn.keys());try{for(o.s();!(i=o.n()).done;){var a=i.value,c=JSON.stringify(s);c!==Zn.get(a).lastDevicesString&&(Zn.get(a).lastDevicesString=c,a(s))}}catch(u){o.e(u)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",to)))}))}(n):function(e){Qn.has(e)||(Qn.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){Qn.has(e)&&(Qn.get(e).lastDevicesString=JSON.stringify(t),ja||(ja=setInterval(Ee(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=OB(Qn.keys());try{for(s.s();!(r=s.n()).done;){var o=r.value,a=JSON.stringify(i);a!==Qn.get(o).lastDevicesString&&(Qn.get(o).lastDevicesString=a,o(i))}}catch(c){s.e(c)}finally{s.f()}}),DB)))}))}(n)}function VB(n){jE()?function(e){Zn.has(e)&&(Zn.delete(e),Zn.size===0&&to&&(navigator.mediaDevices.removeEventListener("devicechange",to),to=null))}(n):function(e){Qn.has(e)&&(Qn.delete(e),Qn.size===0&&ja&&(clearInterval(ja),ja=null))}(n)}function jE(){return xt()||navigator.mediaDevices.ondevicechange!==void 0}var FB=new Set;function UB(n,e){return n&&n.readyState==="live"&&!function(t,r){return t.muted&&!FB.has(t.id)}(n)}var _r,BB=["preserveIframe"];function $_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ct(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$_(Object(t),!0).forEach(function(r){Yr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $B(n){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,r=qn(n);if(e){var i=qn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return cd(this,t)}}function z_(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(c,u){if(c){if(typeof c=="string")return q_(c,u);var h=Object.prototype.toString.call(c).slice(8,-1);if(h==="Object"&&c.constructor&&(h=c.constructor.name),h==="Map"||h==="Set")return Array.from(c);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return q_(c,u)}}(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function q_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var W_="video",zB="voice",G_=xt()?{data:{}}:{data:{},topology:"none"},H_={present:0,hidden:0},ME={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Ah=Object.keys(ME),K_=["state","volume","simulcastEncodings"],Y_={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},wu={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Pf={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Di={customIntegrations:{validate:BE,help:FE()},customTrayButtons:{validate:UE,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(wu))},url:{validate:function(n){return typeof n=="string"},help:"url should be a string"},baseUrl:{validate:function(n){return typeof n=="string"},help:"baseUrl should be a string"},token:{validate:function(n){return typeof n=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(n,e){try{return e.validateDailyConfig(n),window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=n.experimentalGetUserMediaConstraintsModify,window._dailyConfig.userMediaVideoConstraints=n.userMediaVideoConstraints,window._dailyConfig.userMediaAudioConstraints=n.userMediaAudioConstraints,window._dailyConfig.callObjectBundleUrlOverride=n.callObjectBundleUrlOverride,window._dailyConfig.proxyUrl=n.proxyUrl,window._dailyConfig.iceConfig=n.iceConfig,!0}catch(t){console.error("Failed to validate dailyConfig",t)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(n){return $E(n,Y_)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Y_),", all fields optional")},lang:{validate:function(n){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(n)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(n){try{return OE(n),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(n,e){return e._preloadCache.videoDeviceId=n,!0}},audioSource:{validate:function(n,e){return e._preloadCache.audioDeviceId=n,!0}},subscribeToTracksAutomatically:{validate:function(n,e){return e._preloadCache.subscribeToTracksAutomatically=n,!0}},theme:{validate:function(n){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],t=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var o=s[i];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return wt(n)==="object"&&("light"in n&&"dark"in n||"colors"in n)?"light"in n&&"dark"in n?"colors"in n.light?"colors"in n.dark?t(n.light.colors)&&t(n.dark.colors):(console.error('Dark theme is missing "colors" property.',n),!1):(console.error('Light theme is missing "colors" property.',n),!1):t(n.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',n),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(n){if("grid"in n){var e=n.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(n){return DE(n,{allowAllParticipantsKey:!1})},help:VE({allowAllParticipantsKey:!1})},sendSettings:{validate:function(n,e){return!!function(t,r){try{return r.validateUpdateSendSettings(t),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(n,e)&&(e._preloadCache.sendSettings=n,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(n,e){return!!jf(n)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),LE(n),n.audio&&(e._preloadCache.inputSettings.audio=n.audio),n.video&&(e._preloadCache.inputSettings.video=n.video),!0)},help:Mf()},layout:{validate:function(n){return n==="custom-v1"||n==="browser"||n==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0},Tl={styles:{validate:function(n){for(var e in n)if(e!=="cam"&&e!=="screen")return!1;if(n.cam){for(var t in n.cam)if(t!=="div"&&t!=="video")return!1}if(n.screen){for(var r in n.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(n,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var t=[!0,!1,"staged"];if(t.includes(n)||!xt()&&n==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var a in s)if(a==="custom"){if(!t.includes(s[a])&&!i(s[a],!0))return!1}else{var c=!o&&!r.includes(a),u=!t.includes(s[a]);if(c||u)return!1}return!0}(n)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(xt()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(n){return n===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(n){for(var e=0,t=Object.entries(n);e<t.length;e++){var r=as(t[e],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array){var o,a=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],c=z_(s);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(!a.includes(u))return!1}}catch(E){c.e(E)}finally{c.f()}}else if(typeof s!="boolean")return!1;s instanceof Array&&(n.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array){var h,f=["participants","streaming","transcription"],y=z_(s);try{for(y.s();!(h=y.n()).done;){var b=h.value;if(!f.includes(b))return!1}}catch(E){y.e(E)}finally{y.f()}}else if(typeof s!="boolean")return!1;s instanceof Array&&(n.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};(function(n){ad(me,Er);var e,t,r,i,s,o,a,c,u,h,f,y,b,E,C,N,$,V,G,J,q,z,k,S,A,P,j,I,x,ye,Oe,We,Be,dt,st=$B(me);function me(p){var m,_,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Wn(this,me),Yr(wr(m=st.call(this)),"startListeningForDeviceChanges",function(){LB(m.handleDeviceChange)}),Yr(wr(m),"stopListeningForDeviceChanges",function(){VB(m.handleDeviceChange)}),Yr(wr(m),"handleDeviceChange",function(F){F=F.map(function(Q){return JSON.parse(JSON.stringify(Q))}),m.emit(Yy,{action:Yy,availableDevices:F})}),Yr(wr(m),"handleNativeAppActiveStateChange",function(F){m.disableReactNativeAutoDeviceManagement("video")||(F?m.camUnmutedBeforeLosingNativeActiveState&&m.setLocalVideo(!0):(m.camUnmutedBeforeLosingNativeActiveState=m.localVideo(),m.camUnmutedBeforeLosingNativeActiveState&&m.setLocalVideo(!1)))}),Yr(wr(m),"handleNativeAudioFocusChange",function(F){m.disableReactNativeAutoDeviceManagement("audio")||(m._hasNativeAudioFocus=F,m.toggleParticipantAudioBasedOnNativeAudioFocus(),m._hasNativeAudioFocus?m.micUnmutedBeforeLosingNativeAudioFocus&&m.setLocalAudio(!0):(m.micUnmutedBeforeLosingNativeAudioFocus=m.localAudio(),m.setLocalAudio(!1)))}),Yr(wr(m),"handleNativeSystemScreenCaptureStop",function(){m.stopScreenShare()}),m.strictMode=T.strictMode===void 0||T.strictMode,_r){if(m._logDuplicateInstanceAttempt(),m.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed")}else _=wr(m),_r=_;if(T.dailyJsVersion=me.version(),m._iframe=p,m._callObjectMode=T.layout==="none"&&!m._iframe,m._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},m._callObjectMode&&(window._dailyPreloadCache=m._preloadCache),T.showLocalVideo!==void 0?m._callObjectMode?console.error("showLocalVideo is not available in call object mode"):m._showLocalVideo=!!T.showLocalVideo:m._showLocalVideo=!0,T.showParticipantsBar!==void 0?m._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):m._showParticipantsBar=!!T.showParticipantsBar:m._showParticipantsBar=!0,T.customIntegrations!==void 0?m._callObjectMode?console.error("customIntegrations is not available in call object mode"):m._customIntegrations=T.customIntegrations:m._customIntegrations={},T.customTrayButtons!==void 0?m._callObjectMode?console.error("customTrayButtons is not available in call object mode"):m._customTrayButtons=T.customTrayButtons:m._customTrayButtons={},T.activeSpeakerMode!==void 0?m._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):m._activeSpeakerMode=!!T.activeSpeakerMode:m._activeSpeakerMode=!1,T.receiveSettings?m._callObjectMode?m._receiveSettings=T.receiveSettings:console.error("receiveSettings is only available in call object mode"):m._receiveSettings={},m.validateProperties(T),m.properties=ct({},T),m._preloadCache.inputSettings||(m._preloadCache.inputSettings={}),T.inputSettings&&T.inputSettings.audio&&(m._preloadCache.inputSettings.audio=T.inputSettings.audio),T.inputSettings&&T.inputSettings.video&&(m._preloadCache.inputSettings.video=T.inputSettings.video),m._callObjectLoader=m._callObjectMode?new o2:null,m._callState=$y,m._isPreparingToJoin=!1,m._accessState={access:hh},m._meetingSessionSummary={},m._finalSummaryOfPrevSession={},m._meetingSessionState=Ch(G_,m._callObjectMode),m._nativeInCallAudioMode=W_,m._participants={},m._participantCounts=H_,m._rmpPlayerState={},m._waitingParticipants={},m._inputEventsOn={},m._network={threshold:"good",quality:100},m._activeSpeaker={},m._callFrameId=ld(),m._localAudioLevel=0,m._remoteParticipantsAudioLevel={},m._messageChannel=xt()?new r2:new t2,m._iframe&&(m._iframe.requestFullscreen?m._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===m._iframe?(m.emit(Ns,{action:Ns}),m.sendMessageToCallMachine({action:Ns})):(m.emit(Ps,{action:Ps}),m.sendMessageToCallMachine({action:Ps}))}):m._iframe.webkitRequestFullscreen&&m._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===m._iframe?(m.emit(Ns,{action:Ns}),m.sendMessageToCallMachine({action:Ns})):(m.emit(Ps,{action:Ps}),m.sendMessageToCallMachine({action:Ps}))})),xt()){var O=m.nativeUtils();O.addAudioFocusChangeListener&&O.removeAudioFocusChangeListener&&O.addAppActiveStateChangeListener&&O.removeAppActiveStateChangeListener&&O.addSystemScreenCaptureStopListener&&O.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),m._hasNativeAudioFocus=!0,O.addAudioFocusChangeListener(m.handleNativeAudioFocusChange),O.addAppActiveStateChangeListener(m.handleNativeAppActiveStateChange),O.addSystemScreenCaptureStopListener(m.handleNativeSystemScreenCaptureStop)}return m._callObjectMode&&m.startListeningForDeviceChanges(),m._messageChannel.addListenerForMessagesFromCallMachine(m.handleMessageFromCallMachine,m._callFrameId,wr(m)),m}return Gn(me,[{key:"destroy",value:(dt=Ee(function*(){try{yield this.leave()}catch{}var p=this._iframe;if(p){var m=p.parentElement;m&&m.removeChild(p)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),xt()){var _=this.nativeUtils();_.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),_.removeAppActiveStateChangeListener(this.handleNativeAppActiveStateChange),_.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0;try{this.emit("call-instance-destroyed",{action:"call-instance-destroyed"})}catch{console.log("could not emit call-instance-destroyed")}this.strictMode&&(this._callFrameId=void 0),_r=void 0}),function(){return dt.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(p){var m=p.bodyClass,_=p.cssFile,T=p.cssText;return Ye(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(_),bodyClass:m,cssText:T}),this}},{key:"iframe",value:function(){return Ye(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return Yn(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return Yn(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(p,m){for(var _ in m){if(!Tl[_])throw new Error("unrecognized updateParticipant property ".concat(_));if(Tl[_].validate&&!Tl[_].validate(m[_],this,this._participants[p]))throw new Error(Tl[_].help)}}},{key:"updateParticipant",value:function(p,m){return this._participants.local&&this._participants.local.session_id===p&&(p="local"),p&&m&&(this.validateParticipantProperties(p,m),this.sendMessageToCallMachine({action:"update-participant",id:p,properties:m})),this}},{key:"updateParticipants",value:function(p){var m=this._participants.local&&this._participants.local.session_id;for(var _ in p)_===m&&(_="local"),_&&p[_]&&this.validateParticipantProperties(_,p[_]);return this.sendMessageToCallMachine({action:"update-participants",participants:p}),this}},{key:"updateWaitingParticipant",value:(Be=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Yn(this._callObjectMode,"updateWaitingParticipant()"),_n(this._callState,"updateWaitingParticipant()"),typeof m!="string"||wt(_)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(T,O){p.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:m,updates:_},function(F){F.error&&O(F.error),F.id||O(new Error("unknown error in updateWaitingParticipant()")),T({id:F.id})})})}),function(){return Be.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(We=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yn(this._callObjectMode,"updateWaitingParticipants()"),_n(this._callState,"updateWaitingParticipants()"),wt(m)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(_,T){p.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:m},function(O){O.error&&T(O.error),O.ids||T(new Error("unknown error in updateWaitingParticipants()")),_({ids:O.ids})})})}),function(){return We.apply(this,arguments)})},{key:"requestAccess",value:(Oe=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=m.access,T=_===void 0?{level:sL}:_,O=m.name,F=O===void 0?"":O;return Yn(this._callObjectMode,"requestAccess()"),_n(this._callState,"requestAccess()"),new Promise(function(Q,X){p.sendMessageToCallMachine({action:"daily-method-request-access",access:T,name:F},function(re){re.error&&X(re.error),re.access||X(new Error("unknown error in requestAccess()")),Q({access:re.access,granted:re.granted})})})}),function(){return Oe.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?this._participants.local.audio:null}},{key:"localVideo",value:function(){return this._participants.local?this._participants.local.video:null}},{key:"setLocalAudio",value:function(p){return this.sendMessageToCallMachine({action:"local-audio",state:p}),this}},{key:"setLocalVideo",value:function(p){return this.sendMessageToCallMachine({action:"local-video",state:p}),this}},{key:"getReceiveSettings",value:(ye=Ee(function*(p){var m=this,_=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,T=_!==void 0&&_;if(Yn(this._callObjectMode,"getReceiveSettings()"),!this._dailyMainExecuted)return this._receiveSettings;switch(wt(p)){case"string":return new Promise(function(O){m.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:p,showInheritedValues:T},function(F){O(F.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(p){return ye.apply(this,arguments)})},{key:"updateReceiveSettings",value:(x=Ee(function*(p){var m=this;if(Yn(this._callObjectMode,"updateReceiveSettings()"),!DE(p,{allowAllParticipantsKey:!0}))throw new Error(VE({allowAllParticipantsKey:!0}));return _n(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(_){m.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:p},function(T){_({receiveSettings:T.receiveSettings})})})}),function(p){return x.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(p){var m,_,T,O,F,Q,X,re;if(p){var Pe={},Je=((m=p.audio)===null||m===void 0||(_=m.processor)===null||_===void 0?void 0:_.type)==="none"&&((T=p.audio)===null||T===void 0||(O=T.processor)===null||O===void 0?void 0:O._isDefaultWhenNone);if(p.audio&&!Je){var je=ct({},p.audio.processor);delete je._isDefaultWhenNone,Pe.audio=ct(ct({},p.audio),{},{processor:je})}var Ge=((F=p.video)===null||F===void 0||(Q=F.processor)===null||Q===void 0?void 0:Q.type)==="none"&&((X=p.video)===null||X===void 0||(re=X.processor)===null||re===void 0?void 0:re._isDefaultWhenNone);if(p.video&&!Ge){var pt=ct({},p.video.processor);delete pt._isDefaultWhenNone,Pe.video=ct(ct({},p.video),{},{processor:pt})}return Pe}}},{key:"getInputSettings",value:function(){var p=this;return new Promise(function(m){m(p._getInputSettings())})}},{key:"_getInputSettings",value:function(){var p,m,_,T,O,F,Q,X,re={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(p=((_=this._inputSettings)===null||_===void 0?void 0:_.video)||re,m=((T=this._inputSettings)===null||T===void 0?void 0:T.audio)||re):(p=((O=this._preloadCache)===null||O===void 0||(F=O.inputSettings)===null||F===void 0?void 0:F.video)||re,m=((Q=this._preloadCache)===null||Q===void 0||(X=Q.inputSettings)===null||X===void 0?void 0:X.audio)||re);var Pe={audio:m,video:p};return this._prepInputSettingsToPresentToUser(Pe)}},{key:"updateInputSettings",value:(I=Ee(function*(p){var m=this;return jf(p)?(p&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),LE(p),p.audio&&(this._preloadCache.inputSettings.audio=p.audio),p.video&&(this._preloadCache.inputSettings.video=p.video)),jf(p)?this._callObjectMode&&this.needsLoad()?this._getInputSettings():new Promise(function(_,T){m.sendMessageToCallMachine({action:"update-input-settings",inputSettings:p},function(O){O.error?T(O.error):_({inputSettings:m._prepInputSettingsToPresentToUser(O.inputSettings)})})}):this._getInputSettings()):(console.error(Mf()),Promise.reject(Mf()))}),function(p){return I.apply(this,arguments)})},{key:"setBandwidth",value:function(p){var m=p.kbs,_=p.trackConstraints;if(Ye(),this._dailyMainExecuted)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:m,trackConstraints:_}),this}},{key:"getDailyLang",value:function(){var p=this;if(Ye(),this._dailyMainExecuted)return new Promise(function(){var m=Ee(function*(_){p.sendMessageToCallMachine({action:"get-daily-lang"},function(T){delete T.action,delete T.callbackStamp,_(T)})});return function(_){return m.apply(this,arguments)}}())}},{key:"setDailyLang",value:function(p){return Ye(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:p}),this}},{key:"setProxyUrl",value:function(p){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:p}),this}},{key:"setIceConfig",value:function(p){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:p}),this}},{key:"meetingSessionSummary",value:function(){return[$r,zr].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(j=Ee(function*(){var p=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),_n(this._callState,"getMeetingSession()"),new Promise(function(m){p.sendMessageToCallMachine({action:"get-meeting-session"},function(_){delete _.action,delete _.callbackStamp,delete _.callFrameId,m(_)})})}),function(){return j.apply(this,arguments)})},{key:"meetingSessionState",value:function(){if(this._callState!==Pn)throw new Error("meetingSessionState() is only available when joined");return this._meetingSessionState}},{key:"setMeetingSessionData",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";if(Yn(this._callObjectMode,"setMeetingSessionData()"),this._callState!==Pn)throw new Error("setMeetingSessionData() is only available when joined");try{(function(_,T){new i2({data:_,mergeStrategy:T})})(p,m)}catch(_){throw console.error(_),_}try{this.sendMessageToCallMachine({action:"set-session-data",data:p,mergeStrategy:m})}catch(_){throw new Error("Error setting meeting session data: ".concat(_))}}},{key:"setUserName",value:function(p,m){var _=this;return this.properties.userName=p,new Promise(function(T){_.sendMessageToCallMachine({action:"set-user-name",name:p??"",thisMeetingOnly:xt()||!!m&&!!m.thisMeetingOnly},function(O){delete O.action,delete O.callbackStamp,T(O)})})}},{key:"setUserData",value:(P=Ee(function*(p){var m=this;try{OE(p)}catch(_){throw console.error(_),_}if(this.properties.userData=p,this._dailyMainExecuted)return new Promise(function(_){try{m.sendMessageToCallMachine({action:"set-user-data",userData:p},function(T){delete T.action,delete T.callbackStamp,delete T.callFrameId,_(T)})}catch(T){throw new Error("Error setting user data: ".concat(T))}})}),function(p){return P.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(p){if(p&&(p<100||typeof p!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(p){var m=this;if(Ye(),this.validateAudioLevelInterval(p),this._dailyMainExecuted)return new Promise(function(_,T){m.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:p},function(O){O.error?T({error:O.error}):_()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:p}}},{key:"stopLocalAudioLevelObserver",value:(A=Ee(function*(){Ye(),this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}),function(){return A.apply(this,arguments)})},{key:"startRemoteParticipantsAudioLevelObserver",value:function(p){var m=this;if(Ye(),this.validateAudioLevelInterval(p),this._dailyMainExecuted)return new Promise(function(_,T){m.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:p},function(O){O.error?T({error:O.error}):_()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:p}}},{key:"stopRemoteParticipantsAudioLevelObserver",value:(S=Ee(function*(){Ye(),this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}),function(){return S.apply(this,arguments)})},{key:"startCamera",value:(k=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yn(this._callObjectMode,"startCamera()"),[fa,Pn].includes(this._callState))throw new Error("startCamera() not supported after joining a meeting: did you mean to use setLocalAudio() and/or setLocalVideo() instead?");if(this.needsLoad())try{yield this.load(m)}catch(_){return Promise.reject(_)}else{if(this._didPreAuth){if(m.url&&m.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(m.token&&m.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(m),this.properties=ct(ct({},this.properties),m)}return new Promise(function(_){p.sendMessageToCallMachine({action:"start-camera",properties:js(p.properties),preloadCache:js(p._preloadCache)},function(T){delete T.action,delete T.callbackStamp,_(T)})})}),function(){return k.apply(this,arguments)})},{key:"validateCustomTrack",value:function(p,m,_){if(_&&_.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(m&&m!=="music"&&m!=="speech"&&!(m instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(_&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(_))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(p instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};if(Ye(),this.validateCustomTrack(m.track,m.mode,m.trackName),this._callState!==Pn)throw new Error("startCustomTrack() is only allowed when joined");return new Promise(function(_,T){window._dailyPreloadCache.customTrack=m.track,m.track=wa,p.sendMessageToCallMachine({action:"start-custom-track",properties:m},function(O){O.error?T({error:O.error}):_(O.mediaTag)})})}},{key:"stopCustomTrack",value:function(p){var m=this;if(Ye(),this._callState!==Pn)throw new Error("stopCustomTrack() is only allowed when joined");return new Promise(function(_){m.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:p},function(T){_(T.mediaTag)})})}},{key:"setCamera",value:function(p){var m=this;if(ma(),this.needsLoad())throw new Error("Before you can invoke setCamera, first you need to invoke one of these methods: join, startCamera, or preAuth");return new Promise(function(_){m.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:p},function(T){_({device:T.device})})})}},{key:"setAudioDevice",value:(z=Ee(function*(p){return ma(),this.nativeUtils().setAudioDevice(p),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(p){return z.apply(this,arguments)})},{key:"cycleCamera",value:function(){var p=this;return new Promise(function(m){p.sendMessageToCallMachine({action:"cycle-camera"},function(_){m({device:_.device})})})}},{key:"cycleMic",value:function(){var p=this;return Ye(),new Promise(function(m){p.sendMessageToCallMachine({action:"cycle-mic"},function(_){m({device:_.device})})})}},{key:"getCameraFacingMode",value:function(){var p=this;return ma(),new Promise(function(m){p.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(_){m(_.facingMode)})})}},{key:"setInputDevicesAsync",value:(q=Ee(function*(p){var m=this,_=p.audioDeviceId,T=p.videoDeviceId,O=p.audioSource,F=p.videoSource;return Ye(),O!==void 0&&(_=O),F!==void 0&&(T=F),_&&(this._preloadCache.audioDeviceId=_),T&&(this._preloadCache.videoDeviceId=T),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(_ instanceof MediaStreamTrack&&(_=wa),T instanceof MediaStreamTrack&&(T=wa),new Promise(function(Q){m.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:_,videoDeviceId:T},function(X){delete X.action,delete X.callbackStamp,X.returnPreloadCache?Q({camera:{deviceId:m._preloadCache.videoDeviceId},mic:{deviceId:m._preloadCache.audioDeviceId},speaker:{deviceId:m._preloadCache.outputDeviceId}}):Q(X)})}))}),function(p){return q.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(J=Ee(function*(p){var m=this,_=p.outputDeviceId;return Ye(),_&&(this._preloadCache.outputDeviceId=_),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(T){m.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:_},function(O){delete O.action,delete O.callbackStamp,O.returnPreloadCache?T({camera:{deviceId:m._preloadCache.videoDeviceId},mic:{deviceId:m._preloadCache.audioDeviceId},speaker:{deviceId:m._preloadCache.outputDeviceId}}):T(O)})})}),function(p){return J.apply(this,arguments)})},{key:"getInputDevices",value:(G=Ee(function*(){var p=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(m){p.sendMessageToCallMachine({action:"get-input-devices"},function(_){delete _.action,delete _.callbackStamp,_.returnPreloadCache?m({camera:{deviceId:p._preloadCache.videoDeviceId},mic:{deviceId:p._preloadCache.audioDeviceId},speaker:{deviceId:p._preloadCache.outputDeviceId}}):m(_)})})}),function(){return G.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ma(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(p){if(ma(),[W_,zB].includes(p)){if(p!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=p,!this.disableReactNativeAutoDeviceManagement("audio")&&this._isCallPendingOrOngoing(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",p)}},{key:"preAuth",value:(V=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yn(this._callObjectMode,"preAuth()"),[fa,Pn].includes(this._callState))throw new Error("preAuth() not supported after joining a meeting");if(this.needsLoad()&&(yield this.load(m)),!m.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(m),this.properties=ct(ct({},this.properties),m),new Promise(function(_,T){p.sendMessageToCallMachine({action:"daily-method-preauth",properties:js(p.properties),preloadCache:js(p._preloadCache)},function(O){return O.error?T(O.error):O.access?(p._didPreAuth=!0,void _({access:O.access})):T(new Error("unknown error in preAuth()"))})})}),function(){return V.apply(this,arguments)})},{key:"load",value:($=Ee(function*(p){var m=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(p&&(this.validateProperties(p),this.properties=ct(ct({},this.properties),p)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");this._updateCallState(zy);try{this.emit(Gy,{action:Gy})}catch(_){console.log("could not emit 'loading'",_)}return this._callObjectMode?new Promise(function(_,T){m._callObjectLoader.cancel(),m._callObjectLoader.load(m._callFrameId,m.properties.dailyConfig&&m.properties.dailyConfig.avoidEval,function(O){m._updateCallState(qy),O&&m.emit(fh,{action:fh}),_()},function(O,F){if(m.emit(Hy,{action:Hy,errorMsg:O}),!F){m._updateCallState(zr),m.resetMeetingDependentVars();var Q={action:vh,errorMsg:O,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:new Error(O),bundleUrl:Jp()}}};m._maybeSendToSentry(Q),m.emit(vh,Q),T(O)}})}):(this._iframe.src=PS(this.assembleMeetingUrl()),new Promise(function(_,T){m._loadedCallback=function(O){if(m._callState!==zr){for(var F in m._updateCallState(qy),(m.properties.cssFile||m.properties.cssText)&&m.loadCss(m.properties),m._inputEventsOn)m.sendMessageToCallMachine({action:Sl,on:F});_()}else T(O)}}))}}),function(p){return $.apply(this,arguments)})},{key:"join",value:(N=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(m)}catch(T){return this.updateIsPreparingToJoin(!1),Promise.reject(T)}}else{if(_=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(m.url&&m.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(m.token&&m.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(m.url&&!this._callObjectMode&&m.url&&m.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(m.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(m),this.properties=ct(ct({},this.properties),m)}if(m.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!m.showLocalVideo),m.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!m.showParticipantsBar),this._callState===Pn||this._callState===fa)return console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1);this._updateCallState(fa,!1);try{this.emit(Ky,{action:Ky})}catch(T){console.log("could not emit 'joining-meeting'",T)}return this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),m.inputSettings&&m.inputSettings.audio&&(this._preloadCache.inputSettings.audio=m.inputSettings.audio),m.inputSettings&&m.inputSettings.video&&(this._preloadCache.inputSettings.video=m.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:js(this.properties),preloadCache:js(this._preloadCache)}),new Promise(function(T,O){p._joinedCallback=function(F,Q){if(p._callState!==zr){if(p._updateCallState(Pn),F)for(var X in F)p._callObjectMode&&(L_(F[X]),V_(F[X]),F_(F[X],p._participants[X])),p._participants[X]=ct({},F[X]),p.toggleParticipantAudioBasedOnNativeAudioFocus();_&&p.loadCss(p.properties),T(F)}else O(Q)}})}),function(){return N.apply(this,arguments)})},{key:"leave",value:(C=Ee(function*(){var p=this;return new Promise(function(m){if(p._callState===$r||p._callState===zr)m();else if(p._callObjectLoader&&!p._callObjectLoader.loaded){p._callObjectLoader.cancel(),p._updateCallState($r),p.resetMeetingDependentVars();try{p.emit($r,{action:$r})}catch(_){console.log("could not emit 'left-meeting'",_)}m()}else p._resolveLeave=m,p.sendMessageToCallMachine({action:"leave-meeting"})})}),function(){return C.apply(this,arguments)})},{key:"startScreenShare",value:(E=Ee(function*(){var p=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._dailyMainExecuted)if(m.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",m.screenVideoSendSettings),m.mediaStream&&(this._preloadCache.screenMediaStream=m.mediaStream,m.mediaStream=wa),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var _=this.nativeUtils();if(yield _.isScreenBeingCaptured())return void this.emit(gh,{action:gh,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});_.setSystemScreenCaptureStartCallback(function(){_.setSystemScreenCaptureStartCallback(null),p.sendMessageToCallMachine({action:Xy,captureOptions:m})}),_.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Xy,captureOptions:m})}),function(){return E.apply(this,arguments)})},{key:"stopScreenShare",value:function(){this._dailyMainExecuted&&this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ct({action:"local-recording-start"},p))}},{key:"updateRecording",value:function(p){var m=p.layout,_=m===void 0?{preset:"default"}:m,T=p.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:_,instanceId:T})}},{key:"stopRecording",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ct({action:"local-recording-stop"},p))}},{key:"startLiveStreaming",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ct({action:"daily-method-start-live-streaming"},p))}},{key:"updateLiveStreaming",value:function(p){var m=p.layout,_=m===void 0?{preset:"default"}:m,T=p.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:_,instanceId:T})}},{key:"addLiveStreamingEndpoints",value:function(p){var m=p.endpoints,_=p.instanceId;this.sendMessageToCallMachine({action:e_,endpointsOp:YL,endpoints:m,instanceId:_})}},{key:"removeLiveStreamingEndpoints",value:function(p){var m=p.endpoints,_=p.instanceId;this.sendMessageToCallMachine({action:e_,endpointsOp:JL,endpoints:m,instanceId:_})}},{key:"stopLiveStreaming",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(ct({action:"daily-method-stop-live-streaming"},p))}},{key:"validateDailyConfig",value:function(p){p.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(p.camSimulcastEncodings)),p.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings.")}},{key:"validateSimulcastEncodings",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(p){if(!(p instanceof Array))throw new Error("encodings must be an Array");if(!Z_(p.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var T=0;T<p.length;T++){var O=p[T];for(var F in this._validateEncodingLayerHasValidProperties(O),O){if(!Ah.includes(F))throw new Error("Invalid key ".concat(F,", valid keys are:")+Object.values(Ah));if(typeof O[F]!="number")throw new Error("".concat(F," must be a number"));if(m){var Q=m[F],X=Q.min,re=Q.max;if(!Z_(O[F],X,re))throw new Error("".concat(F," value not in range. valid range: ").concat(X," to ").concat(re))}}if(_&&!O.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(b=Ee(function*(p){var m=this,_=p.url,T=p.settings,O=T===void 0?{state:Sf.PLAY}:T;try{(function(F){if(typeof F!="string")throw new Error('url parameter must be "string" type')})(_),J_(O),function(F){for(var Q in F)if(!K_.includes(Q))throw new Error("Invalid key ".concat(Q,", valid keys are: ").concat(K_));F.simulcastEncodings&&this.validateSimulcastEncodings(F.simulcastEncodings,ME,!0)}(O)}catch(F){throw console.error("invalid argument Error: ".concat(F)),console.error(`startRemoteMediaPlayer arguments must be of the form: 
  { url: "playback url", 
  settings?: 
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),F}return new Promise(function(){var F=Ee(function*(Q,X){m.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:_,settings:O},function(re){re.error?X({error:re.error,errorMsg:re.errorMsg}):Q({session_id:re.session_id,remoteMediaPlayerState:{state:re.state,settings:re.settings}})})});return function(Q,X){return F.apply(this,arguments)}}())}),function(p){return b.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(y=Ee(function*(p){var m=this;if(typeof p!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(){var _=Ee(function*(T,O){m.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:p},function(F){F.error?O({error:F.error,errorMsg:F.errorMsg}):T()})});return function(T,O){return _.apply(this,arguments)}}())}),function(p){return y.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(f=Ee(function*(p){var m=this,_=p.session_id,T=p.settings;try{J_(T)}catch(O){throw console.error("invalid argument Error: ".concat(O)),console.error(`updateRemoteMediaPlayer arguments must be of the form: 
  session_id: "participant session", 
  { settings?: {state: "play"|"pause"} }`),O}return new Promise(function(){var O=Ee(function*(F,Q){m.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:_,settings:T},function(X){X.error?Q({error:X.error,errorMsg:X.errorMsg}):F({session_id:X.session_id,remoteMediaPlayerState:{state:X.state,settings:X.settings}})})});return function(F,Q){return O.apply(this,arguments)}}())}),function(p){return f.apply(this,arguments)})},{key:"startTranscription",value:function(p){this.sendMessageToCallMachine(ct({action:"daily-method-start-transcription"},p))}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"getNetworkStats",value:function(){var p=this;return this._callState!==Pn?{stats:{latest:{}}}:new Promise(function(m){p.sendMessageToCallMachine({action:"get-calc-stats"},function(_){m(ct({stats:_.stats},p._network))})})}},{key:"testWebsocketConnectivity",value:(h=Ee(function*(){var p=this;if(this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}return new Promise(function(m,_){p.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(T){T.error?_(T.error):m(T.results)})})}),function(){return h.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(p){return p?p instanceof MediaStreamTrack?!!UB(p)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testConnectionQuality",value:(u=Ee(function*(p){var m=this;if(this.needsLoad())try{yield this.load()}catch(O){return Promise.reject(O)}var _=p.videoTrack,T=p.duration;if(!this._validateVideoTrackForNetworkTests(_))throw new Error("Video track error");return this._preloadCache.videoTrackForConnectionQualityTest=_,new Promise(function(O,F){m.sendMessageToCallMachine({action:"test-connection-quality",duration:T},function(Q){Q.error?F(Q.error):O(Q.results)})})}),function(p){return u.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-connection-quality"})}},{key:"testNetworkConnectivity",value:(c=Ee(function*(p){var m=this;if(this.needsLoad())try{yield this.load()}catch(_){return Promise.reject(_)}if(!this._validateVideoTrackForNetworkTests(p))throw new Error("Video track error");return this._preloadCache.videoTrackForNetworkConnectivityTest=p,new Promise(function(_,T){m.sendMessageToCallMachine({action:"test-network-connectivity"},function(O){O.error?T(O.error):_(O.results)})})}),function(p){return c.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var p=this;return new Promise(function(m,_){p._callState===Pn?p.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(T){m(T.cpuStats)}):m({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(p){var m;if(!(((m=Object.keys(p))===null||m===void 0?void 0:m.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Ah))}},{key:"_validateVideoSendSettings",value:function(p,m){var _=p==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized"],T="Video send settings should be either an object or one of the supported presets: ".concat(_.join());if(typeof m=="string"){if(!_.includes(m))throw new Error(T)}else{if(wt(m)!=="object")throw new Error(T);if(!m.maxQuality&&!m.encodings)throw new Error("Video send settings must contain at least maxQuality or encodings attribute");if(m.maxQuality&&["low","medium","high"].indexOf(m.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(m.encodings){var O=!1;switch(Object.keys(m.encodings).length){case 1:O=!m.encodings.low;break;case 2:O=!m.encodings.low||!m.encodings.medium;break;case 3:O=!m.encodings.low||!m.encodings.medium||!m.encodings.high;break;default:O=!0}if(O)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");m.encodings.low&&this._validateEncodingLayerHasValidProperties(m.encodings.low),m.encodings.medium&&this._validateEncodingLayerHasValidProperties(m.encodings.medium),m.encodings.high&&this._validateEncodingLayerHasValidProperties(m.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(p){var m=this;if(!p||Object.keys(p).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(p).forEach(function(_){var T=as(_,2),O=T[0],F=T[1];m._validateVideoSendSettings(O,F)})}},{key:"updateSendSettings",value:function(p){var m=this;return this.validateUpdateSendSettings(p),this.needsLoad()?(this._preloadCache.sendSettings=p,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(_,T){m.sendMessageToCallMachine({action:"update-send-settings",sendSettings:p},function(O){O.error?T(O.error):_(O.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return Ye(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(p){return Ye(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:p}),this}},{key:"activeSpeakerMode",value:function(){return Ye(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(p){return _n(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=p,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:p}),this}},{key:"enumerateDevices",value:(a=Ee(function*(){var p=this;return this._callObjectMode?{devices:(yield navigator.mediaDevices.enumerateDevices()).map(function(m){return JSON.parse(JSON.stringify(m))})}:new Promise(function(m){p.sendMessageToCallMachine({action:"enumerate-devices"},function(_){m({devices:_.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(_n(this._callState,"sendAppMessage()"),JSON.stringify(p).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:p,to:m}),this}},{key:"addFakeParticipant",value:function(p){return Ye(),_n(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(ct({action:"add-fake-participant"},p)),this}},{key:"setShowNamesMode",value:function(p){return An(this._callObjectMode,"setShowNamesMode()"),Ye(),p&&p!=="always"&&p!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:p}),this)}},{key:"setShowLocalVideo",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return An(this._callObjectMode,"setShowLocalVideo()"),Ye(),_n(this._callState,"setShowLocalVideo()"),typeof p!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:p}),this._showLocalVideo=p,this)}},{key:"showLocalVideo",value:function(){return An(this._callObjectMode,"showLocalVideo()"),Ye(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return An(this._callObjectMode,"setShowParticipantsBar()"),Ye(),_n(this._callState,"setShowParticipantsBar()"),typeof p!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:p}),this._showParticipantsBar=p,this)}},{key:"showParticipantsBar",value:function(){return An(this._callObjectMode,"showParticipantsBar()"),Ye(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return Ye(),An(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(p){return Ye(),An(this._callObjectMode,"setCustomIntegrations()"),_n(this._callState,"setCustomIntegrations()"),BE(p)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:p}),this._customIntegrations=p,this):this}},{key:"startCustomIntegrations",value:function(p){var m=this;if(Ye(),An(this._callObjectMode,"startCustomIntegrations()"),_n(this._callState,"startCustomIntegrations()"),Array.isArray(p)&&p.some(function(O){return typeof O!="string"})||!Array.isArray(p)&&typeof p!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var _=typeof p=="string"?[p]:p,T=_.filter(function(O){return!(O in m._customIntegrations)});return T.length?(console.error(`Can't find custom integration(s): "`.concat(T.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:_}),this)}},{key:"stopCustomIntegrations",value:function(p){var m=this;if(Ye(),An(this._callObjectMode,"stopCustomIntegrations()"),_n(this._callState,"stopCustomIntegrations()"),Array.isArray(p)&&p.some(function(O){return typeof O!="string"})||!Array.isArray(p)&&typeof p!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var _=typeof p=="string"?[p]:p,T=_.filter(function(O){return!(O in m._customIntegrations)});return T.length?(console.error(`Can't find custom integration(s): "`.concat(T.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:_}),this)}},{key:"customTrayButtons",value:function(){return An(this._callObjectMode,"customTrayButtons()"),Ye(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(p){return An(this._callObjectMode,"updateCustomTrayButtons()"),Ye(),_n(this._callState,"updateCustomTrayButtons()"),UE(p)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:p}),this._customTrayButtons=p,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(wu))),this)}},{key:"theme",value:function(){return An(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(p){var m=this;return An(this._callObjectMode,"setTheme()"),new Promise(function(_,T){try{m.validateProperties({theme:p}),m.properties.theme=ct({},p),m.sendMessageToCallMachine({action:"set-theme",theme:m.properties.theme});try{m.emit(Wy,{action:Wy,theme:m.properties.theme})}catch(O){console.log("could not emit 'theme-updated'",O)}_(m.properties.theme)}catch(O){T(O)}})}},{key:"detectAllFaces",value:function(){var p=this;return Ye(),new Promise(function(m){p.sendMessageToCallMachine({action:"detect-all-faces"},function(_){delete _.action,delete _.callbackStamp,m(_)})})}},{key:"requestFullscreen",value:(o=Ee(function*(){if(Ye(),this._iframe&&!document.fullscreenElement&&n_())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(p){console.log("could not make video call fullscreen",p)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){Ye(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(s=Ee(function*(){var p=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(m){p.sendMessageToCallMachine({action:"get-sidebar-view"},function(_){m(_.view)})})}),function(){return s.apply(this,arguments)})},{key:"setSidebarView",value:function(p){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:p}),this)}},{key:"room",value:(i=Ee(function*(){var p=this,m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,_=m===void 0||m;return this._accessState.access===hh||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(T){p.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:_},function(O){delete O.action,delete O.callbackStamp,T(O)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(r=Ee(function*(){return new Promise(function(){var p=Ee(function*(m){try{var _=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");m({current:(yield _.json()).geo})}catch(T){console.error("geo lookup failed",T),m({current:""})}});return function(m){return p.apply(this,arguments)}}())}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=Ee(function*(p){var m=this;return Ye(),new Promise(function(){var _=Ee(function*(T,O){m.sendMessageToCallMachine({action:"set-network-topology",opts:p},function(F){F.error?O({error:F.error}):T({workerId:F.workerId})})});return function(T,O){return _.apply(this,arguments)}}())}),function(p){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=Ee(function*(){var p=this;return new Promise(function(){var m=Ee(function*(_,T){p.sendMessageToCallMachine({action:"get-network-topology"},function(O){O.error?T({error:O.error}):_({topology:O.topology})})});return function(_,T){return m.apply(this,arguments)}}())}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(p){if(Ye(),typeof p!="number"&&p!==!0&&p!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(p));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:p})}},{key:"on",value:function(p,m){return this._inputEventsOn[p]={},this.sendMessageToCallMachine({action:Sl,on:p}),Er.prototype.on.call(this,p,m)}},{key:"once",value:function(p,m){return this._inputEventsOn[p]={},this.sendMessageToCallMachine({action:Sl,on:p}),Er.prototype.once.call(this,p,m)}},{key:"off",value:function(p,m){return delete this._inputEventsOn[p],this.isDestroyed()||this.sendMessageToCallMachine({action:Sl,off:p}),Er.prototype.off.call(this,p,m)}},{key:"validateProperties",value:function(p){for(var m in p){if(!Di[m])throw new Error("unrecognized property '".concat(m,"'"));if(Di[m].validate&&!Di[m].validate(p[m],this))throw new Error("property '".concat(m,"': ").concat(Di[m].help))}}},{key:"assembleMeetingUrl",value:function(){var p,m,_=ct(ct({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href),proxy:(p=window._dailyConfig)!==null&&p!==void 0&&p.proxyUrl?encodeURIComponent((m=window._dailyConfig)===null||m===void 0?void 0:m.proxyUrl):void 0}),T=_.url.match(/\?/)?"&":"?";return _.url+T+Object.keys(Di).filter(function(O){return Di[O].queryString&&_[O]!==void 0}).map(function(O){return"".concat(Di[O].queryString,"=").concat(_[O])}).join("&")}},{key:"needsLoad",value:function(){return[$y,zy,$r,zr].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(p,m){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(p,m,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(p){this._messageChannel.forwardPackagedMessageToCallMachine(p,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(p){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(p,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(p){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(p)}},{key:"handleMessageFromCallMachine",value:function(p){switch(p.action){case cL:this.sendMessageToCallMachine(ct({action:lL},this.properties));break;case"daily-main-executed":this._dailyMainExecuted=!0;case fh:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case hL:this._joinedCallback&&(this._joinedCallback(p.participants),this._joinedCallback=null);try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case pL:case mL:if(this._callState===$r)return;if(p.participant&&p.participant.session_id){var m=p.participant.local?"local":p.participant.session_id;this._callObjectMode&&(L_(p.participant),V_(p.participant),F_(p.participant,this._participants[m]));try{this.maybeParticipantTracksStopped(this._participants[m],p.participant),this.maybeParticipantTracksStarted(this._participants[m],p.participant),this.maybeEventRecordingStopped(this._participants[m],p.participant),this.maybeEventRecordingStarted(this._participants[m],p.participant)}catch(D){console.error("track events error",D)}if(!this.compareEqualForParticipantUpdateEvent(p.participant,this._participants[m])){this._participants[m]=ct({},p.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}}}break;case gL:if(p.participant&&p.participant.session_id){var _=this._participants[p.participant.session_id];_&&this.maybeParticipantTracksStopped(_,null),delete this._participants[p.participant.session_id];try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}}break;case vL:if(!Gr(this._participantCounts,p.participantCounts)){this._participantCounts=p.participantCounts;try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}}break;case yL:var T={access:p.access};if(p.awaitingAccess&&(T.awaitingAccess=p.awaitingAccess),!Gr(this._accessState,T)){this._accessState=T;try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}}break;case _L:if(p.meetingSession){this._meetingSessionSummary=p.meetingSession;try{delete p.callFrameId,this.emit(p.action,p);var O=ct(ct({},p),{},{action:"meeting-session-updated"});this.emit(O.action,O)}catch(D){console.log("could not emit",p,D)}}break;case vh:var F,Q;this._iframe&&!p.preserveIframe&&(this._iframe.src=""),this._updateCallState(zr),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(p.errorMsg),this._loadedCallback=null),p.preserveIframe;var X=tD(p,BB);X!=null&&(F=X.error)!==null&&F!==void 0&&(Q=F.details)!==null&&Q!==void 0&&Q.sourceError&&(X.error.details.sourceError=JSON.parse(X.error.details.sourceError)),this._maybeSendToSentry(p),this._joinedCallback&&(this._joinedCallback(null,X),this._joinedCallback=null);try{this.emit(p.action,X)}catch(D){console.log("could not emit",p,D)}break;case fL:this._callState!==zr&&this._updateCallState($r),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null);try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case"selected-devices-updated":if(p.devices)try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case FL:var re=p.threshold,Pe=p.quality;if(re!==this._network.threshold||Pe!==this._network.quality){this._network.quality=Pe,this._network.threshold=re;try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}}break;case BL:if(p&&p.cpuLoadState)try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case LL:var Je=p.activeSpeaker;if(this._activeSpeaker.peerId!==Je.peerId){this._activeSpeaker.peerId=Je.peerId;try{this.emit(p.action,{action:p.action,activeSpeaker:this._activeSpeaker})}catch(D){console.log("could not emit",p,D)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var je=p.show;this._showLocalVideo=je;try{this.emit(p.action,{action:p.action,show:je})}catch(D){console.log("could not emit",p,D)}break;case VL:var Ge=p.enabled;if(this._activeSpeakerMode!==Ge){this._activeSpeakerMode=Ge;try{this.emit(p.action,{action:p.action,enabled:this._activeSpeakerMode})}catch(D){console.log("could not emit",p,D)}}break;case wL:case SL:case EL:this._waitingParticipants=p.allWaitingParticipants;try{this.emit(p.action,{action:p.action,participant:p.participant})}catch(D){console.log("could not emit",p,D)}break;case HL:if(!Gr(this._receiveSettings,p.receiveSettings)){this._receiveSettings=p.receiveSettings;try{this.emit(p.action,{action:p.action,receiveSettings:p.receiveSettings})}catch(D){console.log("could not emit",p,D)}}break;case KL:if(!Gr(this._inputSettings,p.inputSettings)){var pt=this._getInputSettings();if(this._inputSettings=p.inputSettings,this._preloadCache.inputSettings={},!Gr(pt,this._getInputSettings()))try{this.emit(p.action,{action:p.action,inputSettings:this._getInputSettings()})}catch(D){console.log("could not emit",p,D)}}break;case"send-settings-updated":if(!Gr(this._sendSettings,p.sendSettings)){this._sendSettings=p.sendSettings,this._preloadCache.sendSettings=null;try{this.emit(p.action,{action:p.action,sendSettings:p.sendSettings})}catch(D){console.log("could not emit",p,D)}}break;case"local-audio-level":this._localAudioLevel=p.audioLevel,this.emitDailyJSEvent(p);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=p.participantsAudioLevel,this.emitDailyJSEvent(p);break;case PL:var rn=p.session_id;this._rmpPlayerState[rn]=p.playerState,this.emitDailyJSEvent(p);break;case ML:delete this._rmpPlayerState[p.session_id],this.emitDailyJSEvent(p);break;case jL:var ot=p.session_id,mt=this._rmpPlayerState[ot];mt&&this.compareEqualForRMPUpdateEvent(mt,p.remoteMediaPlayerState)||(this._rmpPlayerState[ot]=p.remoteMediaPlayerState,this.emitDailyJSEvent(p));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(p);break;case bL:var M=this._meetingSessionState.topology!==(p.meetingSessionState&&p.meetingSessionState.topology);this._meetingSessionState=Ch(p.meetingSessionState,this._callObjectMode),(this._callObjectMode||M)&&this.emitDailyJSEvent(p);break;case ph:case mh:case AL:case CL:case RL:case xL:case TL:case kL:case uL:case dL:case NL:case OL:case DL:case UL:case IL:case $L:case zL:case qL:case WL:case gh:case GL:try{this.emit(p.action,p)}catch(D){console.log("could not emit",p,D)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(p,m){var _="record";if(p&&!m.local&&m[_]===!1&&p[_]!==m[_])try{this.emit(mh,{action:mh})}catch(T){console.log("could not emit",T)}}},{key:"maybeEventRecordingStarted",value:function(p,m){var _="record";if(p&&!m.local&&m[_]===!0&&p[_]!==m[_])try{this.emit(ph,{action:ph})}catch(T){console.log("could not emit",T)}}},{key:"maybeEventTrackStopped",value:function(p,m,_,T){if(p&&(p.readyState==="ended"||!m||p.id!==m.id))try{this.emit(Zy,{action:Zy,track:p,participant:_,type:T})}catch(O){console.log("maybeEventTrackStopped: could not emit",O)}}},{key:"maybeEventTrackStarted",value:function(p,m,_,T){if(m&&(!p||p.readyState==="ended"||m.id!==p.id))try{this.emit(Jy,{action:Jy,track:m,participant:_,type:T})}catch(O){console.log("maybeEventTrackStarted: could not emit",O)}}},{key:"maybeParticipantTracksStopped",value:function(p,m){if(p)for(var _ in p.tracks)this.maybeEventTrackStopped(p.tracks[_].track,m&&m.tracks[_]?m.tracks[_].track:null,m,_)}},{key:"maybeParticipantTracksStarted",value:function(p,m){if(m)for(var _ in m.tracks)this.maybeEventTrackStarted(p&&p.tracks[_]?p.tracks[_].track:null,m.tracks[_].track,m,_)}},{key:"compareEqualForRMPUpdateEvent",value:function(p,m){var _,T;return p.state===m.state&&((_=p.settings)===null||_===void 0?void 0:_.volume)===((T=m.settings)===null||T===void 0?void 0:T.volume)}},{key:"emitDailyJSEvent",value:function(p){try{this.emit(p.action,p)}catch(m){console.log("could not emit",p,m)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(p,m){return!!Gr(p,m)&&(!p.videoTrack||!m.videoTrack||p.videoTrack.id===m.videoTrack.id&&p.videoTrack.muted===m.videoTrack.muted&&p.videoTrack.enabled===m.videoTrack.enabled)&&(!p.audioTrack||!m.audioTrack||p.audioTrack.id===m.audioTrack.id&&p.audioTrack.muted===m.audioTrack.muted&&p.audioTrack.enabled===m.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return xt()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(p){this._updateCallState(this._callState,p)}},{key:"_updateCallState",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(p!==this._callState||m!==this._isPreparingToJoin){var _=this._callState,T=this._isPreparingToJoin;this._callState=p,this._isPreparingToJoin=m;var O=this._isCallPendingOrOngoing(_,T),F=this._isCallPendingOrOngoing(this._callState,this._isPreparingToJoin);O!==F&&(this.updateKeepDeviceAwake(F),this.updateDeviceAudioMode(F),this.updateShowAndroidOngoingMeetingNotification(F),this.updateNoOpRecordingEnsuringBackgroundContinuity(F))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=H_,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:hh},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Ch(G_,this._callObjectMode),this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._remoteParticipantsAudioLevel={},this._dailyMainExecuted=!1,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(p){xt()&&this.nativeUtils().setKeepDeviceAwake(p,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(p){if(xt()&&!this.disableReactNativeAutoDeviceManagement("audio")){var m=p?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(m)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(p){if(xt()&&this.nativeUtils().setShowOngoingMeetingNotification){var m,_,T,O;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var F=this.properties.reactNativeConfig.androidInCallNotification;m=F.title,_=F.subtitle,T=F.iconName,O=F.disableForCustomOverride}O&&(p=!1),this.nativeUtils().setShowOngoingMeetingNotification(p,m,_,T,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(p){xt()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(p)}},{key:"_isCallPendingOrOngoing",value:function(p,m){return[fa,Pn].includes(p)||m}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){if(xt()){var p=window.store.getState();for(var m in p.streams){var _=p.streams[m];_&&_.pendingTrack&&_.pendingTrack.kind==="audio"&&(_.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(p){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[p]}},{key:"absoluteUrl",value:function(p){if(p!==void 0){var m=document.createElement("a");return m.href=p,m.href}}},{key:"sayHello",value:function(){var p="hello, world.";return console.log(p),p}},{key:"_logUseAfterDestroy",value:function(){if(this.needsLoad())if(_r&&!_r.needsLoad()){var p={action:_h,level:"error",code:this.strictMode?9995:9997};_r.sendMessageToCallMachine(p)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var m={action:_h,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(m,null,this._iframe,this._callFrameId)}}},{key:"_logDuplicateInstanceAttempt",value:function(){_r.needsLoad()?this.strictMode||console.error("You are attempting to use multiple call instances simultaneously. This is unsupported and will result in unknown errors. Previous instances should be destroyed before creating new ones. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix these attempts."):_r.sendMessageToCallMachine({action:_h,level:"error",code:this.strictMode?9990:9992})}},{key:"_maybeSendToSentry",value:function(p){var m,_,T,O,F,Q;if(!((m=p.error)!==null&&m!==void 0&&m.type&&!["connection-error","end-of-life","no-room"].includes(p.error.type))){var X=(_=this.properties)!==null&&_!==void 0&&_.url?new URL(this.properties.url):void 0,re="production";X&&X.host.includes(".staging.daily")&&(re="staging");var Pe,Je,je,Ge,pt,rn=new YD({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:JD,integrations:[new iL.GlobalHandlers({onunhandledrejection:!1})],environment:re}),ot=new rm(rn,void 0,me.version());if(this.session_id&&ot.setExtra("sessionId",this.session_id),this.properties){var mt=ct({},this.properties);mt.userName=mt.userName?"[Filtered]":void 0,mt.userData=mt.userData?"[Filtered]":void 0,mt.token=mt.token?"[Filtered]":void 0,ot.setExtra("properties",mt)}if(X){var M=X.searchParams.get("domain");if(!M){var D=X.host.match(/(.*?)\./);M=D&&D[1]||""}M&&ot.setTag("domain",M)}p.error&&(ot.setTag("fatalErrorType",p.error.type),ot.setExtra("errorDetails",p.error.details),!((Pe=p.error.details)===null||Pe===void 0)&&Pe.uri&&ot.setTag("serverAddress",p.error.details.uri),!((Je=p.error.details)===null||Je===void 0)&&Je.workerGroup&&ot.setTag("workerGroup",p.error.details.workerGroup),!((je=p.error.details)===null||je===void 0)&&je.geoGroup&&ot.setTag("geoGroup",p.error.details.geoGroup),!((Ge=p.error.details)===null||Ge===void 0)&&Ge.bundleUrl&&ot.setTag("bundleUrl",p.error.details.bundleUrl),!((pt=p.error.details)===null||pt===void 0)&&pt.on&&ot.setTag("connectionAttempt",p.error.details.on)),ot.setTags({callMode:this._callObjectMode?xt()?"reactNative":(T=this.properties)!==null&&T!==void 0&&(O=T.dailyConfig)!==null&&O!==void 0&&(F=O.callMode)!==null&&F!==void 0&&F.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:me.version()});var H=((Q=p.error)===null||Q===void 0?void 0:Q.msg)||p.errorMsg;ot.run(function(ae){ae.captureException(new Error(H))})}}}],[{key:"supportedBrowser",value:function(){if(xt())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var p=hD.getParser(dr());return{supported:!!r_(),mobile:p.getPlatformType()==="mobile",name:p.getBrowserName(),version:p.getBrowserVersion(),supportsFullscreen:!!n_(),supportsScreenShare:!!ZL(),supportsSfu:!!r_(),supportsVideoProcessing:nE(),supportsAudioProcessing:rE()}}},{key:"version",value:function(){return"0.55.1"}},{key:"createCallObject",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return p.layout="none",new me(null,p)}},{key:"wrap",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ye(),!p||!p.contentWindow||typeof p.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return m.layout||(m.customLayout?m.layout="custom-v1":m.layout="browser"),new me(p,m)}},{key:"createFrame",value:function(p,m){var _,T;Ye(),p&&m?(_=p,T=m):p&&p.append?(_=p,T={}):(_=document.body,T=p||{});var O=T.iframeStyle;O||(O=_===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var F=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?F.allow="microphone, camera":F.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",F.style.visibility="hidden",_.appendChild(F),F.style.visibility=null,Object.keys(O).forEach(function(Q){return F.style[Q]=O[Q]}),T.layout||(T.customLayout?T.layout="custom-v1":T.layout="browser");try{return new me(F,T)}catch(Q){throw _.removeChild(F),Q}}},{key:"createTransparentFrame",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ye();var m=document.createElement("iframe");return m.allow="microphone; camera; autoplay",m.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(m),p.layout||(p.layout="custom-v1"),me.wrap(m,p)}},{key:"getCallInstance",value:function(){return _r}}]),me})();function js(n){var e={};for(var t in n)n[t]instanceof MediaStreamTrack?e[t]=wa:(t==="dailyConfig"&&(n[t].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=n[t].modifyLocalSdpHook),delete n[t].modifyLocalSdpHook),n[t].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=n[t].modifyRemoteSdpHook),delete n[t].modifyRemoteSdpHook)),e[t]=n[t]);return e}function _n(n){var e=arguments.length>2?arguments[2]:void 0;if(n!==Pn){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(t+=" ".concat(e)),console.error(t),new Error(t)}}function Yn(n){if(!n){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function An(n){if(n){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function Ye(){if(xt())throw new Error("This daily-js method is not currently supported in React Native")}function ma(){if(!xt())throw new Error("This daily-js method is only supported in React Native")}function OE(n){if(n===void 0)return!0;var e;if(typeof n=="string")e=n;else try{e=JSON.stringify(n),Gr(JSON.parse(e),n)||console.warn("The userData provided will be modified when serialized.")}catch(t){throw Error("userData must be serializable to JSON: ".concat(t))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function DE(n,e){for(var t=e.allowAllParticipantsKey,r=function(f){var y=["local"];return t||y.push("*"),f&&!y.includes(f)},i=function(f){return!!(f.layer===void 0||Number.isInteger(f.layer)&&f.layer>=0||f.layer==="inherit")},s=function(f){return!!f&&!(f.video&&!i(f.video))&&!(f.screenVideo&&!i(f.screenVideo))},o=0,a=Object.entries(n);o<a.length;o++){var c=as(a[o],2),u=c[0],h=c[1];if(!r(u)||!s(h))return!1}return!0}function jf(n){return wt(n)==="object"&&!!(n.video&&wt(n.video)==="object"||n.audio&&wt(n.audio)==="object")&&!(n.video&&!function(i){var s=["type","config"];return!i||wt(i)!=="object"||!function(o){return typeof o!="string"?!1:Object.values(Dl).includes(o)?!0:(console.error("inputSettings video processor type invalid"),!1)}(i.type)||i.config&&(wt(i.config)!=="object"||!function(o,a){var c=Object.keys(a);if(c.length===0)return!0;var u="invalid object in inputSettings -> video -> processor -> config";switch(o){case Dl.BGBLUR:return c.length>1||c[0]!=="strength"?(console.error(u),!1):!(typeof a.strength!="number"||a.strength<=0||a.strength>1||isNaN(a.strength))||(console.error("".concat(u,"; expected: {0 < strength <= 1}, got: ").concat(a.strength)),!1);case Dl.BGIMAGE:return!(a.source!==void 0&&!function(h){if(h.source==="default")return h.type="default",!0;if(ic(h.source))return h.type="url",!!function(b){var E=new URL(b),C=E.pathname;if(E.protocol==="data:")try{var N=C.substring(C.indexOf(":")+1,C.indexOf(";")).split("/")[1];return bh.includes(N)}catch(V){return console.error("failed to deduce blob content type",V),!1}var $=C.split(".").at(-1).toLowerCase().trim();return bh.includes($)}(h.source)||(console.error("invalid image type; supported types: [".concat(bh.join(", "),"]")),!1);return f=h.source,y=Number(f),isNaN(y)||!Number.isInteger(y)||y<=0||y>t_?(console.error("invalid image selection; must be an int, > 0, <= ".concat(t_)),!1):(h.type="daily-preselect",!0);var f,y}(a));default:return!0}}(i.type,i.config))?!1:(Object.keys(i).filter(function(o){return!s.includes(o)}).forEach(function(o){console.warn("invalid key inputSettings -> video -> processor : ".concat(o)),delete i[o]}),!0)}(n.video.processor))&&!(n.audio&&(t=n.audio.processor,r=["type"],!t||wt(t)!=="object"||(Object.keys(t).filter(function(i){return!r.includes(i)}).forEach(function(i){console.warn("invalid key inputSettings -> audio -> processor : ".concat(i)),delete t[i]}),e=t.type,typeof e!="string"||!Object.values(eE).includes(e)&&(console.error("inputSettings audio processor type invalid"),1))));var e,t,r}function LE(n){var e=[];n.video&&!nE()&&(delete n.video,e.push("video")),n.audio&&!rE()&&(delete n.audio,e.push("audio")),e.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(e.join(", ")))}function Mf(){var n=Object.values(Dl).join(" | "),e=Object.values(eE).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(n," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function VE(n){var e=n.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(oL).concat(e?' | "'.concat(aL,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function FE(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Pf),".")}function UE(n){if(n&&wt(n)!=="object"||Array.isArray(n))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(wu),".")),!1;if(n)for(var e=0,t=Object.entries(n);e<t.length;e++)for(var r=as(t[e],1)[0],i=0,s=Object.entries(n[r]);i<s.length;i++){var o=as(s[i],2),a=o[0],c=o[1];if(a==="iconPath"&&!ic(c)||a==="iconPathDarkMode"&&!ic(c))return console.error("customTrayButton ".concat(a," should be a url.")),!1;var u=wu.id[a];if(!u)return console.error("customTrayButton does not support key ".concat(a)),!1;if(wt(c)!==u)return console.error("customTrayButton ".concat(a," should be a ").concat(u,".")),!1}return!0}function BE(n){if(!n||n&&wt(n)!=="object"||Array.isArray(n))return console.error(FE()),!1;for(var e=function(f){return"".concat(f," should be ").concat(Pf.id[f])},t=function(f,y){return console.error("customIntegration ".concat(f,": ").concat(y))},r=0,i=Object.entries(n);r<i.length;r++){var s=as(i[r],1)[0];if(!("label"in n[s]))return t(s,"label is required"),!1;if(!("location"in n[s]))return t(s,"location is required"),!1;if(!("src"in n[s])&&!("srcdoc"in n[s]))return t(s,"src or srcdoc is required"),!1;for(var o=0,a=Object.entries(n[s]);o<a.length;o++){var c=as(a[o],2),u=c[0],h=c[1];switch(u){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof h!="string")return t(s,e(u)),!1;break;case"iconURL":if(!ic(h))return t(s,"".concat(u," should be a url")),!1;break;case"src":if("srcdoc"in n[s])return t(s,"cannot have both src and srcdoc"),!1;if(!ic(h))return t(s,'src "'.concat(h,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in n[s])return t(s,"cannot have both src and srcdoc"),!1;if(typeof h!="string")return t(s,e(u)),!1;break;case"location":if(!["main","sidebar"].includes(h))return t(s,e(u)),!1;break;case"controlledBy":if(h!=="*"&&h!=="owners"&&(!Array.isArray(h)||h.some(function(f){return typeof f!="string"})))return t(s,e(u)),!1;break;case"shared":if((!Array.isArray(h)||h.some(function(f){return typeof f!="string"}))&&h!=="owners"&&typeof h!="boolean")return t(s,e(u)),!1;break;default:if(!Pf.id[u])return console.error("customIntegration does not support key ".concat(u)),!1}}}return!0}function $E(n,e){if(e===void 0)return!1;switch(wt(e)){case"string":return wt(n)===e;case"object":if(wt(n)!=="object")return!1;for(var t in n)if(!$E(n[t],e[t]))return!1;return!0;default:return!1}}function J_(n){if(wt(n)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(n.state&&!Object.values(Sf).includes(n.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Sf));if(n.volume){if(typeof n.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(n.volume<0||n.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Z_(n,e,t){return!(typeof n!="number"||n<e||n>t)}function Ch(n,e){return n&&!e&&delete n.data,n}function Q_(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(u){t(u);return}a.done?e(c):Promise.resolve(c).then(r,i)}function qB(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){Q_(s,r,i,o,a,"next",c)}function a(c){Q_(s,r,i,o,a,"throw",c)}o(void 0)})}}function dc(){return dc=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dc.apply(this,arguments)}function zE(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function WB(n,e){if(n){if(typeof n=="string")return X_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X_(n,e)}}function X_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eb(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=WB(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var GB=R.createContext(null),mm=function(){var e=R.useContext(GB);return e},qE=R.createContext({on:function(){},off:function(){}}),HB=0,Of=function(){return HB++},Vl=function(e,t){var r=R.useContext(qE),i=r.off,s=r.on,o=R.useState(!1),a=o[0],c=o[1],u=R.useRef(0),h=R.useMemo(function(){return Of()},[]);R.useEffect(function(){if(!(!e||a)){if(u.current>1e5){console.error(`useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.
        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.
        Passed callback for '`+e+"' event is NOT registered.",t),c(!0);return}u.current++;var f=setTimeout(function(){u.current=0},50);return s(e,t,h),function(){clearTimeout(f),i(e,h)}}},[t,e,h,a,i,s])},Or="daily-react-",Qi=nS({key:Or+"participant-property",default:null,dangerouslyAllowMutability:!0}),Fl=nf({key:Or+"participant-properties",get:function(e){var t=e.id,r=e.properties;return function(i){var s=i.get;return r.map(function(o){return s(Qi({id:t,property:o}))})}},dangerouslyAllowMutability:!0}),WE=function(e,t){var r=Ic(Array.isArray(t)?Fl({id:e,properties:t}):Qi({id:e,property:t}));return r},GE=function(e,t,r){r===void 0&&(r=500);var i=R.useContext(qE),s=i.off,o=i.on,a=R.useMemo(function(){var h;return Array.isArray(e)?e.reduce(function(f,y){return f[y]=Of(),f},{}):(h={},h[e]=Of(),h)},[e]),c=R.useRef([]);Vl("call-instance-destroyed",R.useCallback(function(){c.current.length=0},[]));var u=R.useMemo(function(){return eD(function(){c.current.length!==0&&(t(c.current),c.current.length=0)},r,{trailing:!0})},[t,r]);R.useEffect(function(){if(e){var h=function(y){c.current.push(y),u()};return Array.isArray(e)?e.forEach(function(f){return o(f,h,a[f])}):o(e,h,a[e]),function(){Array.isArray(e)?e.forEach(function(f){return s(f,a[f])}):s(e,a[e])}}},[u,e,a,s,o])};function no(n,e){if(n===e)return!0;if(n instanceof MediaStream&&e instanceof MediaStream)return n.id===e.id&&n.active===e.active&&n.getTracks().length===e.getTracks().length&&n.getTracks().every(function(C,N){return no(C,e.getTracks()[N])});if(n instanceof MediaStreamTrack&&e instanceof MediaStreamTrack)return n.id===e.id&&n.kind===e.kind&&n.readyState===e.readyState;if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(n instanceof RegExp&&e instanceof RegExp)return n.source===e.source&&n.flags===e.flags;if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(var t=eb(n.values()),r;!(r=t()).done;){var i=r.value;if(!e.has(i))return!1}return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(var s=eb(n.entries()),o;!(o=s()).done;){var a=o.value,c=a[0],u=a[1];if(!e.has(c)||!no(u,e.get(c)))return!1}return!0}if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var h=Object.keys(n),f=Object.keys(e);if(h.length!==f.length)return!1;for(var y=0,b=h;y<b.length;y++){var E=b[y];if(!(E in e)||!no(n[E],e[E]))return!1}return!0}function KB(n){var e=tf({key:n.key+"_inner",get:n.get}),t;return tf({key:n.key,get:function(i){var s=i.get,o=s(e);return t!=null&&n.equals(o,t)?t:(t=o,o)}})}function YB(n){var e=nf({key:n.key+"_inner",get:n.get}),t=new Map;return nf(dc({},n,{key:n.key,get:function(i){return function(s){var o=s.get,a=o(e(i)),c=t.get(i);return c!=null&&n.equals(a,c)?c:(t.set(i,a),a)}}}))}var JB=Up({key:Or+"active-id",default:null}),ZB=Up({key:Or+"local-id",default:""}),HE=Up({key:Or+"participant-ids",default:[]}),KE=nS({key:Or+"participant-state",default:null,dangerouslyAllowMutability:!0}),QB=tf({key:Or+"participants",get:function(e){var t=e.get,r=t(HE),i=r.map(function(s){return t(KE(s))}).filter(Boolean);return i},dangerouslyAllowMutability:!0}),gm=function(){return Ic(ZB)},XB=function(){return!0},e4=function(e){var t=e===void 0?{}:e,r=t.filter,i=r===void 0?XB:r,s=t.ignoreLocal,o=s===void 0?!1:s,a=gm(),c=Ic(JB),u=R.useState(null),h=u[0],f=u[1];return R.useEffect(function(){o&&c===a||i!=null&&i(c)&&f(c)},[i,a,o,c]),h},Su=function(e){return["blocked","off"].includes(e)},YE=YB({key:Or+"participant-ids-filtered-sorted",equals:no,get:function(e){var t=e.filter,r=e.sort;return function(i){var s=i.get,o=s(HE);return o.filter(function(a){switch(t){case"local":case"owner":case"record":return s(Qi({id:a,property:t}));case"remote":return!s(Qi({id:a,property:"local"}));case"screen":{var c=s(Fl({id:a,properties:["tracks.screenAudio.state","tracks.screenVideo.state"]})),u=c[0],h=c[1];return!Su(u)||!Su(h)}default:return!0}}).sort(function(a,c){switch(r){case"joined_at":case"session_id":case"user_id":case"user_name":{var u=s(Fl({id:a,properties:[r]})),h=u[0],f=s(Fl({id:c,properties:[r]})),y=f[0];if(h!==void 0||y!==void 0){if(h===void 0)return-1;if(y===void 0||h>y)return 1;if(h<y)return-1}return 0}default:return 0}})}}}),JE=function(e){var t=e===void 0?{}:e,r=t.filter,i=t.onActiveSpeakerChange,s=t.onParticipantJoined,o=t.onParticipantLeft,a=t.onParticipantUpdated,c=t.sort,u=Ic(YE({filter:typeof r=="string"?r:null,sort:typeof c=="string"?c:null})),h=rS(function(C){var N=C.snapshot;return function(){if(typeof r!="function"&&typeof c!="function")return[];var $=u.map(function(V){return N.getLoadable(KE(V)).contents});return $.filter(Boolean).filter(typeof r=="function"?r:function(){return!0}).sort(typeof c=="function"?c:function(){return 0}).map(function(V){return V.session_id}).filter(Boolean)}},[r,u,c]),f=R.useState([]),y=f[0],b=f[1],E=R.useCallback(function(){var C=h();no(C,y)||b(C)},[y,h]);return R.useEffect(function(){E()},[E]),GE(["participant-joined","participant-updated","active-speaker-change","participant-left"],R.useCallback(function(C){C.length&&(C.forEach(function(N){switch(N.action){case"participant-joined":s==null||s(N);break;case"participant-updated":a==null||a(N);break;case"active-speaker-change":i==null||i(N);break;case"participant-left":o==null||o(N);break}}),E())},[E,i,s,o,a])),typeof r=="function"||typeof c=="function"?y:u},t4=KB({key:Or+"screen-shares",equals:no,get:function(e){var t=e.get,r=t(YE({filter:"screen",sort:null}));return r.map(function(i){return{local:t(Qi({id:i,property:"local"})),screenAudio:t(Qi({id:i,property:"tracks.screenAudio"})),screenVideo:t(Qi({id:i,property:"tracks.screenVideo"})),screenId:i+"-screen",session_id:i}})}}),ZE=function(e){var t={},r=t.onError,i=t.onLocalScreenShareStarted,s=t.onLocalScreenShareStopped,o=mm(),a=R.useCallback(function(){for(var h=arguments.length,f=new Array(h),y=0;y<h;y++)f[y]=arguments[y];o==null||o.startScreenShare.apply(o,f)},[o]),c=R.useCallback(function(){for(var h=arguments.length,f=new Array(h),y=0;y<h;y++)f[y]=arguments[y];o==null||o.stopScreenShare.apply(o,f)},[o]);Vl("local-screen-share-started",R.useCallback(function(){return i==null?void 0:i()},[i])),Vl("local-screen-share-stopped",R.useCallback(function(){return s==null?void 0:s()},[s])),Vl("nonfatal-error",R.useCallback(function(h){h.type==="screen-share-error"&&(r==null||r(h))},[r]));var u=Ic(t4);return{isSharingScreen:u.some(function(h){return h.local}),screens:u,startScreenShare:a,stopScreenShare:c}},QE=function(e,t){t===void 0&&(t="video");var r=WE(e,"tracks."+t);return r?dc({},r,{isOff:Su(r.state)}):{isOff:!0,persistentTrack:void 0,state:"off",subscribed:!1}};function XE(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return R.useCallback(function(r){for(var i=0;i<e.length;i++){var s=e[i];typeof s=="function"?s(r):s&&typeof s=="object"&&(s.current=r)}},e)}var n4=["onPlayFailed","sessionId","type"],Ul=R.memo(R.forwardRef(function(n,e){var t=n.onPlayFailed,r=n.sessionId,i=n.type,s=i===void 0?"audio":i,o=zE(n,n4),a=R.useRef(null),c=QE(r,s),u=XE(a,e);return R.useEffect(function(){var h=a.current;if(!(!h||!(c!=null&&c.persistentTrack))){var f,y=function(){f=setTimeout(function(){h.readyState===h.HAVE_ENOUGH_DATA&&!h.paused||t==null||t({sessionId:r,target:h,type:s})},1500)},b=function(){clearTimeout(f)};return h.addEventListener("canplay",y),h.addEventListener("play",b),h.srcObject=new MediaStream([c==null?void 0:c.persistentTrack]),function(){h==null||h.removeEventListener("canplay",y),h==null||h.removeEventListener("play",b)}}},[c==null?void 0:c.persistentTrack,t,r,s]),Me.createElement("audio",Object.assign({autoPlay:!0,playsInline:!0,ref:u},o,{"data-session-id":r,"data-audio-type":s}))}));Ul.displayName="DailyAudioTrack";var r4=R.memo(R.forwardRef(function(n,e){var t=n.autoSubscribeActiveSpeaker,r=t===void 0?!1:t,i=n.maxSpeakers,s=i===void 0?5:i,o=n.onPlayFailed,a=n.playLocalScreenAudio,c=a===void 0?!1:a,u=mm(),h=R.useState(new Array(s).fill("")),f=h[0],y=h[1],b=ZE(),E=b.screens,C=gm(),N=e4({ignoreLocal:!0}),$=R.useRef(null);R.useImperativeHandle(e,function(){return{getActiveSpeakerAudio:function(){var z,k;return(z=(k=$.current)==null?void 0:k.querySelector('audio[data-session-id="'+N+'"][data-audio-type="audio"]'))!=null?z:null},getAllAudio:function(){var z,k;return Array.from((z=(k=$.current)==null?void 0:k.querySelectorAll("audio"))!=null?z:[])},getAudioBySessionId:function(z){var k,S;return(k=(S=$.current)==null?void 0:S.querySelector('audio[data-session-id="'+z+'"][data-audio-type="audio"]'))!=null?k:null},getRmpAudio:function(){var z,k;return Array.from((z=(k=$.current)==null?void 0:k.querySelectorAll('audio[data-audio-type="rmpAudio"]'))!=null?z:[])},getScreenAudio:function(){var z,k;return Array.from((z=(k=$.current)==null?void 0:k.querySelectorAll('audio[data-audio-type="screenAudio"]'))!=null?z:[])},getRmpAudioBySessionId:function(z){var k,S;return(k=(S=$.current)==null?void 0:S.querySelector('audio[data-session-id="'+z+'"][data-audio-type="rmpAudio"]'))!=null?k:null},getScreenAudioBySessionId:function(z){var k,S;return(k=(S=$.current)==null?void 0:S.querySelector('audio[data-session-id="'+z+'"][data-audio-type="screenAudio"]'))!=null?k:null}}},[N]);var V=rS(function(q){var z=q.snapshot;return function(){var k=qB(function*(S){var A=(yield z.getPromise(QB)).filter(function(j){return!j.local&&!!j.tracks.audio.subscribed}),P=function(I){return A.some(function(x){return x.session_id===I})};if(!P(S))if(u&&!u.isDestroyed()&&r&&!u.subscribeToTracksAutomatically())u.updateParticipant(S,{setSubscribedTracks:{audio:!0}});else return;y(function(j){var I;if(j.includes(S))return j;var x=function(me){return!me||!P(me)};if(j.some(x)){var ye=j.findIndex(x);return j[ye]=S,[].concat(j)}var Oe=j.findIndex(function(st){return A.some(function(me){return me.session_id===st&&Su(me.tracks.audio.state)})});if(Oe>=0)return j[Oe]=S,[].concat(j);var We=A.filter(function(st){return j.includes(st.session_id)&&st.session_id!==N}).sort(function(st,me){var p,m,_=(p=st==null?void 0:st.last_active)!=null?p:new Date("1970-01-01"),T=(m=me==null?void 0:me.last_active)!=null?m:new Date("1970-01-01");return _>T?1:_<T?-1:0});if(!We.length){var Be=j.findIndex(function(st){return st!==N});return j[Be]=S,[].concat(j)}var dt=j.indexOf((I=We[0])==null?void 0:I.session_id);return j[dt]=S,[].concat(j)})});return function(S){return k.apply(this,arguments)}}()},[N,r,u]),G=R.useCallback(function(q){y(function(z){if(!z.includes(q))return z;var k=[].concat(z),S=k.indexOf(q);return k[S]="",k})},[]);GE(["active-speaker-change","track-started","participant-left"],R.useCallback(function(q){q.forEach(function(z){switch(z.action){case"active-speaker-change":if(z.activeSpeaker.peerId===C)return;V(z.activeSpeaker.peerId);break;case"track-started":z.track.kind==="audio"&&z.participant&&!z.participant.local&&V(z.participant.session_id);break;case"participant-left":G(z.participant.session_id);break}})},[V,C,G]),200);var J=JE({filter:R.useCallback(function(q){var z;return!!(!(q==null||(z=q.tracks)==null)&&z.rmpAudio)},[])});return Me.createElement("div",{ref:$},f.map(function(q,z){return Me.createElement(Ul,{key:"speaker-slot-"+z,onPlayFailed:o,sessionId:q,type:"audio"})}),E.filter(function(q){return c?!0:!q.local}).map(function(q){return Me.createElement(Ul,{key:q.screenId,onPlayFailed:o,sessionId:q.session_id,type:"screenAudio"})}),J.map(function(q){return Me.createElement(Ul,{key:q+"-rmp",onPlayFailed:o,sessionId:q,type:"rmpAudio"})}))}));r4.displayName="DailyAudio";var i4=["automirror","fit","mirror","onResize","playableStyle","sessionId","style","type"],s4=R.forwardRef(function(n,e){var t=n.automirror,r=n.fit,i=r===void 0?"contain":r,s=n.mirror,o=n.onResize,a=n.playableStyle,c=a===void 0?{}:a,u=n.sessionId,h=n.style,f=h===void 0?{}:h,y=n.type,b=y===void 0?"video":y,E=zE(n,i4),C=gm(),N=C===u,$=b==="screenVideo",V=N&&!$,G=R.useRef(null),J=XE(G,e),q=QE(u,b),z=q.persistentTrack,k=V||$||!q.isOff,S=WE(u,"tracks."+b),A=S==null?void 0:S.subscribed,P=R.useMemo(function(){if(typeof s=="boolean")return s;if(!t)return!1;if(!z)return V;var j=z.getSettings(),I="facingMode"in j?V&&j.facingMode==="user":V;return I},[t,V,s,z]);return R.useEffect(function(){var I=G.current;if(I){var x=function(){var st=I.play();st!==void 0&&st.then(function(){I.controls=!1}).catch(function(me){I.controls=!0,console.warn("Failed to play video",me)})},ye=function(){I.paused&&x()},Oe=function(){I.style.transform="scale(1)"},We=function(){I.style.transform="",setTimeout(function(){I.paused&&x()},100)},Be=function(){document.visibilityState!=="hidden"&&I.paused&&x()};return I.addEventListener("canplay",ye),I.addEventListener("enterpictureinpicture",Oe),I.addEventListener("leavepictureinpicture",We),document.addEventListener("visibilitychange",Be),function(){I.removeEventListener("canplay",ye),I.removeEventListener("enterpictureinpicture",Oe),I.removeEventListener("leavepictureinpicture",We),document.removeEventListener("visibilitychange",Be)}}},[]),R.useEffect(function(){var I=G.current;if(!(!I||!z))return I.srcObject=new MediaStream([z]),I.load(),function(){I.srcObject=null,I.load()}},[z,z==null?void 0:z.id]),R.useEffect(function(){var I=G.current;if(!o||!I)return;var x;function ye(){x&&cancelAnimationFrame(x),x=requestAnimationFrame(function(){var Oe=G.current;if(!(!Oe||document.hidden)){var We=Oe.videoWidth,Be=Oe.videoHeight;We&&Be&&(o==null||o({aspectRatio:We/Be,height:Be,width:We}))}})}return ye(),I.addEventListener("loadedmetadata",ye),I.addEventListener("resize",ye),function(){x&&cancelAnimationFrame(x),I.removeEventListener("loadedmetadata",ye),I.removeEventListener("resize",ye)}},[o]),Me.createElement("video",Object.assign({autoPlay:!0,muted:!0,playsInline:!0,ref:J,"data-local":N,"data-mirrored":P||void 0,"data-playable":k||void 0,"data-session-id":u,"data-subscribed":A,"data-video-type":b,style:dc({objectFit:i,transform:P?"scale(-1, 1)":""},f,k?c:{})},E))});s4.displayName="DailyVideo";/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Dr=(n,e)=>{const t=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:c,...u},h)=>R.createElement("svg",{ref:h,...o4,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${a4(n)}`,a].join(" "),...u},[...e.map(([f,y])=>R.createElement(f,y)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=Dr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Dr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=Dr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=Dr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=Dr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=Dr("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=Dr("MonitorUp",[["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}],["path",{d:"M12 13V7",key:"h0r20n"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=Dr("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Dr("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);function g4({sessionId:n,userName:e,onLeave:t,onError:r}){const i=mm(),s=JE(),{isSharingScreen:o,startScreenShare:a,stopScreenShare:c}=ZE(),[u]=R.useState(new Date),[h,f]=R.useState(!1),[y,b]=R.useState(!1),[E,C]=R.useState({quality:"excellent",latency:0}),N=R.useCallback(()=>{const q=new Date().getTime()-u.getTime();return Jt(new Date(q),"HH:mm:ss")},[u]);R.useEffect(()=>{if(!i)return;const q=S=>{console.log(`${S.participant.user_name} joined the call`)},z=S=>{console.log(`${S.participant.user_name} left the call`)},k=S=>{C({quality:S.quality,latency:S.latency})};return i.on("participant-joined",q),i.on("participant-left",z),i.on("network-quality-change",k),()=>{i.off("participant-joined",q),i.off("participant-left",z),i.off("network-quality-change",k)}},[i]);const $=R.useCallback(()=>{i&&(i.setLocalAudio(!h),f(!h))},[i,h]),V=R.useCallback(()=>{i&&(i.setLocalVideo(!y),b(!y))},[i,y]),G=R.useCallback(async()=>{try{o?await c():await a()}catch(q){r==null||r(q)}},[o,a,c,r]),J=R.useCallback(()=>{i&&(i.leave(),t==null||t())},[i,t]);return d.jsxs(xe,{className:"h-[600px] flex flex-col bg-gradient-to-br from-primary-50 to-white",children:[d.jsxs("div",{className:"p-6 border-b border-primary-100 flex justify-between items-center",children:[d.jsx(He,{className:"text-primary-800",children:"Video Consultation"}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(Lt,{color:E.quality==="excellent"?"green":E.quality==="good"?"yellow":"red",size:"sm",children:[E.quality," (",E.latency,"ms)"]}),d.jsx(ie,{className:"font-mono",children:N()})]})]}),d.jsx("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 p-6 bg-gray-50",children:s.map(q=>d.jsxs("div",{className:"relative aspect-video bg-gray-900 rounded-xl overflow-hidden shadow-lg",children:[d.jsx("video",{autoPlay:!0,muted:q==="local",playsInline:!0,className:"w-full h-full object-cover"}),d.jsx("div",{className:"absolute bottom-3 left-3 bg-black/60 backdrop-blur-sm text-white px-3 py-1.5 text-sm font-medium rounded-full",children:q==="local"?e:"Participant"})]},q))}),d.jsx("div",{className:"border-t border-primary-100 bg-white p-6",children:d.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[d.jsx(jt,{onClick:$,variant:h?"destructive":"outline",className:"rounded-full w-14 h-14 p-0 flex items-center justify-center",children:d.jsx(f4,{className:"h-5 w-5"})}),d.jsx(jt,{onClick:V,variant:y?"destructive":"outline",className:"rounded-full w-14 h-14 p-0 flex items-center justify-center",children:d.jsx(Eu,{className:"h-5 w-5"})}),d.jsx(jt,{onClick:G,variant:o?"destructive":"outline",className:"rounded-full w-14 h-14 p-0 flex items-center justify-center",children:d.jsx(p4,{className:"h-5 w-5"})}),d.jsx(jt,{onClick:J,variant:"destructive",className:"rounded-full w-14 h-14 p-0 flex items-center justify-center",children:d.jsx(m4,{className:"h-5 w-5"})})]})})]})}function v4(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function y4(...n){return e=>n.forEach(t=>v4(t,e))}var ex=R.forwardRef((n,e)=>{const{children:t,...r}=n,i=R.Children.toArray(t),s=i.find(b4);if(s){const o=s.props.children,a=i.map(c=>c===s?R.Children.count(o)>1?R.Children.only(null):R.isValidElement(o)?o.props.children:null:c);return d.jsx(Df,{...r,ref:e,children:R.isValidElement(o)?R.cloneElement(o,void 0,a):null})}return d.jsx(Df,{...r,ref:e,children:t})});ex.displayName="Slot";var Df=R.forwardRef((n,e)=>{const{children:t,...r}=n;if(R.isValidElement(t)){const i=S4(t);return R.cloneElement(t,{...w4(r,t.props),ref:e?y4(e,i):i})}return R.Children.count(t)>1?R.Children.only(null):null});Df.displayName="SlotClone";var _4=({children:n})=>d.jsx(d.Fragment,{children:n});function b4(n){return R.isValidElement(n)&&n.type===_4}function w4(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function S4(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const Lf=TS("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8"}},defaultVariants:{variant:"default",size:"default"}}),E4=R.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,isLoading:i,children:s,...o},a)=>{const c=r?ex:"button";return d.jsx(c,{className:ir(Lf({variant:e,size:t,className:n})),ref:a,disabled:i||o.disabled,...o,children:i?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s})});E4.displayName="Button";function tx({className:n,classNames:e,showOutsideDays:t=!0,...r}){return d.jsx(Ak,{showOutsideDays:t,className:ir("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ir(Lf({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:ir("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:ir(Lf({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>d.jsx(l4,{className:"h-4 w-4"}),IconRight:({...i})=>d.jsx(u4,{className:"h-4 w-4"})},...r})}tx.displayName="Calendar";function x4({consultantId:n,onSchedule:e}){const[t,r]=R.useState(void 0),[i,s]=R.useState(void 0),o=[{time:"09:00",available:!0},{time:"10:00",available:!0},{time:"11:00",available:!1},{time:"14:00",available:!0},{time:"15:00",available:!0},{time:"16:00",available:!0}],a=()=>{if(t&&i){const c=Rk(i,"HH:mm",t);e(c,i)}};return d.jsxs(xe,{className:"bg-white shadow-lg border border-gray-200",children:[d.jsx(He,{children:"Schedule Consultation"}),d.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx("div",{children:d.jsx(tx,{mode:"single",selected:t,onSelect:r,disabled:c=>c<new Date||c>Ck(new Date,30),className:"rounded-lg border border-gray-200 shadow-sm p-3 bg-white"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:"Available Time Slots"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(c=>d.jsx("button",{onClick:()=>s(c.time),disabled:!c.available,className:`
                  p-2 text-sm rounded-lg border transition-all duration-200
                  ${!c.available&&"opacity-50 cursor-not-allowed bg-muted"}
                  ${i===c.time?"bg-primary-50 border-primary-500 text-primary-700 shadow-sm":"hover:bg-gray-50 hover:border-gray-300"}
                `,children:c.time},c.time))}),t&&i&&d.jsxs("div",{className:"mt-6",children:[d.jsxs("p",{className:"text-sm text-gray-600",children:["Selected time: ",Jt(t,"MMM d, yyyy")," at ",i]}),d.jsx(jt,{variant:"primary",className:"mt-2 w-full",onClick:a,children:"Schedule Consultation"})]})]})]})]})}function T4({consultations:n}){return d.jsxs(xe,{children:[d.jsx(He,{children:"Consultation History"}),d.jsx("div",{className:"mt-4 space-y-4",children:n.map(e=>d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 bg-accent rounded-full",children:d.jsx(Eu,{className:"h-5 w-5 text-primary"})}),d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium",children:e.participantName}),d.jsxs(ie,{className:"text-sm text-gray-500",children:[Jt(e.date,"MMM d, yyyy h:mm a")," • ",e.duration," minutes"]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:`
                px-2 py-1 text-xs rounded-full
                ${e.status==="completed"&&"bg-green-100 text-green-800"}
                ${e.status==="cancelled"&&"bg-red-100 text-red-800"}
                ${e.status==="no-show"&&"bg-yellow-100 text-yellow-800"}
              `,children:e.status}),e.recordingUrl&&d.jsxs(jt,{variant:"outline",size:"sm",className:"flex items-center space-x-1 hover:bg-accent",children:[d.jsx(h4,{className:"h-4 w-4"}),d.jsx("span",{children:"Recording"})]})]})]},e.id))})]})}function nx({userId:n,userType:e}){const[t,r]=R.useState(null),{addToast:i}=Yp(),s=[{id:"1",participantName:e==="client"?"John Doe (Consultant)":"Alice Smith (Client)",date:new Date,duration:60,recordingUrl:"https://example.com/recording-1",status:"completed"}],o=async(a,c)=>{try{await new Promise(u=>setTimeout(u,1e3)),i("Consultation scheduled successfully","success")}catch{i("Failed to schedule consultation","error")}};return d.jsx("div",{className:"space-y-6",children:t?d.jsx(g4,{sessionId:t,userName:e==="client"?"Client User":"Legal Consultant",onLeave:()=>r(null)}):d.jsxs(d.Fragment,{children:[d.jsxs(xe,{className:"bg-gradient-to-br from-primary-50 to-white shadow-lg border border-primary-100",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx(He,{className:"text-primary-800",children:"Upcoming Consultations"}),d.jsx(ie,{className:"text-primary-600",children:"Your scheduled video meetings"})]}),d.jsxs(jt,{variant:"primary",className:"flex items-center space-x-2",onClick:()=>r("test-session"),children:[d.jsx(Eu,{className:"h-4 w-4"}),d.jsx("span",{children:"Join Test Call"})]})]}),d.jsx("div",{className:"space-y-4",children:d.jsx("div",{className:"flex items-center justify-between p-6 border rounded-xl bg-white shadow-sm",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-3 bg-primary-100 rounded-full",children:d.jsx(Eu,{className:"h-5 w-5 text-primary-600"})}),d.jsxs("div",{children:[d.jsx(ie,{className:"font-semibold text-gray-900",children:"Test Consultation"}),d.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-sm text-gray-500",children:[d.jsxs("span",{className:"flex items-center",children:[d.jsx(c4,{className:"h-4 w-4 mr-1"}),"Today"]}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(d4,{className:"h-4 w-4 mr-1"}),new Date().toLocaleTimeString()]})]})]})]})})})]}),e==="client"&&d.jsx(x4,{consultantId:"mock-consultant-id",onSchedule:o}),d.jsx(T4,{consultations:s})]})})}function k4({profile:n,activeTab:e,onTabChange:t}){const[r,i]=R.useState([]);return R.useEffect(()=>{},[]),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",n.displayName]}),d.jsx("p",{className:"text-gray-600",children:"Your Personal Dashboard"})]}),d.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[d.jsxs("div",{className:"col-span-12 lg:col-span-3",children:[d.jsx(xe,{children:d.jsx(RO,{profile:n})}),d.jsx(xe,{className:"mt-6",children:d.jsx(IO,{notifications:r})})]}),d.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[d.jsx("nav",{className:"flex border-b border-gray-200",children:[["overview","Overview"],["activity","Activity"],["projects","Projects"],["documents","Documents"],["payments","Payments"],["support","Support"],["consultations","Video Consultations"],["messages","Messages"]].map(([s,o])=>d.jsx("button",{onClick:()=>t(s),className:`px-4 py-3 text-sm font-medium ${e===s?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:o},s))}),d.jsxs("div",{className:"p-6",children:[e==="overview"&&d.jsx(Dv,{userId:n.id}),e==="activity"&&d.jsx(Dv,{userId:n.id}),e==="projects"&&d.jsx(PO,{userId:n.id}),e==="documents"&&d.jsx(jO,{userId:n.id}),e==="payments"&&d.jsx(NO,{userId:n.id}),e==="support"&&d.jsx(MO,{userId:n.id}),e==="consultations"&&d.jsx(nx,{userId:n.id,userType:"client"}),e==="messages"&&d.jsx(OO,{userId:n.id})]})]})]})]})}function A4({cases:n}){const e=n.reduce((o,a)=>(o[a.status]=(o[a.status]||0)+1,o),{}),t=n.reduce((o,a)=>(o[a.practiceArea]=(o[a.practiceArea]||0)+1,o),{}),r=Array.from({length:6}).map((o,a)=>{const c=new Date;c.setMonth(c.getMonth()-a);const u=n.filter(h=>{var f,y;return((f=h.completionDate)==null?void 0:f.getMonth())===c.getMonth()&&((y=h.completionDate)==null?void 0:y.getFullYear())===c.getFullYear()}).length;return{month:c.toLocaleString("default",{month:"short"}),"Completed Cases":u}}).reverse(),i=n.reduce((o,a)=>a.completionDate?o+(a.completionDate.getTime()-a.startDate.getTime()):o,0)/n.filter(o=>o.completionDate).length,s=Math.round(i/(1e3*60*60*24));return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(e).map(([o,a])=>d.jsxs(xe,{decoration:"top",decorationColor:o==="New"?"blue":o==="InProgress"?"yellow":o==="Pending"?"orange":"green",children:[d.jsx(ie,{children:o}),d.jsx(en,{children:a})]},o))}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Practice Area Distribution"}),d.jsx(yp,{className:"mt-6",data:Object.entries(t).map(([o,a])=>({name:o,value:a})),category:"value",index:"name",colors:["blue","cyan","indigo","violet","fuchsia"]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Monthly Case Completion"}),d.jsx(wc,{className:"mt-6",data:r,index:"month",categories:["Completed Cases"],colors:["blue"]})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Average Case Duration"}),d.jsxs(en,{children:[s," days"]}),d.jsx(ie,{children:"Average time to case completion"})]})]})}function C4({clients:n,satisfactionScores:e}){const t=n.filter(a=>a.status==="active"),r=n.filter(a=>{const c=new Date;return c.setMonth(c.getMonth()-1),new Date(a.createdAt)>c}),i=t.length/n.length*100,s=e.reduce((a,c)=>a+c.score,0)/e.length,o=Array.from({length:6}).map((a,c)=>{const u=new Date;u.setMonth(u.getMonth()-c);const h=n.filter(f=>new Date(f.createdAt).getMonth()===u.getMonth()&&new Date(f.createdAt).getFullYear()===u.getFullYear()).length;return{month:u.toLocaleString("default",{month:"short"}),"New Clients":h}}).reverse();return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs(xe,{decoration:"top",decorationColor:"blue",children:[d.jsx(ie,{children:"Active Clients"}),d.jsx(en,{children:t.length})]}),d.jsxs(xe,{decoration:"top",decorationColor:"green",children:[d.jsx(ie,{children:"New Clients This Month"}),d.jsx(en,{children:r.length})]}),d.jsxs(xe,{decoration:"top",decorationColor:"purple",children:[d.jsx(ie,{children:"Client Satisfaction"}),d.jsxs(en,{children:[s.toFixed(1),"/5.0"]})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Client Growth"}),d.jsx(k0,{className:"mt-6 h-72",data:o,index:"month",categories:["New Clients"],colors:["blue"]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Client Retention Rate"}),d.jsxs(en,{children:[i.toFixed(1),"%"]}),d.jsx(vp,{value:i,color:"blue",className:"mt-3"})]})]})}function R4({cases:n,hourlyRate:e}){const t=new Date().getMonth(),r=new Date().getFullYear(),i=n.reduce((c,u)=>{var h,f;return((h=u.completionDate)==null?void 0:h.getMonth())===t&&((f=u.completionDate)==null?void 0:f.getFullYear())===r?c+u.billableHours*e:c},0),s=n.reduce((c,u)=>{var h;return((h=u.completionDate)==null?void 0:h.getFullYear())===r?c+u.billableHours*e:c},0),o=n.reduce((c,u)=>c+u.billableHours,0),a=Array.from({length:6}).map((c,u)=>{const h=new Date;h.setMonth(h.getMonth()-u);const f=n.reduce((y,b)=>{var E,C;return((E=b.completionDate)==null?void 0:E.getMonth())===h.getMonth()&&((C=b.completionDate)==null?void 0:C.getFullYear())===h.getFullYear()?y+b.billableHours*e:y},0);return{month:Jt(h,"MMM"),Revenue:f}}).reverse();return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs(xe,{decoration:"top",decorationColor:"emerald",children:[d.jsx(ie,{children:"Monthly Revenue"}),d.jsxs(en,{children:["$",i.toLocaleString()]})]}),d.jsxs(xe,{decoration:"top",decorationColor:"blue",children:[d.jsx(ie,{children:"YTD Revenue"}),d.jsxs(en,{children:["$",s.toLocaleString()]})]}),d.jsxs(xe,{decoration:"top",decorationColor:"purple",children:[d.jsx(ie,{children:"Total Billable Hours"}),d.jsx(en,{children:o})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Revenue Trend"}),d.jsx(wc,{className:"mt-6",data:a,index:"month",categories:["Revenue"],colors:["emerald"],valueFormatter:c=>`$${c.toLocaleString()}`})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Collection Rate"}),d.jsxs("div",{className:"mt-4",children:[d.jsx(en,{children:"87%"}),d.jsx(vp,{value:87,color:"emerald",className:"mt-2"})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Outstanding Invoices"}),d.jsxs("div",{className:"mt-4",children:[d.jsx(en,{children:"$12,450"}),d.jsx(ie,{children:"Across 8 cases"})]})]})]})]})}function I4({cases:n}){const e=n.flatMap(i=>{const s=[];return i.nextHearing&&s.push({date:i.nextHearing,type:"hearing",title:`Hearing: ${i.title}`,caseId:i.id}),i.deadlines.forEach(o=>{s.push({date:o.date,type:"deadline",title:o.description,caseId:i.id})}),s}).sort((i,s)=>i.date.getTime()-s.date.getTime()),t=new Date,r=e.filter(i=>i.date>=t);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Upcoming Events"}),d.jsx("div",{className:"mt-4 space-y-4",children:r.slice(0,5).map((i,s)=>d.jsxs("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50",children:[d.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${i.type==="hearing"?"bg-red-500":i.type==="deadline"?"bg-yellow-500":"bg-blue-500"}`}),d.jsxs("div",{className:"flex-1",children:[d.jsx(ie,{children:i.title}),d.jsxs(ie,{className:"text-gray-500",children:[Ik(i.date,t)?"Today":Jt(i.date,"MMM d, yyyy")," ",Jt(i.date,"h:mm a")]})]})]},`${i.caseId}-${s}`))})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Upcoming Deadlines"}),d.jsx("div",{className:"mt-4 space-y-2",children:e.filter(i=>i.type==="deadline").slice(0,3).map((i,s)=>d.jsxs("div",{className:"flex items-center justify-between p-2",children:[d.jsx(ie,{children:i.title}),d.jsx(ie,{className:"text-gray-500",children:Jt(i.date,"MMM d")})]},`deadline-${s}`))})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Court Appearances"}),d.jsx("div",{className:"mt-4 space-y-2",children:e.filter(i=>i.type==="hearing").slice(0,3).map((i,s)=>d.jsxs("div",{className:"flex items-center justify-between p-2",children:[d.jsx(ie,{children:i.title}),d.jsx(ie,{className:"text-gray-500",children:Jt(i.date,"MMM d")})]},`hearing-${s}`))})]})]})]})}function N4({cases:n}){var i,s;const e=[{id:"1",name:"Contract Agreement v2.1",caseId:((i=n[0])==null?void 0:i.id)||"",type:"contract",status:"pending_review",lastModified:new Date},{id:"2",name:"Evidence Exhibit A",caseId:((s=n[0])==null?void 0:s.id)||"",type:"evidence",status:"final",lastModified:new Date(Date.now()-864e5)}],t=o=>{switch(o){case"draft":return"gray";case"pending_review":return"yellow";case"final":return"green"}},r=o=>{switch(o){case"contract":return"blue";case"filing":return"purple";case"evidence":return"red";case"correspondence":return"green"}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Recent Documents"}),d.jsx("div",{className:"mt-4 space-y-4",children:e.map(o=>d.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium",children:o.name}),d.jsxs("div",{className:"flex space-x-2 mt-1",children:[d.jsx(Lt,{color:r(o.type),size:"sm",children:o.type}),d.jsx(Lt,{color:t(o.status),size:"sm",children:o.status.replace("_"," ")})]})]})]}),d.jsx(ie,{className:"text-gray-500",children:o.lastModified.toLocaleDateString()})]},o.id))})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Documents by Type"}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Contracts"}),d.jsx(Lt,{color:"blue",children:"12"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Filings"}),d.jsx(Lt,{color:"purple",children:"8"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Evidence"}),d.jsx(Lt,{color:"red",children:"15"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Correspondence"}),d.jsx(Lt,{color:"green",children:"23"})]})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Document Status"}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Draft"}),d.jsx(Lt,{color:"gray",children:"5"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Pending Review"}),d.jsx(Lt,{color:"yellow",children:"3"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(ie,{children:"Final"}),d.jsx(Lt,{color:"green",children:"50"})]})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Recent Activity"}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx(ie,{children:"Last document uploaded: 2 hours ago"}),d.jsx(ie,{children:"Last review completed: 5 hours ago"}),d.jsx(ie,{children:"Documents pending review: 3"})]})]})]})]})}function P4({cases:n}){const e=n.reduce((o,a)=>o+a.billableHours,0),t=Math.round(e*.3),r=n.reduce((o,a)=>(o[a.practiceArea]=(o[a.practiceArea]||0)+a.billableHours,o),{}),i=Array.from({length:6}).map((o,a)=>{const c=new Date;c.setMonth(c.getMonth()-a);const u=n.reduce((f,y)=>{var b;return((b=y.completionDate)==null?void 0:b.getMonth())===c.getMonth()?f+y.billableHours:f},0),h=Math.round(u*.3);return{month:c.toLocaleString("default",{month:"short"}),"Billable Hours":u,"Non-billable Hours":h}}).reverse();return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs(xe,{decoration:"top",decorationColor:"blue",children:[d.jsx(ie,{children:"Billable Hours"}),d.jsx(en,{children:e})]}),d.jsxs(xe,{decoration:"top",decorationColor:"amber",children:[d.jsx(ie,{children:"Non-billable Hours"}),d.jsx(en,{children:t})]}),d.jsxs(xe,{decoration:"top",decorationColor:"green",children:[d.jsx(ie,{children:"Task Completion Rate"}),d.jsxs(en,{children:[85,"%"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Time Allocation by Case Type"}),d.jsx(yp,{className:"mt-6",data:Object.entries(r).map(([o,a])=>({name:o,hours:a})),category:"hours",index:"name",colors:["blue","cyan","indigo","violet","fuchsia"]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Monthly Hours Distribution"}),d.jsx(wc,{className:"mt-6",data:i,index:"month",categories:["Billable Hours","Non-billable Hours"],colors:["blue","amber"],stack:!0})]})]})]})}function j4({profile:n,activeTab:e,onTabChange:t}){const r=[{id:"1",clientId:"client1",title:"Corporate Restructuring",description:"Major restructuring project",status:"InProgress",practiceArea:"Corporate",startDate:new Date("2024-01-15"),billableHours:45,documents:["doc1","doc2"],deadlines:[{date:new Date("2024-03-01"),description:"Filing Deadline"}]}],i=[{id:"client1",name:"Acme Corp",email:"contact@acme.com",phone:"555-0123",company:"Acme Corporation",status:"active",createdAt:"2024-01-01",lastInteraction:"2024-02-15",totalBilled:15e3,outstandingBalance:2500,cases:["case1"]}],s=[{clientId:"client1",score:4.5,date:new Date}];return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",n.displayName]}),d.jsx("p",{className:"text-gray-600",children:"Dashboard Overview"})]}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("nav",{className:"flex border-b border-gray-200 overflow-x-auto",children:[["cases","Cases"],["clients","Clients"],["financial","Financial"],["calendar","Calendar"],["documents","Documents"],["time","Time & Productivity"],["consultations","Video Consultations"]].map(([o,a])=>d.jsx("button",{onClick:()=>t(o),className:`px-4 py-3 text-sm font-medium whitespace-nowrap ${e===o?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:a},o))}),d.jsxs("div",{className:"p-6",children:[e==="cases"&&d.jsx(A4,{cases:r}),e==="clients"&&d.jsx(C4,{clients:i,satisfactionScores:s}),e==="financial"&&d.jsx(R4,{cases:r,hourlyRate:n.hourlyRate}),e==="calendar"&&d.jsx(I4,{cases:r}),e==="documents"&&d.jsx(N4,{cases:r}),e==="time"&&d.jsx(P4,{cases:r}),e==="consultations"&&d.jsx(nx,{userId:n.id,userType:"consultant"})]})]})]})}function rx({data:n,columns:e}){return d.jsxs(Nk,{children:[d.jsx(Pk,{children:d.jsx(Ug,{children:e.map((t,r)=>d.jsx(jk,{children:t.header},r))})}),d.jsx(Mk,{children:n.map((t,r)=>d.jsx(Ug,{children:e.map((i,s)=>d.jsx(Ok,{children:i.cell({row:t})},s))},r))})]})}var vm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hc=typeof window>"u"||"Deno"in globalThis;function M4(){}function tb(n){return typeof n=="number"&&n>=0&&n!==1/0}function O4(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Bl(n,e){return typeof n=="function"?n(e):n}function er(n,e){return typeof n=="function"?n(e):n}function ix(n,e){if(n===e)return n;const t=nb(n)&&nb(e);if(t||rb(n)&&rb(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let c=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&r.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=ix(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function Vf(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function nb(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function rb(n){if(!ib(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ib(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function ib(n){return Object.prototype.toString.call(n)==="[object Object]"}function sb(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?ix(n,e):e}var Wi,ii,lo,S0,D4=(S0=class extends vm{constructor(){super();Ct(this,Wi);Ct(this,ii);Ct(this,lo);Qe(this,lo,e=>{if(!hc&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ne(this,ii)||this.setEventListener(ne(this,lo))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,ii))==null||e.call(this),Qe(this,ii,void 0))}setEventListener(e){var t;Qe(this,lo,e),(t=ne(this,ii))==null||t.call(this),Qe(this,ii,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ne(this,Wi)!==e&&(Qe(this,Wi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ne(this,Wi)=="boolean"?ne(this,Wi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wi=new WeakMap,ii=new WeakMap,lo=new WeakMap,S0),L4=new D4,uo,si,ho,E0,V4=(E0=class extends vm{constructor(){super();Ct(this,uo,!0);Ct(this,si);Ct(this,ho);Qe(this,ho,e=>{if(!hc&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ne(this,si)||this.setEventListener(ne(this,ho))}onUnsubscribe(){var e;this.hasListeners()||((e=ne(this,si))==null||e.call(this),Qe(this,si,void 0))}setEventListener(e){var t;Qe(this,ho,e),(t=ne(this,si))==null||t.call(this),Qe(this,si,e(this.setOnline.bind(this)))}setOnline(e){ne(this,uo)!==e&&(Qe(this,uo,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ne(this,uo)}},uo=new WeakMap,si=new WeakMap,ho=new WeakMap,E0),F4=new V4;function ob(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function U4(n){return(n??"online")==="online"?F4.isOnline():!0}function B4(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var sx=B4();function $4(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:U4(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}var bn,Xe,_c,fn,Gi,fo,oi,Xn,bc,po,mo,Hi,Ki,ai,go,ut,Sa,Ff,Uf,Bf,$f,zf,qf,Wf,ox,x0,z4=(x0=class extends vm{constructor(e,t){super();Ct(this,ut);Ct(this,bn);Ct(this,Xe);Ct(this,_c);Ct(this,fn);Ct(this,Gi);Ct(this,fo);Ct(this,oi);Ct(this,Xn);Ct(this,bc);Ct(this,po);Ct(this,mo);Ct(this,Hi);Ct(this,Ki);Ct(this,ai);Ct(this,go,new Set);this.options=t,Qe(this,bn,e),Qe(this,Xn,null),Qe(this,oi,ob()),this.options.experimental_prefetchInRender||ne(this,oi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,Xe).addObserver(this),ab(ne(this,Xe),this.options)?zt(this,ut,Sa).call(this):this.updateResult(),zt(this,ut,$f).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gf(ne(this,Xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gf(ne(this,Xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,zt(this,ut,zf).call(this),zt(this,ut,qf).call(this),ne(this,Xe).removeObserver(this)}setOptions(e,t){const r=this.options,i=ne(this,Xe);if(this.options=ne(this,bn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof er(this.options.enabled,ne(this,Xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");zt(this,ut,Wf).call(this),ne(this,Xe).setOptions(this.options),r._defaulted&&!Vf(this.options,r)&&ne(this,bn).getQueryCache().notify({type:"observerOptionsUpdated",query:ne(this,Xe),observer:this});const s=this.hasListeners();s&&cb(ne(this,Xe),i,this.options,r)&&zt(this,ut,Sa).call(this),this.updateResult(t),s&&(ne(this,Xe)!==i||er(this.options.enabled,ne(this,Xe))!==er(r.enabled,ne(this,Xe))||Bl(this.options.staleTime,ne(this,Xe))!==Bl(r.staleTime,ne(this,Xe)))&&zt(this,ut,Ff).call(this);const o=zt(this,ut,Uf).call(this);s&&(ne(this,Xe)!==i||er(this.options.enabled,ne(this,Xe))!==er(r.enabled,ne(this,Xe))||o!==ne(this,ai))&&zt(this,ut,Bf).call(this,o)}getOptimisticResult(e){const t=ne(this,bn).getQueryCache().build(ne(this,bn),e),r=this.createResult(t,e);return W4(this,r)&&(Qe(this,fn,r),Qe(this,fo,this.options),Qe(this,Gi,ne(this,Xe).state)),r}getCurrentResult(){return ne(this,fn)}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),r}trackProp(e){ne(this,go).add(e)}getCurrentQuery(){return ne(this,Xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ne(this,bn).defaultQueryOptions(e),r=ne(this,bn).getQueryCache().build(ne(this,bn),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return zt(this,ut,Sa).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,fn)))}createResult(e,t){var S;const r=ne(this,Xe),i=this.options,s=ne(this,fn),o=ne(this,Gi),a=ne(this,fo),u=e!==r?e.state:ne(this,_c),{state:h}=e;let f={...h},y=!1,b;if(t._optimisticResults){const A=this.hasListeners(),P=!A&&ab(e,t),j=A&&cb(e,r,t,i);(P||j)&&(f={...f,...$4(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:E,errorUpdatedAt:C,status:N}=f;if(t.select&&f.data!==void 0)if(s&&f.data===(o==null?void 0:o.data)&&t.select===ne(this,bc))b=ne(this,po);else try{Qe(this,bc,t.select),b=t.select(f.data),b=sb(s==null?void 0:s.data,b,t),Qe(this,po,b),Qe(this,Xn,null)}catch(A){Qe(this,Xn,A)}else b=f.data;if(t.placeholderData!==void 0&&b===void 0&&N==="pending"){let A;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))A=s.data;else if(A=typeof t.placeholderData=="function"?t.placeholderData((S=ne(this,mo))==null?void 0:S.state.data,ne(this,mo)):t.placeholderData,t.select&&A!==void 0)try{A=t.select(A),Qe(this,Xn,null)}catch(P){Qe(this,Xn,P)}A!==void 0&&(N="success",b=sb(s==null?void 0:s.data,A,t),y=!0)}ne(this,Xn)&&(E=ne(this,Xn),b=ne(this,po),C=Date.now(),N="error");const $=f.fetchStatus==="fetching",V=N==="pending",G=N==="error",J=V&&$,q=b!==void 0,k={status:N,fetchStatus:f.fetchStatus,isPending:V,isSuccess:N==="success",isError:G,isInitialLoading:J,isLoading:J,data:b,dataUpdatedAt:f.dataUpdatedAt,error:E,errorUpdatedAt:C,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:$,isRefetching:$&&!V,isLoadingError:G&&!q,isPaused:f.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:G&&q,isStale:ym(e,t),refetch:this.refetch,promise:ne(this,oi)};if(this.options.experimental_prefetchInRender){const A=I=>{k.status==="error"?I.reject(k.error):k.data!==void 0&&I.resolve(k.data)},P=()=>{const I=Qe(this,oi,k.promise=ob());A(I)},j=ne(this,oi);switch(j.status){case"pending":e.queryHash===r.queryHash&&A(j);break;case"fulfilled":(k.status==="error"||k.data!==j.value)&&P();break;case"rejected":(k.status!=="error"||k.error!==j.reason)&&P();break}}return k}updateResult(e){const t=ne(this,fn),r=this.createResult(ne(this,Xe),this.options);if(Qe(this,Gi,ne(this,Xe).state),Qe(this,fo,this.options),ne(this,Gi).data!==void 0&&Qe(this,mo,ne(this,Xe)),Vf(r,t))return;Qe(this,fn,r);const i={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!ne(this,go).size)return!0;const c=new Set(a??ne(this,go));return this.options.throwOnError&&c.add("error"),Object.keys(ne(this,fn)).some(u=>{const h=u;return ne(this,fn)[h]!==t[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),zt(this,ut,ox).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&zt(this,ut,$f).call(this)}},bn=new WeakMap,Xe=new WeakMap,_c=new WeakMap,fn=new WeakMap,Gi=new WeakMap,fo=new WeakMap,oi=new WeakMap,Xn=new WeakMap,bc=new WeakMap,po=new WeakMap,mo=new WeakMap,Hi=new WeakMap,Ki=new WeakMap,ai=new WeakMap,go=new WeakMap,ut=new WeakSet,Sa=function(e){zt(this,ut,Wf).call(this);let t=ne(this,Xe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(M4)),t},Ff=function(){zt(this,ut,zf).call(this);const e=Bl(this.options.staleTime,ne(this,Xe));if(hc||ne(this,fn).isStale||!tb(e))return;const r=O4(ne(this,fn).dataUpdatedAt,e)+1;Qe(this,Hi,setTimeout(()=>{ne(this,fn).isStale||this.updateResult()},r))},Uf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ne(this,Xe)):this.options.refetchInterval)??!1},Bf=function(e){zt(this,ut,qf).call(this),Qe(this,ai,e),!(hc||er(this.options.enabled,ne(this,Xe))===!1||!tb(ne(this,ai))||ne(this,ai)===0)&&Qe(this,Ki,setInterval(()=>{(this.options.refetchIntervalInBackground||L4.isFocused())&&zt(this,ut,Sa).call(this)},ne(this,ai)))},$f=function(){zt(this,ut,Ff).call(this),zt(this,ut,Bf).call(this,zt(this,ut,Uf).call(this))},zf=function(){ne(this,Hi)&&(clearTimeout(ne(this,Hi)),Qe(this,Hi,void 0))},qf=function(){ne(this,Ki)&&(clearInterval(ne(this,Ki)),Qe(this,Ki,void 0))},Wf=function(){const e=ne(this,bn).getQueryCache().build(ne(this,bn),this.options);if(e===ne(this,Xe))return;const t=ne(this,Xe);Qe(this,Xe,e),Qe(this,_c,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},ox=function(e){sx.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ne(this,fn))}),ne(this,bn).getQueryCache().notify({query:ne(this,Xe),type:"observerResultsUpdated"})})},x0);function q4(n,e){return er(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function ab(n,e){return q4(n,e)||n.state.data!==void 0&&Gf(n,e,e.refetchOnMount)}function Gf(n,e,t){if(er(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&ym(n,e)}return!1}function cb(n,e,t,r){return(n!==e||er(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&ym(n,t)}function ym(n,e){return er(e.enabled,n)!==!1&&n.isStaleByTime(Bl(e.staleTime,n))}function W4(n,e){return!Vf(n.getCurrentResult(),e)}var G4=R.createContext(void 0),H4=n=>{const e=R.useContext(G4);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ax=R.createContext(!1),K4=()=>R.useContext(ax);ax.Provider;function Y4(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var J4=R.createContext(Y4()),Z4=()=>R.useContext(J4);function Q4(n,e){return typeof n=="function"?n(...e):!!n}function lb(){}var X4=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},e$=n=>{R.useEffect(()=>{n.clearReset()},[n])},t$=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&Q4(t,[n.error,r]),n$=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},r$=(n,e)=>n.isLoading&&n.isFetching&&!e,i$=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,ub=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function s$(n,e,t){var h,f,y,b,E;const r=H4(),i=K4(),s=Z4(),o=r.defaultQueryOptions(n);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=i?"isRestoring":"optimistic",n$(o),X4(o,s),e$(s);const a=!r.getQueryCache().get(o.queryHash),[c]=R.useState(()=>new e(r,o)),u=c.getOptimisticResult(o);if(R.useSyncExternalStore(R.useCallback(C=>{const N=i?lb:c.subscribe(sx.batchCalls(C));return c.updateResult(),N},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),R.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),i$(o,u))throw ub(o,c,s);if(t$({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((b=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,o,u),o.experimental_prefetchInRender&&!hc&&r$(u,i)){const C=a?ub(o,c,s):(E=r.getQueryCache().get(o.queryHash))==null?void 0:E.promise;C==null||C.catch(lb).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function cx(n,e){return s$(n,z4)}var db={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},o$=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let y=(a&15)<<2|u>>6,b=u&63;c||(b=64,o||(y=64)),r.push(t[h],t[f],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):o$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new a$;const y=s<<2|a>>4;if(r.push(y),u!==64){const b=a<<4&240|u>>2;if(r.push(b),f!==64){const E=u<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class a$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c$=function(n){const e=lx(n);return ux.encodeByteArray(e,!0)},xu=function(n){return c$(n).replace(/\./g,"")},dx=function(n){try{return ux.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=()=>l$().__FIREBASE_DEFAULTS__,d$=()=>{if(typeof process>"u"||typeof db>"u")return;const n=db.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},h$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dx(n[1]);return e&&JSON.parse(e)},yd=()=>{try{return u$()||d$()||h$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hx=n=>{var e,t;return(t=(e=yd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},f$=n=>{const e=hx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fx=()=>{var n;return(n=yd())===null||n===void 0?void 0:n.config},px=n=>{var e;return(e=yd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xu(JSON.stringify(t)),xu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function v$(){var n;const e=(n=yd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _$(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function b$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w$(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function S$(){return!v$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E$(){try{return typeof indexedDB=="object"}catch{return!1}}function x$(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$="FirebaseError";class Lr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=T$,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?k$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Lr(i,a,r)}}function k$(n,e){return n.replace(A$,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const A$=/\{\$([^}]+)}/g;function C$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(hb(s)&&hb(o)){if(!Tu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function hb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R$(n,e){const t=new I$(n,e);return t.subscribe.bind(t)}class I${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");N$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rh),i.error===void 0&&(i.error=Rh),i.complete===void 0&&(i.complete=Rh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N$(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new p$;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M$(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j$(n){return n===Vi?void 0:n}function M$(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P$(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(et||(et={}));const D$={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},L$=et.INFO,V$={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},F$=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=V$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=L$,this._logHandler=F$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const U$=(n,e)=>e.some(t=>n instanceof t);let fb,pb;function B$(){return fb||(fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $$(){return pb||(pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mx=new WeakMap,Hf=new WeakMap,gx=new WeakMap,Ih=new WeakMap,bm=new WeakMap;function z$(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(mi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&mx.set(t,n)}).catch(()=>{}),bm.set(e,n),e}function q$(n){if(Hf.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Hf.set(n,e)}let Kf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function W$(n){Kf=n(Kf)}function G$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Nh(this),e,...t);return gx.set(r,e.sort?e.sort():[e]),mi(r)}:$$().includes(n)?function(...e){return n.apply(Nh(this),e),mi(mx.get(this))}:function(...e){return mi(n.apply(Nh(this),e))}}function H$(n){return typeof n=="function"?G$(n):(n instanceof IDBTransaction&&q$(n),U$(n,B$())?new Proxy(n,Kf):n)}function mi(n){if(n instanceof IDBRequest)return z$(n);if(Ih.has(n))return Ih.get(n);const e=H$(n);return e!==n&&(Ih.set(n,e),bm.set(e,n)),e}const Nh=n=>bm.get(n);function K$(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=mi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(mi(o.result),c.oldVersion,c.newVersion,mi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Y$=["get","getKey","getAll","getAllKeys","count"],J$=["put","add","delete","clear"],Ph=new Map;function mb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=J$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Y$.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return Ph.set(e,s),s}W$(n=>({...n,get:(e,t,r)=>mb(e,t)||n.get(e,t,r),has:(e,t)=>!!mb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Q$(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Q$(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yf="@firebase/app",gb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new _m("@firebase/app"),X$="@firebase/app-compat",e9="@firebase/analytics-compat",t9="@firebase/analytics",n9="@firebase/app-check-compat",r9="@firebase/app-check",i9="@firebase/auth",s9="@firebase/auth-compat",o9="@firebase/database",a9="@firebase/data-connect",c9="@firebase/database-compat",l9="@firebase/functions",u9="@firebase/functions-compat",d9="@firebase/installations",h9="@firebase/installations-compat",f9="@firebase/messaging",p9="@firebase/messaging-compat",m9="@firebase/performance",g9="@firebase/performance-compat",v9="@firebase/remote-config",y9="@firebase/remote-config-compat",_9="@firebase/storage",b9="@firebase/storage-compat",w9="@firebase/firestore",S9="@firebase/vertexai-preview",E9="@firebase/firestore-compat",x9="firebase",T9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]",k9={[Yf]:"fire-core",[X$]:"fire-core-compat",[t9]:"fire-analytics",[e9]:"fire-analytics-compat",[r9]:"fire-app-check",[n9]:"fire-app-check-compat",[i9]:"fire-auth",[s9]:"fire-auth-compat",[o9]:"fire-rtdb",[a9]:"fire-data-connect",[c9]:"fire-rtdb-compat",[l9]:"fire-fn",[u9]:"fire-fn-compat",[d9]:"fire-iid",[h9]:"fire-iid-compat",[f9]:"fire-fcm",[p9]:"fire-fcm-compat",[m9]:"fire-perf",[g9]:"fire-perf-compat",[v9]:"fire-rc",[y9]:"fire-rc-compat",[_9]:"fire-gcs",[b9]:"fire-gcs-compat",[w9]:"fire-fst",[E9]:"fire-fst-compat",[S9]:"fire-vertex","fire-js":"fire-js",[x9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,A9=new Map,Zf=new Map;function vb(n,e){try{n.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ro(n){const e=n.name;if(Zf.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Zf.set(e,n);for(const t of ku.values())vb(t,n);for(const t of A9.values())vb(t,n);return!0}function wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function li(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Dc("app","Firebase",C9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=T9;function vx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gi.create("bad-app-name",{appName:String(i)});if(t||(t=fx()),!t)throw gi.create("no-options");const s=ku.get(i);if(s){if(Tu(t,s.options)&&Tu(r,s.config))return s;throw gi.create("duplicate-app",{appName:i})}const o=new O$(i);for(const c of Zf.values())o.addComponent(c);const a=new R9(t,r,o);return ku.set(i,a),a}function yx(n=Jf){const e=ku.get(n);if(!e&&n===Jf&&fx())return vx();if(!e)throw gi.create("no-app",{appName:n});return e}function vi(n,e,t){var r;let i=(r=k9[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}Ro(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="firebase-heartbeat-database",N9=1,fc="firebase-heartbeat-store";let jh=null;function _x(){return jh||(jh=K$(I9,N9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fc)}catch(t){console.warn(t)}}}}).catch(n=>{throw gi.create("idb-open",{originalErrorMessage:n.message})})),jh}async function P9(n){try{const t=(await _x()).transaction(fc),r=await t.objectStore(fc).get(bx(n));return await t.done,r}catch(e){if(e instanceof Lr)Cr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(t.message)}}}async function yb(n,e){try{const r=(await _x()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,bx(n)),await r.done}catch(t){if(t instanceof Lr)Cr.warn(t.message);else{const r=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cr.warn(r.message)}}}function bx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=1024,M9=30*24*60*60*1e3;class O9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new L9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_b();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=M9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_b(),{heartbeatsToSend:r,unsentEntries:i}=D9(this._heartbeatsCache.heartbeats),s=xu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Cr.warn(t),""}}}function _b(){return new Date().toISOString().substring(0,10)}function D9(n,e=j9){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),bb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class L9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E$()?x$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await P9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return yb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return yb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bb(n){return xu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(n){Ro(new hs("platform-logger",e=>new Z$(e),"PRIVATE")),Ro(new hs("heartbeat",e=>new O9(e),"PRIVATE")),vi(Yf,gb,n),vi(Yf,gb,"esm2017"),vi("fire-js","")}V9("");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xi,wx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function A(){}A.prototype=S.prototype,k.D=S.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,j,I){for(var x=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)x[ye-2]=arguments[ye];return S.prototype[j].apply(P,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)P[j]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(j=0;16>j;++j)P[j]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=k.g[0],A=k.g[1],j=k.g[2];var I=k.g[3],x=S+(I^A&(j^I))+P[0]+3614090360&4294967295;S=A+(x<<7&4294967295|x>>>25),x=I+(j^S&(A^j))+P[1]+3905402710&4294967295,I=S+(x<<12&4294967295|x>>>20),x=j+(A^I&(S^A))+P[2]+606105819&4294967295,j=I+(x<<17&4294967295|x>>>15),x=A+(S^j&(I^S))+P[3]+3250441966&4294967295,A=j+(x<<22&4294967295|x>>>10),x=S+(I^A&(j^I))+P[4]+4118548399&4294967295,S=A+(x<<7&4294967295|x>>>25),x=I+(j^S&(A^j))+P[5]+1200080426&4294967295,I=S+(x<<12&4294967295|x>>>20),x=j+(A^I&(S^A))+P[6]+2821735955&4294967295,j=I+(x<<17&4294967295|x>>>15),x=A+(S^j&(I^S))+P[7]+4249261313&4294967295,A=j+(x<<22&4294967295|x>>>10),x=S+(I^A&(j^I))+P[8]+1770035416&4294967295,S=A+(x<<7&4294967295|x>>>25),x=I+(j^S&(A^j))+P[9]+2336552879&4294967295,I=S+(x<<12&4294967295|x>>>20),x=j+(A^I&(S^A))+P[10]+4294925233&4294967295,j=I+(x<<17&4294967295|x>>>15),x=A+(S^j&(I^S))+P[11]+2304563134&4294967295,A=j+(x<<22&4294967295|x>>>10),x=S+(I^A&(j^I))+P[12]+1804603682&4294967295,S=A+(x<<7&4294967295|x>>>25),x=I+(j^S&(A^j))+P[13]+4254626195&4294967295,I=S+(x<<12&4294967295|x>>>20),x=j+(A^I&(S^A))+P[14]+2792965006&4294967295,j=I+(x<<17&4294967295|x>>>15),x=A+(S^j&(I^S))+P[15]+1236535329&4294967295,A=j+(x<<22&4294967295|x>>>10),x=S+(j^I&(A^j))+P[1]+4129170786&4294967295,S=A+(x<<5&4294967295|x>>>27),x=I+(A^j&(S^A))+P[6]+3225465664&4294967295,I=S+(x<<9&4294967295|x>>>23),x=j+(S^A&(I^S))+P[11]+643717713&4294967295,j=I+(x<<14&4294967295|x>>>18),x=A+(I^S&(j^I))+P[0]+3921069994&4294967295,A=j+(x<<20&4294967295|x>>>12),x=S+(j^I&(A^j))+P[5]+3593408605&4294967295,S=A+(x<<5&4294967295|x>>>27),x=I+(A^j&(S^A))+P[10]+38016083&4294967295,I=S+(x<<9&4294967295|x>>>23),x=j+(S^A&(I^S))+P[15]+3634488961&4294967295,j=I+(x<<14&4294967295|x>>>18),x=A+(I^S&(j^I))+P[4]+3889429448&4294967295,A=j+(x<<20&4294967295|x>>>12),x=S+(j^I&(A^j))+P[9]+568446438&4294967295,S=A+(x<<5&4294967295|x>>>27),x=I+(A^j&(S^A))+P[14]+3275163606&4294967295,I=S+(x<<9&4294967295|x>>>23),x=j+(S^A&(I^S))+P[3]+4107603335&4294967295,j=I+(x<<14&4294967295|x>>>18),x=A+(I^S&(j^I))+P[8]+1163531501&4294967295,A=j+(x<<20&4294967295|x>>>12),x=S+(j^I&(A^j))+P[13]+2850285829&4294967295,S=A+(x<<5&4294967295|x>>>27),x=I+(A^j&(S^A))+P[2]+4243563512&4294967295,I=S+(x<<9&4294967295|x>>>23),x=j+(S^A&(I^S))+P[7]+1735328473&4294967295,j=I+(x<<14&4294967295|x>>>18),x=A+(I^S&(j^I))+P[12]+2368359562&4294967295,A=j+(x<<20&4294967295|x>>>12),x=S+(A^j^I)+P[5]+4294588738&4294967295,S=A+(x<<4&4294967295|x>>>28),x=I+(S^A^j)+P[8]+2272392833&4294967295,I=S+(x<<11&4294967295|x>>>21),x=j+(I^S^A)+P[11]+1839030562&4294967295,j=I+(x<<16&4294967295|x>>>16),x=A+(j^I^S)+P[14]+4259657740&4294967295,A=j+(x<<23&4294967295|x>>>9),x=S+(A^j^I)+P[1]+2763975236&4294967295,S=A+(x<<4&4294967295|x>>>28),x=I+(S^A^j)+P[4]+1272893353&4294967295,I=S+(x<<11&4294967295|x>>>21),x=j+(I^S^A)+P[7]+4139469664&4294967295,j=I+(x<<16&4294967295|x>>>16),x=A+(j^I^S)+P[10]+3200236656&4294967295,A=j+(x<<23&4294967295|x>>>9),x=S+(A^j^I)+P[13]+681279174&4294967295,S=A+(x<<4&4294967295|x>>>28),x=I+(S^A^j)+P[0]+3936430074&4294967295,I=S+(x<<11&4294967295|x>>>21),x=j+(I^S^A)+P[3]+3572445317&4294967295,j=I+(x<<16&4294967295|x>>>16),x=A+(j^I^S)+P[6]+76029189&4294967295,A=j+(x<<23&4294967295|x>>>9),x=S+(A^j^I)+P[9]+3654602809&4294967295,S=A+(x<<4&4294967295|x>>>28),x=I+(S^A^j)+P[12]+3873151461&4294967295,I=S+(x<<11&4294967295|x>>>21),x=j+(I^S^A)+P[15]+530742520&4294967295,j=I+(x<<16&4294967295|x>>>16),x=A+(j^I^S)+P[2]+3299628645&4294967295,A=j+(x<<23&4294967295|x>>>9),x=S+(j^(A|~I))+P[0]+4096336452&4294967295,S=A+(x<<6&4294967295|x>>>26),x=I+(A^(S|~j))+P[7]+1126891415&4294967295,I=S+(x<<10&4294967295|x>>>22),x=j+(S^(I|~A))+P[14]+2878612391&4294967295,j=I+(x<<15&4294967295|x>>>17),x=A+(I^(j|~S))+P[5]+4237533241&4294967295,A=j+(x<<21&4294967295|x>>>11),x=S+(j^(A|~I))+P[12]+1700485571&4294967295,S=A+(x<<6&4294967295|x>>>26),x=I+(A^(S|~j))+P[3]+2399980690&4294967295,I=S+(x<<10&4294967295|x>>>22),x=j+(S^(I|~A))+P[10]+4293915773&4294967295,j=I+(x<<15&4294967295|x>>>17),x=A+(I^(j|~S))+P[1]+2240044497&4294967295,A=j+(x<<21&4294967295|x>>>11),x=S+(j^(A|~I))+P[8]+1873313359&4294967295,S=A+(x<<6&4294967295|x>>>26),x=I+(A^(S|~j))+P[15]+4264355552&4294967295,I=S+(x<<10&4294967295|x>>>22),x=j+(S^(I|~A))+P[6]+2734768916&4294967295,j=I+(x<<15&4294967295|x>>>17),x=A+(I^(j|~S))+P[13]+1309151649&4294967295,A=j+(x<<21&4294967295|x>>>11),x=S+(j^(A|~I))+P[4]+4149444226&4294967295,S=A+(x<<6&4294967295|x>>>26),x=I+(A^(S|~j))+P[11]+3174756917&4294967295,I=S+(x<<10&4294967295|x>>>22),x=j+(S^(I|~A))+P[2]+718787259&4294967295,j=I+(x<<15&4294967295|x>>>17),x=A+(I^(j|~S))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(j+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+I&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var A=S-this.blockSize,P=this.B,j=this.h,I=0;I<S;){if(j==0)for(;I<=A;)i(this,k,I),I+=this.blockSize;if(typeof k=="string"){for(;I<S;)if(P[j++]=k.charCodeAt(I++),j==this.blockSize){i(this,P),j=0;break}}else for(;I<S;)if(P[j++]=k[I++],j==this.blockSize){i(this,P),j=0;break}}this.h=j,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var A=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.u(k),k=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)k[A++]=this.g[S]>>>P&255;return k};function s(k,S){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=S(k)}function o(k,S){this.h=S;for(var A=[],P=!0,j=k.length-1;0<=j;j--){var I=k[j]|0;P&&I==S||(A[j]=I,P=!1)}this.g=A}var a={};function c(k){return-128<=k&&128>k?s(k,function(S){return new o([S|0],0>S?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return N(u(-k));for(var S=[],A=1,P=0;k>=A;P++)S[P]=k/A|0,A*=4294967296;return new o(S,0)}function h(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return N(h(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(S,8)),P=f,j=0;j<k.length;j+=8){var I=Math.min(8,k.length-j),x=parseInt(k.substring(j,j+I),S);8>I?(I=u(Math.pow(S,I)),P=P.j(I).add(u(x))):(P=P.j(A),P=P.add(u(x)))}return P}var f=c(0),y=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(C(this))return-N(this).m();for(var k=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(E(this))return"0";if(C(this))return"-"+N(this).toString(k);for(var S=u(Math.pow(k,6)),A=this,P="";;){var j=J(A,S).g;A=$(A,j.j(S));var I=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=j,E(A))return I+P;for(;6>I.length;)I="0"+I;P=I+P}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function E(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function C(k){return k.h==-1}n.l=function(k){return k=$(this,k),C(k)?-1:E(k)?0:1};function N(k){for(var S=k.g.length,A=[],P=0;P<S;P++)A[P]=~k.g[P];return new o(A,~k.h).add(y)}n.abs=function(){return C(this)?N(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],P=0,j=0;j<=S;j++){var I=P+(this.i(j)&65535)+(k.i(j)&65535),x=(I>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);P=x>>>16,I&=65535,x&=65535,A[j]=x<<16|I}return new o(A,A[A.length-1]&-2147483648?-1:0)};function $(k,S){return k.add(N(S))}n.j=function(k){if(E(this)||E(k))return f;if(C(this))return C(k)?N(this).j(N(k)):N(N(this).j(k));if(C(k))return N(this.j(N(k)));if(0>this.l(b)&&0>k.l(b))return u(this.m()*k.m());for(var S=this.g.length+k.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var j=0;j<k.g.length;j++){var I=this.i(P)>>>16,x=this.i(P)&65535,ye=k.i(j)>>>16,Oe=k.i(j)&65535;A[2*P+2*j]+=x*Oe,V(A,2*P+2*j),A[2*P+2*j+1]+=I*Oe,V(A,2*P+2*j+1),A[2*P+2*j+1]+=x*ye,V(A,2*P+2*j+1),A[2*P+2*j+2]+=I*ye,V(A,2*P+2*j+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new o(A,0)};function V(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function G(k,S){this.g=k,this.h=S}function J(k,S){if(E(S))throw Error("division by zero");if(E(k))return new G(f,f);if(C(k))return S=J(N(k),S),new G(N(S.g),N(S.h));if(C(S))return S=J(k,N(S)),new G(N(S.g),S.h);if(30<k.g.length){if(C(k)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var A=y,P=S;0>=P.l(k);)A=q(A),P=q(P);var j=z(A,1),I=z(P,1);for(P=z(P,2),A=z(A,2);!E(P);){var x=I.add(P);0>=x.l(k)&&(j=j.add(A),I=x),P=z(P,1),A=z(A,1)}return S=$(k,j.j(S)),new G(j,S)}for(j=f;0<=k.l(S);){for(A=Math.max(1,Math.floor(k.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),I=u(A),x=I.j(S);C(x)||0<x.l(k);)A-=P,I=u(A),x=I.j(S);E(I)&&(I=y),j=j.add(I),k=$(k,x)}return new G(j,k)}n.A=function(k){return J(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&k.i(P);return new o(A,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|k.i(P);return new o(A,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^k.i(P);return new o(A,this.h^k.h)};function q(k){for(var S=k.g.length+1,A=[],P=0;P<S;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(A,k.h)}function z(k,S){var A=S>>5;S%=32;for(var P=k.g.length-A,j=[],I=0;I<P;I++)j[I]=0<S?k.i(I+A)>>>S|k.i(I+A+1)<<32-S:k.i(I+A);return new o(j,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Xi=o}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sx,Ea,Ex,$l,Qf,xx,Tx,kx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,v){return l==Array.prototype||l==Object.prototype||(l[g]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var g=0;g<l.length;++g){var v=l[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,g){if(g)e:{var v=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var U=l[w];if(!(U in v))break e;v=v[U]}l=l[l.length-1],w=v[l],g=g(w),g!=w&&g!=null&&e(v,l,{configurable:!0,writable:!0,value:g})}}function s(l,g){l instanceof String&&(l+="");var v=0,w=!1,U={next:function(){if(!w&&v<l.length){var W=v++;return{value:g(W,l[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(l){return l||function(){return s(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function u(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function h(l,g,v){return l.call.apply(l.bind,arguments)}function f(l,g,v){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),l.apply(g,U)}}return function(){return l.apply(g,arguments)}}function y(l,g,v){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,y.apply(null,arguments)}function b(l,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function E(l,g){function v(){}v.prototype=g.prototype,l.aa=g.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(w,U,W){for(var oe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)oe[vt-2]=arguments[vt];return g.prototype[U].apply(w,oe)}}function C(l){const g=l.length;if(0<g){const v=Array(g);for(let w=0;w<g;w++)v[w]=l[w];return v}return[]}function N(l,g){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(c(w)){const U=l.length||0,W=w.length||0;l.length=U+W;for(let oe=0;oe<W;oe++)l[U+oe]=w[oe]}else l.push(w)}}class ${constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function V(l){return/^[\s\xa0]*$/.test(l)}function G(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function J(l){return J[" "](l),l}J[" "]=function(){};var q=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function z(l,g,v){for(const w in l)g.call(v,l[w],w,l)}function k(l,g){for(const v in l)g.call(void 0,l[v],v,l)}function S(l){const g={};for(const v in l)g[v]=l[v];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,g){let v,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(v in w)l[v]=w[v];for(let W=0;W<A.length;W++)v=A[W],Object.prototype.hasOwnProperty.call(w,v)&&(l[v]=w[v])}}function j(l){var g=1;l=l.split(":");const v=[];for(;0<g&&l.length;)v.push(l.shift()),g--;return l.length&&v.push(l.join(":")),v}function I(l){a.setTimeout(()=>{throw l},0)}function x(){var l=st;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class ye{constructor(){this.h=this.g=null}add(g,v){const w=Oe.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Oe=new $(()=>new We,l=>l.reset());class We{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,dt=!1,st=new ye,me=()=>{const l=a.Promise.resolve(void 0);Be=()=>{l.then(p)}};var p=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(v){I(v)}var g=Oe;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}dt=!1};function m(){this.s=this.s,this.C=this.C}m.prototype.s=!1,m.prototype.ma=function(){this.s||(this.s=!0,this.N())},m.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return l}();function O(l,g){if(_.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(q){e:{try{J(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else v=="mouseover"?g=l.fromElement:v=="mouseout"&&(g=l.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:F[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&O.aa.h.call(this)}}E(O,_);var F={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),X=0;function re(l,g,v,w,U){this.listener=l,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=U,this.key=++X,this.da=this.fa=!1}function Pe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Je(l){this.src=l,this.g={},this.h=0}Je.prototype.add=function(l,g,v,w,U){var W=l.toString();l=this.g[W],l||(l=this.g[W]=[],this.h++);var oe=Ge(l,g,w,U);return-1<oe?(g=l[oe],v||(g.fa=!1)):(g=new re(g,this.src,W,!!w,U),g.fa=v,l.push(g)),g};function je(l,g){var v=g.type;if(v in l.g){var w=l.g[v],U=Array.prototype.indexOf.call(w,g,void 0),W;(W=0<=U)&&Array.prototype.splice.call(w,U,1),W&&(Pe(g),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Ge(l,g,v,w){for(var U=0;U<l.length;++U){var W=l[U];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==w)return U}return-1}var pt="closure_lm_"+(1e6*Math.random()|0),rn={};function ot(l,g,v,w,U){if(Array.isArray(g)){for(var W=0;W<g.length;W++)ot(l,g[W],v,w,U);return null}return v=Ne(v),l&&l[Q]?l.K(g,v,u(w)?!!w.capture:!!w,U):mt(l,g,v,!1,w,U)}function mt(l,g,v,w,U,W){if(!g)throw Error("Invalid event type");var oe=u(U)?!!U.capture:!!U,vt=te(l);if(vt||(l[pt]=vt=new Je(l)),v=vt.add(g,v,w,oe,W),v.proxy)return v;if(w=M(),v.proxy=w,w.src=l,w.listener=v,l.addEventListener)T||(U=oe),U===void 0&&(U=!1),l.addEventListener(g.toString(),w,U);else if(l.attachEvent)l.attachEvent(ae(g.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function M(){function l(v){return g.call(l.src,l.listener,v)}const g=se;return l}function D(l,g,v,w,U){if(Array.isArray(g))for(var W=0;W<g.length;W++)D(l,g[W],v,w,U);else w=u(w)?!!w.capture:!!w,v=Ne(v),l&&l[Q]?(l=l.i,g=String(g).toString(),g in l.g&&(W=l.g[g],v=Ge(W,v,w,U),-1<v&&(Pe(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete l.g[g],l.h--)))):l&&(l=te(l))&&(g=l.g[g.toString()],l=-1,g&&(l=Ge(g,v,w,U)),(v=-1<l?g[l]:null)&&H(v))}function H(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[Q])je(g.i,l);else{var v=l.type,w=l.proxy;g.removeEventListener?g.removeEventListener(v,w,l.capture):g.detachEvent?g.detachEvent(ae(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=te(g))?(je(v,l),v.h==0&&(v.src=null,g[pt]=null)):Pe(l)}}}function ae(l){return l in rn?rn[l]:rn[l]="on"+l}function se(l,g){if(l.da)l=!0;else{g=new O(g,this);var v=l.listener,w=l.ha||l.src;l.fa&&H(l),l=v.call(w,g)}return l}function te(l){return l=l[pt],l instanceof Je?l:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ne(l){return typeof l=="function"?l:(l[ve]||(l[ve]=function(g){return l.handleEvent(g)}),l[ve])}function Ke(){m.call(this),this.i=new Je(this),this.M=this,this.F=null}E(Ke,m),Ke.prototype[Q]=!0,Ke.prototype.removeEventListener=function(l,g,v,w){D(this,l,g,v,w)};function Ze(l,g){var v,w=l.F;if(w)for(v=[];w;w=w.F)v.push(w);if(l=l.M,w=g.type||g,typeof g=="string")g=new _(g,l);else if(g instanceof _)g.target=g.target||l;else{var U=g;g=new _(w,l),P(g,U)}if(U=!0,v)for(var W=v.length-1;0<=W;W--){var oe=g.g=v[W];U=vn(oe,w,!0,g)&&U}if(oe=g.g=l,U=vn(oe,w,!0,g)&&U,U=vn(oe,w,!1,g)&&U,v)for(W=0;W<v.length;W++)oe=g.g=v[W],U=vn(oe,w,!1,g)&&U}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var v=l.g[g],w=0;w<v.length;w++)Pe(v[w]);delete l.g[g],l.h--}}this.F=null},Ke.prototype.K=function(l,g,v,w){return this.i.add(String(l),g,!1,v,w)},Ke.prototype.L=function(l,g,v,w){return this.i.add(String(l),g,!0,v,w)};function vn(l,g,v,w){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,W=0;W<g.length;++W){var oe=g[W];if(oe&&!oe.da&&oe.capture==v){var vt=oe.listener,Zt=oe.ha||oe.src;oe.fa&&je(l.i,oe),U=vt.call(Zt,w)!==!1&&U}}return U&&!w.defaultPrevented}function Es(l,g,v){if(typeof l=="function")v&&(l=y(l,v));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(l,g||0)}function Vr(l){l.g=Es(()=>{l.g=null,l.i&&(l.i=!1,Vr(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class Ri extends m{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Vr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(l){m.call(this),this.h=l,this.g={}}E(Kn,m);var Ii=[];function xs(l){z(l.g,function(g,v){this.g.hasOwnProperty(v)&&H(g)},l),l.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),xs(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var B=a.JSON.stringify,L=a.JSON.parse,Z=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ce(){}ce.prototype.h=null;function le(l){return l.h||(l.h=l.i())}function fe(){}var be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){_.call(this,"d")}E(we,_);function Se(){_.call(this,"c")}E(Se,_);var Re={},gt=null;function Wt(){return gt=gt||new Ke}Re.La="serverreachability";function Ot(l){_.call(this,Re.La,l)}E(Ot,_);function Kt(l){const g=Wt();Ze(g,new Ot(g))}Re.STAT_EVENT="statevent";function yn(l,g){_.call(this,Re.STAT_EVENT,l),this.stat=g}E(yn,_);function It(l){const g=Wt();Ze(g,new yn(g,l))}Re.Ma="timingevent";function Ni(l,g){_.call(this,Re.Ma,l),this.size=g}E(Ni,_);function Mn(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},g)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function ek(l,g,v,w,U,W){l.info(function(){if(l.g)if(W)for(var oe="",vt=W.split("&"),Zt=0;Zt<vt.length;Zt++){var at=vt[Zt].split("=");if(1<at.length){var sn=at[0];at=at[1];var on=sn.split("_");oe=2<=on.length&&on[1]=="type"?oe+(sn+"="+at+"&"):oe+(sn+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+g+`
`+v+`
`+oe})}function tk(l,g,v,w,U,W,oe){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+g+`
`+v+`
`+W+" "+oe})}function Ts(l,g,v,w){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+rk(l,v)+(w?" "+w:"")})}function nk(l,g){l.info(function(){return"TIMEOUT: "+g})}On.prototype.info=function(){};function rk(l,g){if(!l.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var w=v[l];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<U.length;oe++)U[oe]=""}}}}return B(v)}catch{return g}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nd;function Gc(){}E(Gc,ce),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},Nd=new Gc;function Fr(l,g,v,w){this.j=l,this.i=g,this.l=v,this.R=w||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eg}function eg(){this.i=null,this.g="",this.h=!1}var tg={},Pd={};function jd(l,g,v){l.L=1,l.v=Jc(gr(g)),l.m=v,l.P=!0,ng(l,null)}function ng(l,g){l.F=Date.now(),Hc(l),l.A=gr(l.v);var v=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),gg(v.i,"t",w),l.C=0,v=l.j.J,l.h=new eg,l.g=Mg(l.j,v?g:null,!l.m),0<l.O&&(l.M=new Ri(y(l.Y,l,l.g),l.O)),g=l.U,v=l.g,w=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ii[0]=U.toString()),U=Ii);for(var W=0;W<U.length;W++){var oe=ot(v,U[W],w||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),Kt(),ek(l.i,l.u,l.A,l.l,l.R,l.m)}Fr.prototype.ca=function(l){l=l.target;const g=this.M;g&&vr(l)==3?g.j():this.Y(l)},Fr.prototype.Y=function(l){try{if(l==this.g)e:{const on=vr(this.g);var g=this.g.Ba();const Cs=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Eg(this.g)))){this.J||on!=4||g==7||(g==8||0>=Cs?Kt(3):Kt(2)),Md(this);var v=this.g.Z();this.X=v;t:if(rg(this)){var w=Eg(this.g);l="";var U=w.length,W=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),Jo(this);var oe="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,l+=this.h.i.decode(w[g],{stream:!(W&&g==U-1)});w.length=0,this.h.g+=l,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,tk(this.i,this.u,this.A,this.l,this.R,on,v),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,Zt=this.g;if((vt=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(vt)){var at=vt;break t}}at=null}if(v=at)Ts(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Od(this,v);else{this.o=!1,this.s=3,It(12),Pi(this),Jo(this);break e}}if(this.P){v=!0;let Dn;for(;!this.J&&this.C<oe.length;)if(Dn=ik(this,oe),Dn==Pd){on==4&&(this.s=4,It(14),v=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==tg){this.s=4,It(15),Ts(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else Ts(this.i,this.l,Dn,null),Od(this,Dn);if(rg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||oe.length!=0||this.h.h||(this.s=1,It(16),v=!1),this.o=this.o&&v,!v)Ts(this.i,this.l,oe,"[Invalid Chunked Response]"),Pi(this),Jo(this);else if(0<oe.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Bd(sn),sn.M=!0,It(11))}}else Ts(this.i,this.l,oe,null),Od(this,oe);on==4&&Pi(this),this.o&&!this.J&&(on==4?Ig(this.j,this):(this.o=!1,Hc(this)))}else wk(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Pi(this),Jo(this)}}}catch{}finally{}};function rg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ik(l,g){var v=l.C,w=g.indexOf(`
`,v);return w==-1?Pd:(v=Number(g.substring(v,w)),isNaN(v)?tg:(w+=1,w+v>g.length?Pd:(g=g.slice(w,w+v),l.C=w+v,g)))}Fr.prototype.cancel=function(){this.J=!0,Pi(this)};function Hc(l){l.S=Date.now()+l.I,ig(l,l.I)}function ig(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Mn(y(l.ba,l),g)}function Md(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Fr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(nk(this.i,this.A),this.L!=2&&(Kt(),It(17)),Pi(this),this.s=2,Jo(this)):ig(this,this.S-l)};function Jo(l){l.j.G==0||l.J||Ig(l.j,l)}function Pi(l){Md(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,xs(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function Od(l,g){try{var v=l.j;if(v.G!=0&&(v.g==l||Dd(v.h,l))){if(!l.K&&Dd(v.h,l)&&v.G==3){try{var w=v.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)nl(v),el(v);else break e;Ud(v),It(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Mn(y(v.Za,v),6e3));if(1>=ag(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Mi(v,11)}else if((l.K||v.g==l)&&nl(v),!V(g))for(U=v.Da.g.parse(g),g=0;g<U.length;g++){let at=U[g];if(v.T=at[0],at=at[1],v.G==2)if(at[0]=="c"){v.K=at[1],v.ia=at[2];const sn=at[3];sn!=null&&(v.la=sn,v.j.info("VER="+v.la));const on=at[4];on!=null&&(v.Aa=on,v.j.info("SVER="+v.Aa));const Cs=at[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(w=1.5*Cs,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Dn=l.g;if(Dn){const il=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var W=w.h;W.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ld(W,W.h),W.h=null))}if(w.D){const $d=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;$d&&(w.ya=$d,St(w.I,w.D,$d))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var oe=l;if(w.qa=jg(w,w.J?w.ia:null,w.W),oe.K){cg(w.h,oe);var vt=oe,Zt=w.L;Zt&&(vt.I=Zt),vt.B&&(Md(vt),Hc(vt)),w.g=oe}else Cg(w);0<v.i.length&&tl(v)}else at[0]!="stop"&&at[0]!="close"||Mi(v,7);else v.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Mi(v,7):Fd(v):at[0]!="noop"&&v.l&&v.l.ta(at),v.v=0)}}Kt(4)}catch{}}var sk=class{constructor(l,g){this.g=l,this.map=g}};function sg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function og(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ag(l){return l.h?1:l.g?l.g.size:0}function Dd(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Ld(l,g){l.g?l.g.add(g):l.h=g}function cg(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}sg.prototype.cancel=function(){if(this.i=lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function lg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const v of l.g.values())g=g.concat(v.D);return g}return C(l.i)}function ok(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var g=[],v=l.length,w=0;w<v;w++)g.push(l[w]);return g}g=[],v=0;for(w in l)g[v++]=l[w];return g}function ak(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var g=[];l=l.length;for(var v=0;v<l;v++)g.push(v);return g}g=[],v=0;for(const w in l)g[v++]=w;return g}}}function ug(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var v=ak(l),w=ok(l),U=w.length,W=0;W<U;W++)g.call(void 0,w[W],v&&v[W],l)}var dg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ck(l,g){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var w=l[v].indexOf("="),U=null;if(0<=w){var W=l[v].substring(0,w);U=l[v].substring(w+1)}else W=l[v];g(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ji(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ji){this.h=l.h,Kc(this,l.j),this.o=l.o,this.g=l.g,Yc(this,l.s),this.l=l.l;var g=l.i,v=new Xo;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),hg(this,v),this.m=l.m}else l&&(g=String(l).match(dg))?(this.h=!1,Kc(this,g[1]||"",!0),this.o=Zo(g[2]||""),this.g=Zo(g[3]||"",!0),Yc(this,g[4]),this.l=Zo(g[5]||"",!0),hg(this,g[6]||"",!0),this.m=Zo(g[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}ji.prototype.toString=function(){var l=[],g=this.j;g&&l.push(Qo(g,fg,!0),":");var v=this.g;return(v||g=="file")&&(l.push("//"),(g=this.o)&&l.push(Qo(g,fg,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Qo(v,v.charAt(0)=="/"?dk:uk,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Qo(v,fk)),l.join("")};function gr(l){return new ji(l)}function Kc(l,g,v){l.j=v?Zo(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Yc(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function hg(l,g,v){g instanceof Xo?(l.i=g,pk(l.i,l.h)):(v||(g=Qo(g,hk)),l.i=new Xo(g,l.h))}function St(l,g,v){l.i.set(g,v)}function Jc(l){return St(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Zo(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Qo(l,g,v){return typeof l=="string"?(l=encodeURI(l).replace(g,lk),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function lk(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fg=/[#\/\?@]/g,uk=/[#\?:]/g,dk=/[#\?]/g,hk=/[#\?@]/g,fk=/#/g;function Xo(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function Ur(l){l.g||(l.g=new Map,l.h=0,l.i&&ck(l.i,function(g,v){l.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Xo.prototype,n.add=function(l,g){Ur(this),this.i=null,l=ks(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(g),this.h+=1,this};function pg(l,g){Ur(l),g=ks(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function mg(l,g){return Ur(l),g=ks(l,g),l.g.has(g)}n.forEach=function(l,g){Ur(this),this.g.forEach(function(v,w){v.forEach(function(U){l.call(g,U,w,this)},this)},this)},n.na=function(){Ur(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let w=0;w<g.length;w++){const U=l[w];for(let W=0;W<U.length;W++)v.push(g[w])}return v},n.V=function(l){Ur(this);let g=[];if(typeof l=="string")mg(this,l)&&(g=g.concat(this.g.get(ks(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)g=g.concat(l[v])}return g},n.set=function(l,g){return Ur(this),this.i=null,l=ks(this,l),mg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function gg(l,g,v){pg(l,g),0<v.length&&(l.i=null,l.g.set(ks(l,g),C(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var w=g[v];const W=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var U=W;oe[w]!==""&&(U+="="+encodeURIComponent(String(oe[w]))),l.push(U)}}return this.i=l.join("&")};function ks(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function pk(l,g){g&&!l.j&&(Ur(l),l.i=null,l.g.forEach(function(v,w){var U=w.toLowerCase();w!=U&&(pg(this,w),gg(this,U,v))},l)),l.j=g}function mk(l,g){const v=new On;if(a.Image){const w=new Image;w.onload=b(Br,v,"TestLoadImage: loaded",!0,g,w),w.onerror=b(Br,v,"TestLoadImage: error",!1,g,w),w.onabort=b(Br,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=b(Br,v,"TestLoadImage: timeout",!1,g,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else g(!1)}function gk(l,g){const v=new On,w=new AbortController,U=setTimeout(()=>{w.abort(),Br(v,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:w.signal}).then(W=>{clearTimeout(U),W.ok?Br(v,"TestPingServer: ok",!0,g):Br(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Br(v,"TestPingServer: error",!1,g)})}function Br(l,g,v,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(v)}catch{}}function vk(){this.g=new Z}function yk(l,g,v){const w=v||"";try{ug(l,function(U,W){let oe=U;u(U)&&(oe=B(U)),g.push(w+W+"="+encodeURIComponent(oe))})}catch(U){throw g.push(w+"type="+encodeURIComponent("_badmap")),U}}function Zc(l){this.l=l.Ub||null,this.j=l.eb||!1}E(Zc,ce),Zc.prototype.g=function(){return new Qc(this.l,this.j)},Zc.prototype.i=function(l){return function(){return l}}({});function Qc(l,g){Ke.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Qc,Ke),n=Qc.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,ta(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?ea(this):ta(this),this.readyState==3&&vg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ea(this))},n.Qa=function(l){this.g&&(this.response=l,ea(this))},n.ga=function(){this.g&&ea(this)};function ea(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ta(l)}n.setRequestHeader=function(l,g){this.u.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=g.next();return l.join(`\r
`)};function ta(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yg(l){let g="";return z(l,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function Vd(l,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=yg(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):St(l,g,v))}function Nt(l){Ke.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Nt,Ke);var _k=/^https?$/i,bk=["POST","PUT"];n=Nt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nd.g(),this.v=this.o?le(this.o):le(Nd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(W){_g(this,W);return}if(l=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)v.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())v.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bk,g,void 0))||w||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of v)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sg(this),this.u=!0,this.g.send(l),this.u=!1}catch(W){_g(this,W)}};function _g(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,bg(l),Xc(l)}function bg(l){l.A||(l.A=!0,Ze(l,"complete"),Ze(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ze(this,"complete"),Ze(this,"abort"),Xc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wg(this):this.bb())},n.bb=function(){wg(this)};function wg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||vr(l)!=4||l.Z()!=2)){if(l.u&&vr(l)==4)Es(l.Ea,0,l);else if(Ze(l,"readystatechange"),vr(l)==4){l.h=!1;try{const oe=l.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=oe===0){var U=String(l.D).match(dg)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),w=!_k.test(U?U.toLowerCase():"")}v=w}if(v)Ze(l,"complete"),Ze(l,"success");else{l.m=6;try{var W=2<vr(l)?l.g.statusText:""}catch{W=""}l.l=W+" ["+l.Z()+"]",bg(l)}}finally{Xc(l)}}}}function Xc(l,g){if(l.g){Sg(l);const v=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Ze(l,"ready");try{v.onreadystatechange=w}catch{}}}function Sg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function vr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),L(g)}};function Eg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function wk(l){const g={};l=(l.g&&2<=vr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(V(l[w]))continue;var v=j(l[w]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[U]||[];g[U]=W,W.push(v)}k(g,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(l,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||g}function xg(l){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,l),this.cb=na("retryDelaySeedMs",1e4,l),this.Wa=na("forwardChannelMaxRetries",2,l),this.wa=na("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new sg(l&&l.concurrentRequestLimit),this.Da=new vk,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xg.prototype,n.la=8,n.G=1,n.connect=function(l,g,v,w){It(0),this.W=l,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=jg(this,null,this.W),tl(this)};function Fd(l){if(Tg(l),l.G==3){var g=l.U++,v=gr(l.I);if(St(v,"SID",l.K),St(v,"RID",g),St(v,"TYPE","terminate"),ra(l,v),g=new Fr(l,l.j,g),g.L=2,g.v=Jc(gr(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=Mg(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hc(g)}Pg(l)}function el(l){l.g&&(Bd(l),l.g.cancel(),l.g=null)}function Tg(l){el(l),l.u&&(a.clearTimeout(l.u),l.u=null),nl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function tl(l){if(!og(l.h)&&!l.s){l.s=!0;var g=l.Ga;Be||me(),dt||(Be(),dt=!0),st.add(g,l),l.B=0}}function Sk(l,g){return ag(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Mn(y(l.Ga,l,g),Ng(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new Fr(this,this.j,l);let W=this.o;if(this.S&&(W?(W=S(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ag(this,U,g),v=gr(this.I),St(v,"RID",l),St(v,"CVER",22),this.D&&St(v,"X-HTTP-Session-Id",this.D),ra(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(yg(W)))+"&"+g:this.m&&Vd(v,this.m,W)),Ld(this.h,U),this.Ua&&St(v,"TYPE","init"),this.P?(St(v,"$req",g),St(v,"SID","null"),U.T=!0,jd(U,v,null)):jd(U,v,g),this.G=2}}else this.G==3&&(l?kg(this,l):this.i.length==0||og(this.h)||kg(this))};function kg(l,g){var v;g?v=g.l:v=l.U++;const w=gr(l.I);St(w,"SID",l.K),St(w,"RID",v),St(w,"AID",l.T),ra(l,w),l.m&&l.o&&Vd(w,l.m,l.o),v=new Fr(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),g&&(l.i=g.D.concat(l.i)),g=Ag(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ld(l.h,v),jd(v,w,g)}function ra(l,g){l.H&&z(l.H,function(v,w){St(g,w,v)}),l.l&&ug({},function(v,w){St(g,w,v)})}function Ag(l,g,v){v=Math.min(l.i.length,v);var w=l.l?y(l.l.Na,l.l,l):null;e:{var U=l.i;let W=-1;for(;;){const oe=["count="+v];W==-1?0<v?(W=U[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let vt=!0;for(let Zt=0;Zt<v;Zt++){let at=U[Zt].g;const sn=U[Zt].map;if(at-=W,0>at)W=Math.max(0,U[Zt].g-100),vt=!1;else try{yk(sn,oe,"req"+at+"_")}catch{w&&w(sn)}}if(vt){w=oe.join("&");break e}}}return l=l.i.splice(0,v),g.D=l,w}function Cg(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;Be||me(),dt||(Be(),dt=!0),st.add(g,l),l.v=0}}function Ud(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Mn(y(l.Fa,l),Ng(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Mn(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),el(this),Rg(this))};function Bd(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Rg(l){l.g=new Fr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=gr(l.qa);St(g,"RID","rpc"),St(g,"SID",l.K),St(g,"AID",l.T),St(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&St(g,"TO",l.ja),St(g,"TYPE","xmlhttp"),ra(l,g),l.m&&l.o&&Vd(g,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Jc(gr(g)),v.m=null,v.P=!0,ng(v,l)}n.Za=function(){this.C!=null&&(this.C=null,el(this),Ud(this),It(19))};function nl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Ig(l,g){var v=null;if(l.g==g){nl(l),Bd(l),l.g=null;var w=2}else if(Dd(l.h,g))v=g.D,cg(l.h,g),w=1;else return;if(l.G!=0){if(g.o)if(w==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var U=l.B;w=Wt(),Ze(w,new Ni(w,v)),tl(l)}else Cg(l);else if(U=g.s,U==3||U==0&&0<g.X||!(w==1&&Sk(l,g)||w==2&&Ud(l)))switch(v&&0<v.length&&(g=l.h,g.i=g.i.concat(v)),U){case 1:Mi(l,5);break;case 4:Mi(l,10);break;case 3:Mi(l,6);break;default:Mi(l,2)}}}function Ng(l,g){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*g}function Mi(l,g){if(l.j.info("Error code "+g),g==2){var v=y(l.fb,l),w=l.Xa;const U=!w;w=new ji(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kc(w,"https"),Jc(w),U?mk(w.toString(),v):gk(w.toString(),v)}else It(2);l.G=0,l.l&&l.l.sa(g),Pg(l),Tg(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Pg(l){if(l.G=0,l.ka=[],l.l){const g=lg(l.h);(g.length!=0||l.i.length!=0)&&(N(l.ka,g),N(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function jg(l,g,v){var w=v instanceof ji?gr(v):new ji(v);if(w.g!="")g&&(w.g=g+"."+w.g),Yc(w,w.s);else{var U=a.location;w=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var W=new ji(null);w&&Kc(W,w),g&&(W.g=g),U&&Yc(W,U),v&&(W.l=v),w=W}return v=l.D,g=l.ya,v&&g&&St(w,v,g),St(w,"VER",l.la),ra(l,w),w}function Mg(l,g,v){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new Nt(new Zc({eb:v})):new Nt(l.pa),g.Ha(l.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Og(){}n=Og.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(l,g){return new kn(l,g)};function kn(l,g){Ke.call(this),this.g=new xg(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!V(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!V(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new As(this)}E(kn,Ke),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Fd(this.g)},kn.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=B(l),l=v);g.i.push(new sk(g.Ya++,l)),g.G==3&&tl(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,Fd(this.g),delete this.g,kn.aa.N.call(this)};function Dg(l){we.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const v in g){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}E(Dg,we);function Lg(){Se.call(this),this.status=1}E(Lg,Se);function As(l){this.g=l}E(As,Og),As.prototype.ua=function(){Ze(this.g,"a")},As.prototype.ta=function(l){Ze(this.g,new Dg(l))},As.prototype.sa=function(l){Ze(this.g,new Lg)},As.prototype.ra=function(){Ze(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,kx=function(){return new rl},Tx=function(){return Wt()},xx=Re,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,$l=Wc,Xm.COMPLETE="complete",Ex=Xm,fe.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Ea=fe,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,Sx=Nt}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const Sb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new _m("@firebase/firestore");function ga(){return fs.logLevel}function ge(n,...e){if(fs.logLevel<=et.DEBUG){const t=e.map(Sm);fs.debug(`Firestore (${Wo}): ${n}`,...t)}}function Rr(n,...e){if(fs.logLevel<=et.ERROR){const t=e.map(Sm);fs.error(`Firestore (${Wo}): ${n}`,...t)}}function Io(n,...e){if(fs.logLevel<=et.WARN){const t=e.map(Sm);fs.warn(`Firestore (${Wo}): ${n}`,...t)}}function Sm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n="Unexpected state"){const e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function Mt(n,e){n||Ue()}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class U9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B9{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new es;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new es,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new es)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt(typeof r.accessToken=="string"),new Ax(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string"),new cn(e)}}class $9{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z9{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $9(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Mt(this.o===void 0);const r=s=>{s.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt(typeof t.token=="string"),this.R=t.token,new q9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function No(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new xn(0,0))}static max(){return new De(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ue(),r===void 0?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return pc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pt extends pc{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const K9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends pc{construct(e,t,r){return new mn(e,t,r)}static isValidIdentifier(e){return K9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Pt.fromString(e))}static fromName(e){return new Ce(Pt.fromString(e).popFirst(5))}static empty(){return new Ce(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Pt(e.slice()))}}function Y9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new xn(t+1,0):new xn(t,r));return new Ei(i,Ce.empty(),e)}function J9(n){return new Ei(n.readTime,n.key,-1)}class Ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ei(De.min(),Ce.empty(),-1)}static max(){return new Ei(De.max(),Ce.empty(),-1)}}function Z9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Q9)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Y((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function e5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xm.oe=-1;function _d(n){return n==null}function Xf(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=i??Xt.EMPTY,this.right=s??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Xt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xb(this.data.getIterator())}getIteratorFrom(e){return new xb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class xb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new ui([])}unionWith(e){let t=new tn(mn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Cx("Invalid base64 string: "+s):s}}(e);return new nn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const n5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(Mt(!!n),typeof n=="string"){let e=0;const t=n5.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function km(n){const e=n.mapValue.fields.__previous_value__;return Tm(e)?km(e):e}function mc(n){const e=xi(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class gc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tm(n)?4:s5(n)?9007199254740991:i5(n)?10:11:Ue()}function hr(n,e){if(n===e)return!0;const t=ms(n);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xi(i.timestampValue),a=xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ps(i.bytesValue).isEqual(ps(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ft(i.geoPointValue.latitude)===Ft(s.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ft(i.integerValue)===Ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ft(i.doubleValue),a=Ft(s.doubleValue);return o===a?Xf(o)===Xf(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return No(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Eb(o)!==Eb(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!hr(o[c],a[c])))return!1;return!0}(n,e);default:return Ue()}}function vc(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Po(n,e){if(n===e)return 0;const t=ms(n),r=ms(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ft(s.integerValue||s.doubleValue),c=Ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Tb(n.timestampValue,e.timestampValue);case 4:return Tb(mc(n),mc(e));case 5:return lt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ps(s),c=ps(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=lt(a[u],c[u]);if(h!==0)return h}return lt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=lt(Ft(s.latitude),Ft(o.latitude));return a!==0?a:lt(Ft(s.longitude),Ft(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kb(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,h;const f=s.fields||{},y=o.fields||{},b=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(c=y.value)===null||c===void 0?void 0:c.arrayValue,C=lt(((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:kb(b,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cl.mapValue&&o===Cl.mapValue)return 0;if(s===Cl.mapValue)return 1;if(o===Cl.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const y=lt(c[f],h[f]);if(y!==0)return y;const b=Po(a[c[f]],u[h[f]]);if(b!==0)return b}return lt(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ue()}}function Tb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=xi(n),r=xi(e),i=lt(t.seconds,r.seconds);return i!==0?i:lt(t.nanos,r.nanos)}function kb(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Po(t[i],r[i]);if(s)return s}return lt(t.length,r.length)}function jo(n){return ep(n)}function ep(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=xi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=ep(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ep(t.fields[o])}`;return i+"}"}(n.mapValue):Ue()}function tp(n){return!!n&&"integerValue"in n}function Am(n){return!!n&&"arrayValue"in n}function Ab(n){return!!n&&"nullValue"in n}function Cb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mh(n){return!!n&&"mapValue"in n}function i5(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ma(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ma(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ma(n.arrayValue.values[t]);return e}return Object.assign({},n)}function s5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(t)}setAll(e){let t=mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nr(Ma(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ln(e,0,De.min(),De.min(),De.min(),nr.empty(),0)}static newFoundDocument(e,t,r,i){return new ln(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new ln(e,2,t,De.min(),De.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,De.min(),De.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.position=e,this.inclusive=t}}function Rb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),t.key):r=Po(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ib(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function o5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class Ht extends Rx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new c5(e,t,r):t==="array-contains"?new d5(e,r):t==="in"?new h5(e,r):t==="not-in"?new f5(e,r):t==="array-contains-any"?new p5(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new l5(e,r):new u5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Po(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends Rx{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fr(e,t)}matches(e){return Ix(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ix(n){return n.op==="and"}function Nx(n){return a5(n)&&Ix(n)}function a5(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function np(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+jo(n.value);if(Nx(n))return n.filters.map(e=>np(e)).join(",");{const e=n.filters.map(t=>np(t)).join(",");return`${n.op}(${e})`}}function Px(n,e){return n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(n,e):n instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Px(o,i.filters[a]),!0):!1}(n,e):void Ue()}function jx(n){return n instanceof Ht?function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(jx).join(" ,")+"}"}(n):"Filter"}class c5 extends Ht{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class l5 extends Ht{constructor(e,t){super(e,"in",t),this.keys=Mx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class u5 extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=Mx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class d5 extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Am(t)&&vc(t.arrayValue,this.value)}}class h5 extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}}class f5 extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!vc(this.value.arrayValue,t)}}class p5 extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Am(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Nb(n,e=null,t=[],r=[],i=null,s=null,o=null){return new m5(n,e,t,r,i,s,o)}function Cm(n){const e=rt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>np(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jo(r)).join(",")),e.ue=t}return e.ue}function Rm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!o5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Px(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ib(n.startAt,e.startAt)&&Ib(n.endAt,e.endAt)}function rp(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function g5(n,e,t,r,i,s,o,a){return new wd(n,e,t,r,i,s,o,a)}function Ox(n){return new wd(n)}function Pb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function v5(n){return n.collectionGroup!==null}function Oa(n){const e=rt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(mn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Cu(s,r))}),t.has(mn.keyField().canonicalString())||e.ce.push(new Cu(mn.keyField(),r))}return e.ce}function or(n){const e=rt(n);return e.le||(e.le=y5(e,Oa(n))),e.le}function y5(n,e){if(n.limitType==="F")return Nb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Cu(i.field,s)});const t=n.endAt?new Au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Au(n.startAt.position,n.startAt.inclusive):null;return Nb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ip(n,e,t){return new wd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sd(n,e){return Rm(or(n),or(e))&&n.limitType===e.limitType}function Dx(n){return`${Cm(or(n))}|lt:${n.limitType}`}function Us(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jx(i)).join(", ")}]`),_d(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jo(i)).join(",")),`Target(${r})`}(or(n))}; limitType=${n.limitType})`}function Ed(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Oa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const u=Rb(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Oa(r),i)||r.endAt&&!function(o,a,c){const u=Rb(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Oa(r),i))}(n,e)}function _5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Lx(n){return(e,t)=>{let r=!1;for(const i of Oa(n)){const s=b5(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function b5(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Po(c,u):Ue()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return t5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=new $t(Ce.comparator);function Ti(){return w5}const Vx=new $t(Ce.comparator);function xa(...n){let e=Vx;for(const t of n)e=e.insert(t.key,t);return e}function S5(n){let e=Vx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qi(){return Da()}function Fx(){return Da()}function Da(){return new Go(n=>n.toString(),(n,e)=>n.isEqual(e))}const E5=new tn(Ce.comparator);function it(...n){let e=E5;for(const t of n)e=e.add(t);return e}const x5=new tn(lt);function T5(){return x5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function A5(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function C5(n,e,t){return n instanceof sp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tm(s)&&(s=km(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ru?Ux(n,e):n instanceof Iu?Bx(n,e):function(i,s){const o=I5(i,s),a=jb(o)+jb(i.Pe);return tp(o)&&tp(i.Pe)?A5(a):k5(i.serializer,a)}(n,e)}function R5(n,e,t){return n instanceof Ru?Ux(n,e):n instanceof Iu?Bx(n,e):t}function I5(n,e){return n instanceof op?function(r){return tp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class sp extends xd{}class Ru extends xd{constructor(e){super(),this.elements=e}}function Ux(n,e){const t=$x(e);for(const r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}class Iu extends xd{constructor(e){super(),this.elements=e}}function Bx(n,e){let t=$x(e);for(const r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}class op extends xd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jb(n){return Ft(n.integerValue||n.doubleValue)}function $x(n){return Am(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function N5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ru&&i instanceof Ru||r instanceof Iu&&i instanceof Iu?No(r.elements,i.elements,hr):r instanceof op&&i instanceof op?hr(r.Pe,i.Pe):r instanceof sp&&i instanceof sp}(n.transform,e.transform)}class ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Im{}function zx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new j5(n.key,ts.none()):new Nm(n.key,n.data,ts.none());{const t=n.data,r=nr.empty();let i=new tn(mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Td(n.key,r,new ui(i.toArray()),ts.none())}}function P5(n,e,t){n instanceof Nm?function(i,s,o){const a=i.value.clone(),c=Ob(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Td?function(i,s,o){if(!zl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ob(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(qx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function La(n,e,t,r){return n instanceof Nm?function(s,o,a,c){if(!zl(s.precondition,o))return a;const u=s.value.clone(),h=Db(s.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Td?function(s,o,a,c){if(!zl(s.precondition,o))return a;const u=Db(s.fieldTransforms,c,o),h=o.data;return h.setAll(qx(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return zl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Mb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&No(r,i,(s,o)=>N5(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nm extends Im{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Td extends Im{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ob(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,R5(o,a,t[i]))}return r}function Db(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,C5(s,o,e))}return r}class j5 extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&P5(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=La(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=La(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=zx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),it())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,r)=>Mb(t,r))&&No(this.baseMutations,e.baseMutations,(t,r)=>Mb(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,tt;function Wx(n){if(n===void 0)return Rr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case qt.OK:return ue.OK;case qt.CANCELLED:return ue.CANCELLED;case qt.UNKNOWN:return ue.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ue.INTERNAL;case qt.UNAVAILABLE:return ue.UNAVAILABLE;case qt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case qt.NOT_FOUND:return ue.NOT_FOUND;case qt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case qt.ABORTED:return ue.ABORTED;case qt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case qt.DATA_LOSS:return ue.DATA_LOSS;default:return Ue()}}(tt=qt||(qt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new Xi([4294967295,4294967295],0);function Lb(n){const e=L5().encode(n),t=new wx;return t.update(e),new Uint8Array(t.digest())}function Vb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xi([t,r],0),new Xi([i,s],0)]}class Pm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ta(`Invalid padding: ${t}`);if(r<0)throw new Ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xi.fromNumber(r)));return i.compare(V5)===1&&(i=new Xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Lb(e),[r,i]=Vb(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Pm(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=Lb(e),[r,i]=Vb(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kd(De.min(),i,new $t(lt),Ti(),it())}}class Fc{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fc(r,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Gx{constructor(e,t){this.targetId=e,this.me=t}}class Hx{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Fb{constructor(){this.fe=0,this.ge=Bb(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=it(),t=it(),r=it();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ue()}}),new Fc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Bb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class F5{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ti(),this.qe=Ub(),this.Qe=new $t(lt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(rp(s))if(r===0){const o=new Ce(s.path);this.Ue(t,o,ln.newNoDocument(o,De.min()))}else Mt(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ps(r).toUint8Array()}catch(c){if(c instanceof Cx)return Io("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Pm(o,i,s)}catch(c){return Io(c instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rp(a.target)){const c=new Ce(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ln.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=it();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new kd(e,t,this.Qe,this.ke,r);return this.ke=Ti(),this.qe=Ub(),this.Qe=new $t(lt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Fb,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tn(lt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fb),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ub(){return new $t(Ce.comparator)}function Bb(){return new $t(Ce.comparator)}const U5={asc:"ASCENDING",desc:"DESCENDING"},B5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$5={and:"AND",or:"OR"};class z5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ap(n,e){return n.useProto3Json||_d(e)?e:{value:e}}function q5(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ro(n){return Mt(!!n),De.fromTimestamp(function(t){const r=xi(t);return new xn(r.seconds,r.nanos)}(n))}function G5(n,e){return cp(n,e).canonicalString()}function cp(n,e){const t=function(i){return new Pt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Kx(n){const e=Pt.fromString(n);return Mt(Xx(e)),e}function Oh(n,e){const t=Kx(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(Jx(t))}function Yx(n,e){return G5(n.databaseId,e)}function H5(n){const e=Kx(n);return e.length===4?Pt.emptyPath():Jx(e)}function $b(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jx(n){return Mt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function K5(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Mt(h===void 0||typeof h=="string"),nn.fromBase64String(h||"")):(Mt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?ue.UNKNOWN:Wx(u.code);return new Te(h,u.message||"")}(o);t=new Hx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(n,r.document.name),s=ro(r.document.updateTime),o=r.document.createTime?ro(r.document.createTime):De.min(),a=new nr({mapValue:{fields:r.document.fields}}),c=ln.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new ql(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oh(n,r.document),s=r.readTime?ro(r.readTime):De.min(),o=ln.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ql([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oh(n,r.document),s=r.removedTargetIds||[];t=new ql([],s,i,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new D5(i,s),a=r.targetId;t=new Gx(a,o)}}return t}function Y5(n,e){return{documents:[Yx(n,e.path)]}}function J5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Yx(n,i);const s=function(u){if(u.length!==0)return Qx(fr.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(y){return{field:Bs(y.field),direction:X5(y.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=ap(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function Z5(n){let e=H5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){const y=Zx(f);return y instanceof fr&&Nx(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(y=>function(E){return new Cu($s(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(f){let y;return y=typeof f=="object"?f.value:f,_d(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(f){const y=!!f.before,b=f.values||[];return new Au(b,y)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const y=!f.before,b=f.values||[];return new Au(b,y)}(t.endAt)),g5(e,i,o,s,a,"F",c,u)}function Q5(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$s(t.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$s(t.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$s(t.unaryFilter.field);return Ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$s(t.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(n):n.fieldFilter!==void 0?function(t){return Ht.create($s(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(r=>Zx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue()}}(t.compositeFilter.op))}(n):Ue()}function X5(n){return U5[n]}function e6(n){return B5[n]}function t6(n){return $5[n]}function Bs(n){return{fieldPath:n.canonicalString()}}function $s(n){return mn.fromServerFormat(n.fieldPath)}function Qx(n){return n instanceof Ht?function(t){if(t.op==="=="){if(Cb(t.value))return{unaryFilter:{field:Bs(t.field),op:"IS_NAN"}};if(Ab(t.value))return{unaryFilter:{field:Bs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cb(t.value))return{unaryFilter:{field:Bs(t.field),op:"IS_NOT_NAN"}};if(Ab(t.value))return{unaryFilter:{field:Bs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(t.field),op:e6(t.op),value:t.value}}}(n):n instanceof fr?function(t){const r=t.getFilters().map(i=>Qx(i));return r.length===1?r[0]:{compositeFilter:{op:t6(t.op),filters:r}}}(n):Ue()}function Xx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r,i,s=De.min(),o=De.min(),a=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.ct=e}}function r6(n){const e=Z5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.un=new s6}addToCollectionParentIndex(e,t){return this.un.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Ei.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class s6{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(Pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mo(0)}static kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.changes=new Go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&La(r.mutation,i,ui.empty(),xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,it()).next(()=>r))}getLocalViewOfDocuments(e,t,r=it()){const i=qi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=xa();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=qi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,it()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ti();const o=Da(),a=function(){return Da()}();return t.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Td)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),La(h.mutation,u,h.mutation.getFieldMask(),xn.now())):o.set(u.key,ui.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new a6(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Da();let i=new $t((o,a)=>o-a),s=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let h=r.get(c)||ui.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(i.get(a.batchId)||it()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=Fx();h.forEach(y=>{if(!s.has(y)){const b=zx(t.get(y),r.get(y));b!==null&&f.set(y,b),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Y.resolve(qi());let a=-1,c=s;return o.next(u=>Y.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?Y.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,it())).next(h=>({batchId:a,changes:S5(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=xa();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,c=>{const u=function(f,y){return new wd(y,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,y)=>{o=o.insert(f,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ln.newInvalidDocument(h)))});let a=xa();return o.forEach((c,u)=>{const h=s.get(c);h!==void 0&&La(h.mutation,u,ui.empty(),xn.now()),Ed(t,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Y.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ro(i.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:r6(i.bundledQuery),readTime:ro(i.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.overlays=new $t(Ce.comparator),this.Ir=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qi();return Y.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=qi(),s=t.length+1,o=new Ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new $t((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=qi(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=qi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new O5(t,r));let s=this.Ir.get(t);s===void 0&&(s=it(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.Tr=new tn(Yt.Er),this.dr=new tn(Yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Yt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Yt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ce(new Pt([])),r=new Yt(t,e),i=new Yt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ce(new Pt([])),r=new Yt(t,e),i=new Yt(t,e+1);let s=it();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Yt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ce.comparator(e.key,t.key)||lt(e.wr,t.wr)}static Ar(e,t){return lt(e.wr,t.wr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tn(Yt.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M5(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,t){return Y.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yt(t,0),i=new Yt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(lt);return t.forEach(i=>{const s=new Yt(i,0),o=new Yt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Y.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ce.isDocumentKey(s)||(s=s.child(""));const o=new Yt(new Ce(s),0);let a=new tn(lt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),Y.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Mt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Y.forEach(t.mutations,i=>{const s=new Yt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Yt(t,0),i=this.br.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.Mr=e,this.docs=function(){return new $t(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ti();const o=t.path,a=new Ce(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Z9(J9(h),r)<=0||(i.has(h.key)||Ed(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ue()}Or(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new p6(this)}getSize(e){return Y.resolve(this.size)}}class p6 extends o6{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.persistence=e,this.Nr=new Go(t=>Cm(t),Rm),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jm,this.targetCount=0,this.kr=Mo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Kn(t),Y.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,t){this.qr={},this.overlays={},this.Qr=new xm(0),this.Kr=!1,this.Kr=!0,this.$r=new d6,this.referenceDelegate=e(this),this.Ur=new m6(this),this.indexManager=new i6,this.remoteDocumentCache=function(i){return new f6(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new n6(t),this.Gr=new l6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new h6(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new v6(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Y.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class v6 extends X9{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Jr=new jm,this.Yr=null}static Zr(e){return new Mm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,r=>{const i=Ce.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Y.or([()=>Y.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=it(),i=it();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Om(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return S$()?8:e5(dn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new y6;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ga()<=et.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Us(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(ga()<=et.DEBUG&&ge("QueryEngine","Query:",Us(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ga()<=et.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Us(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):Y.resolve())}Yi(e,t){if(Pb(t))return Y.resolve(null);let r=or(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ip(t,null,"F"),r=or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=it(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,ip(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return Pb(t)||i.isEqual(De.min())?Y.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?Y.resolve(null):(ga()<=et.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Us(t)),this.rs(e,o,t,Y9(i,-1)).next(a=>a))})}ts(e,t){let r=new tn(Lx(e));return t.forEach((i,s)=>{Ed(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ga()<=et.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Us(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ei.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new $t(lt),this._s=new Go(s=>Cm(s),Rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function w6(n,e,t,r){return new b6(n,e,t,r)}async function eT(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=it();for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function tT(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function S6(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,f)=>{const y=i.get(f);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,f)));let b=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(f,b),function(C,N,$){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(y,b,h)&&a.push(t.Ur.updateTargetData(s,b))});let c=Ti(),u=it();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(E6(s,o,e.documentUpdates).next(h=>{c=h.Ps,u=h.Is})),!r.isEqual(De.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function E6(n,e,t){let r=it(),i=it();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ti();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function x6(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new di(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function lp(n,e,t){const r=rt(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vc(o))throw o;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function zb(n,e,t){const r=rt(n);let i=De.min(),s=it();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=rt(c),y=f._s.get(h);return y!==void 0?Y.resolve(f.os.get(y)):f.Ur.getTargetData(u,h)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:it())).next(a=>(T6(r,_5(e),a),{documents:a,Ts:s})))}function T6(n,e,t){let r=n.us.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}class qb{constructor(){this.activeTargetIds=T5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k6{constructor(){this.so=new qb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function Dh(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class I6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=Dh(),c=this.xo(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(h=>(ge("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Io("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=C6[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Dh();return new Promise((o,a)=>{const c=new Sx;c.setWithCredentials(!0),c.listenOnce(Ex.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $l.NO_ERROR:const h=c.getResponseJson();ge(an,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case $l.TIMEOUT:ge(an,`RPC '${e}' ${s} timed out`),a(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case $l.HTTP_ERROR:const f=c.getStatus();if(ge(an,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const E=function(N){const $=N.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf($)>=0?$:ue.UNKNOWN}(b.status);a(new Te(E,b.message))}else a(new Te(ue.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{ge(an,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ge(an,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=Dh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kx(),a=Tx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=s.join("");ge(an,`Creating RPC '${e}' stream ${i}: ${h}`,c);const f=o.createWebChannel(h,c);let y=!1,b=!1;const E=new R6({Io:N=>{b?ge(an,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(ge(an,`Opening RPC '${e}' stream ${i} transport.`),f.open(),y=!0),ge(an,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),C=(N,$,V)=>{N.listen($,G=>{try{V(G)}catch(J){setTimeout(()=>{throw J},0)}})};return C(f,Ea.EventType.OPEN,()=>{b||(ge(an,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),C(f,Ea.EventType.CLOSE,()=>{b||(b=!0,ge(an,`RPC '${e}' stream ${i} transport closed`),E.So())}),C(f,Ea.EventType.ERROR,N=>{b||(b=!0,Io(an,`RPC '${e}' stream ${i} transport errored:`,N),E.So(new Te(ue.UNAVAILABLE,"The operation could not be completed")))}),C(f,Ea.EventType.MESSAGE,N=>{var $;if(!b){const V=N.data[0];Mt(!!V);const G=V,J=G.error||(($=G[0])===null||$===void 0?void 0:$.error);if(J){ge(an,`RPC '${e}' stream ${i} received error:`,J);const q=J.status;let z=function(A){const P=qt[A];if(P!==void 0)return Wx(P)}(q),k=J.message;z===void 0&&(z=ue.INTERNAL,k="Unknown error status: "+q+" with message "+J.message),b=!0,E.So(new Te(z,k)),f.close()}else ge(an,`RPC '${e}' stream ${i} received:`,V),E.bo(V)}}),C(a,xx.STAT_EVENT,N=>{N.stat===Qf.PROXY?ge(an,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Qf.NOPROXY&&ge(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n){return new z5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rT(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Te(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P6 extends N6{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=K5(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?ro(o.readTime):De.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=$b(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=rp(c)?{documents:Y5(s,c)}:{query:J5(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=W5(s,o.resumeToken);const u=ap(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=q5(s,o.snapshotVersion.toTimestamp());const u=ap(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Q5(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=$b(this.serializer),t.removeTarget=e,this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ue.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cp(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ue.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class M6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rr(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Bc(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=rt(c);u.L_.add(4),await Uc(u),u.q_.set("Unknown"),u.L_.delete(4),await Ad(u)}(this))})}),this.q_=new M6(r,i)}}async function Ad(n){if(Bc(n))for(const e of n.B_)await e(!0)}async function Uc(n){for(const e of n.B_)await e(!1)}function iT(n,e){const t=rt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Fm(t)?Vm(t):Ho(t).r_()&&Lm(t,e))}function Dm(n,e){const t=rt(n),r=Ho(t);t.N_.delete(e),r.r_()&&sT(t,e),t.N_.size===0&&(r.r_()?r.o_():Bc(t)&&t.q_.set("Unknown"))}function Lm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(n).A_(e)}function sT(n,e){n.Q_.xe(e),Ho(n).R_(e)}function Vm(n){n.Q_=new F5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ho(n).start(),n.q_.v_()}function Fm(n){return Bc(n)&&!Ho(n).n_()&&n.N_.size>0}function Bc(n){return rt(n).L_.size===0}function oT(n){n.Q_=void 0}async function D6(n){n.q_.set("Online")}async function L6(n){n.N_.forEach((e,t)=>{Lm(n,e)})}async function V6(n,e){oT(n),Fm(n)?(n.q_.M_(e),Vm(n)):n.q_.set("Unknown")}async function F6(n,e,t){if(n.q_.set("Online"),e instanceof Hx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gb(n,r)}else if(e instanceof ql?n.Q_.Ke(e):e instanceof Gx?n.Q_.He(e):n.Q_.We(e),!t.isEqual(De.min()))try{const r=await tT(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),sT(s,c);const f=new di(h.target,c,u,h.sequenceNumber);Lm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await Gb(n,r)}}async function Gb(n,e,t){if(!Vc(e))throw e;n.L_.add(1),await Uc(n),n.q_.set("Offline"),t||(t=()=>tT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Ad(n)})}async function Hb(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=Bc(t);t.L_.add(3),await Uc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Ad(t)}async function U6(n,e){const t=rt(n);e?(t.L_.delete(2),await Ad(t)):e||(t.L_.add(2),await Uc(t),t.q_.set("Unknown"))}function Ho(n){return n.K_||(n.K_=function(t,r,i){const s=rt(t);return s.w_(),new P6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:D6.bind(null,n),Ro:L6.bind(null,n),mo:V6.bind(null,n),d_:F6.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Fm(n)?Vm(n):n.q_.set("Unknown")):(await n.K_.stop(),oT(n))})),n.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Um(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aT(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),Vc(n))return new Te(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=xa(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.W_=new $t(Ce.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Oo{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Oo(e,t,io.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $6{constructor(){this.queries=Yb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=rt(t),s=i.queries;i.queries=Yb(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function Yb(){return new Go(n=>Dx(n),Sd)}async function z6(n,e){const t=rt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new B6,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=aT(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Bm(t)}async function q6(n,e){const t=rt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function W6(n,e){const t=rt(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Bm(t)}function G6(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function Bm(n){n.Y_.forEach(e=>{e.next()})}var up,Jb;(Jb=up||(up={})).ea="default",Jb.Cache="cache";class H6{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class K6{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=it(),this.mutatedKeys=it(),this.Aa=Lx(e),this.Ra=new io(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Kb,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const y=i.get(h),b=Ed(this.query,f)?f:null,E=!!y&&this.mutatedKeys.has(y.key),C=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let N=!1;y&&b?y.data.isEqual(b.data)?E!==C&&(r.track({type:3,doc:b}),N=!0):this.ga(y,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.Aa(b,c)>0||u&&this.Aa(b,u)<0)&&(a=!0)):!y&&b?(r.track({type:0,doc:b}),N=!0):y&&!b&&(r.track({type:1,doc:y}),N=!0,(c||u)&&(a=!0)),N&&(b?(o=o.add(b),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(b,E){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return C(b)-C(E)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Oo(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=it(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new lT(r))}),this.da.forEach(r=>{e.has(r)||t.push(new cT(r))}),t}ba(e){this.Ta=e.Ts,this.da=it();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Y6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class J6{constructor(e){this.key=e,this.va=!1}}class Z6{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Go(a=>Dx(a),Sd),this.Ma=new Map,this.xa=new Set,this.Oa=new $t(Ce.comparator),this.Na=new Map,this.La=new jm,this.Ba={},this.ka=new Map,this.qa=Mo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Q6(n,e,t=!0){const r=pT(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await uT(r,e,t,!0),i}async function X6(n,e){const t=pT(n);await uT(t,e,!0,!1)}async function uT(n,e,t,r){const i=await x6(n.localStore,or(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await e3(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&iT(n.remoteStore,i),a}async function e3(n,e,t,r,i){n.Ka=(f,y,b)=>async function(C,N,$,V){let G=N.view.ma($);G.ns&&(G=await zb(C.localStore,N.query,!1).then(({documents:k})=>N.view.ma(k,G)));const J=V&&V.targetChanges.get(N.targetId),q=V&&V.targetMismatches.get(N.targetId)!=null,z=N.view.applyChanges(G,C.isPrimaryClient,J,q);return Qb(C,N.targetId,z.wa),z.snapshot}(n,f,y,b);const s=await zb(n.localStore,e,!0),o=new K6(e,s.Ts),a=o.ma(s.documents),c=Fc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);Qb(n,t,u.wa);const h=new Y6(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function t3(n,e,t){const r=rt(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Sd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Dm(r.remoteStore,i.targetId),dp(r,i.targetId)}).catch(Em)):(dp(r,i.targetId),await lp(r.localStore,i.targetId,!0))}async function n3(n,e){const t=rt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Dm(t.remoteStore,r.targetId))}async function dT(n,e){const t=rt(n);try{const r=await S6(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Mt(o.va):i.removedDocuments.size>0&&(Mt(o.va),o.va=!1))}),await fT(t,r,e)}catch(r){await Em(r)}}function Zb(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=rt(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const y of f.j_)y.Z_(a)&&(u=!0)}),u&&Bm(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function r3(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new $t(Ce.comparator);o=o.insert(s,ln.newNoDocument(s,De.min()));const a=it().add(s),c=new kd(De.min(),new Map,new $t(lt),o,a);await dT(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),$m(r)}else await lp(r.localStore,e,!1).then(()=>dp(r,e,t)).catch(Em)}function dp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||hT(n,r)})}function hT(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Dm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$m(n))}function Qb(n,e,t){for(const r of t)r instanceof cT?(n.La.addReference(r.key,e),i3(n,r)):r instanceof lT?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||hT(n,r.key)):Ue()}function i3(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(r),$m(n))}function $m(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ce(Pt.fromString(e)),r=n.qa.next();n.Na.set(r,new J6(t)),n.Oa=n.Oa.insert(t,r),iT(n.remoteStore,new di(or(Ox(t.path)),r,"TargetPurposeLimboResolution",xm.oe))}}async function fT(n,e,t){const r=rt(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Om.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,u){const h=rt(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Y.forEach(u,y=>Y.forEach(y.$i,b=>h.persistence.referenceDelegate.addReference(f,y.targetId,b)).next(()=>Y.forEach(y.Ui,b=>h.persistence.referenceDelegate.removeReference(f,y.targetId,b)))))}catch(f){if(!Vc(f))throw f;ge("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const y=f.targetId;if(!f.fromCache){const b=h.os.get(y),E=b.snapshotVersion,C=b.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(y,C)}}}(r.localStore,s))}async function s3(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await eT(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new Te(ue.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fT(t,r.hs)}}function o3(n,e){const t=rt(n),r=t.Na.get(e);if(r&&r.va)return it().add(r.key);{let i=it();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function pT(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r3.bind(null,e),e.Ca.d_=W6.bind(null,e.eventManager),e.Ca.$a=G6.bind(null,e.eventManager),e}class Nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nT(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return w6(this.persistence,new _6,e.initialUser,this.serializer)}Ga(e){return new g6(Mm.Zr,this.serializer)}Wa(e){return new k6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nu.provider={build:()=>new Nu};class hp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s3.bind(null,this.syncEngine),await U6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $6}()}createDatastore(e){const t=nT(e.databaseInfo.databaseId),r=function(s){return new I6(s)}(e.databaseInfo);return function(s,o,a,c){return new j6(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new O6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Zb(this.syncEngine,t,0),function(){return Wb.D()?new Wb:new A6}())}createSyncEngine(e,t){return function(i,s,o,a,c,u,h){const f=new Z6(i,s,o,a,c,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=rt(i);ge("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Uc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hp.provider={build:()=>new hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=H9.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ge("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ge("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=aT(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vh(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Xb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await l3(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Hb(e.remoteStore,i)),n._onlineComponents=e}async function l3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await Vh(n,new Nu)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Vh(n,new Nu);return n._offlineComponents}async function u3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await Xb(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await Xb(n,new hp))),n._onlineComponents}async function d3(n){const e=await u3(n),t=e.eventManager;return t.onListen=Q6.bind(null,e.syncEngine),t.onUnlisten=t3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=X6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n3.bind(null,e.syncEngine),t}function h3(n,e,t={}){const r=new es;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const h=new a3({next:y=>{h.Za(),o.enqueueAndForget(()=>q6(s,f)),y.fromCache&&c.source==="server"?u.reject(new Te(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),f=new H6(a,h,{includeMetadataChanges:!0,_a:!0});return z6(s,f)}(await d3(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map;function f3(n,e,t,r){if(e===!0&&r===!0)throw new Te(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t0(n){if(Ce.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function p3(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue()}function fp(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=p3(n);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F9;switch(r.type){case"firstParty":return new z9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=e0.get(t);r&&(ge("ComponentProvider","Removing Datastore"),e0.delete(t),r.terminate())}(this),Promise.resolve()}}function m3(n,e,t,r={}){var i;const s=(n=fp(n,zm))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=cn.MOCK_USER;else{a=m$(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new cn(u)}n._authCredentials=new U9(new Ax(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cd(this.firestore,e,this._query)}}class Ko{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ko(this.firestore,e,this._key)}}class so extends Cd{constructor(e,t,r){super(e,t,Ox(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ko(this.firestore,null,new Ce(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function g3(n,e,...t){if(n=Ss(n),n instanceof zm){const r=Pt.fromString(e,...t);return t0(r),new so(n,null,r)}{if(!(n instanceof Ko||n instanceof so))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return t0(r),new so(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rT(this,"async_queue_retry"),this.Vu=()=>{const r=Lh();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Lh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Lh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new es;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vc(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Um.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class gT extends zm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new r0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r0(e),this._firestoreClient=void 0,await e}}}function v3(n,e){const t=typeof n=="object"?n:yx(),r=typeof n=="string"?n:"(default)",i=wm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=f$("firestore");s&&m3(i,...s)}return i}function y3(n){if(n._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_3(n),n._firestoreClient}function _3(n){var e,t,r;const i=n._freezeSettings(),s=function(a,c,u,h){return new r5(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,mT(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new c3(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(nn.fromBase64String(e))}catch(t){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const S3=new RegExp("[~\\*/\\[\\]]");function E3(n,e,t){if(e.search(S3)>=0)throw i0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new vT(...e.split("."))._internalPath}catch{throw i0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function i0(n,e,t,r,i){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new Te(ue.INVALID_ARGUMENT,s+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ko(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_T("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class x3 extends yT{data(){return super.data()}}function _T(n,e){return typeof e=="string"?E3(n,e):e instanceof vT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k3{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ft(o.doubleValue));return new w3(s)}convertGeoPoint(e){return new b3(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=km(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const t=xi(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);Mt(Xx(r));const i=new gc(r.get(1),r.get(3)),s=new Ce(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A3 extends yT{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_T("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wl extends A3{data(e={}){return super.data(e)}}class C3{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Il(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wl(this._firestore,this._userDataWriter,r.key,r,new Il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Wl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Il(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Wl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Il(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:R3(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function R3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}class I3 extends k3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ko(this.firestore,null,t)}}function N3(n){n=fp(n,Cd);const e=fp(n.firestore,gT),t=y3(e),r=new I3(e);return T3(n._query),h3(t,n._query).then(i=>new C3(e,r,n,i))}(function(e,t=!0){(function(i){Wo=i})(qo),Ro(new hs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new gT(new B9(r.getProvider("auth-internal")),new W9(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vi(Sb,"4.7.3",e),vi(Sb,"4.7.3","esm2017")})();var P3="firebase",j3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(P3,j3,"app");function bT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M3=bT,wT=new Dc("auth","Firebase",bT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new _m("@firebase/auth");function O3(n,...e){ju.logLevel<=et.WARN&&ju.warn(`Auth (${qo}): ${n}`,...e)}function Gl(n,...e){ju.logLevel<=et.ERROR&&ju.error(`Auth (${qo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n,...e){throw qm(n,...e)}function ar(n,...e){return qm(n,...e)}function ST(n,e,t){const r=Object.assign(Object.assign({},M3()),{[e]:t});return new Dc("auth","Firebase",r).create(e,{appName:n.name})}function ns(n){return ST(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wT.create(n,...e)}function Ie(n,e,...t){if(!n)throw qm(e,...t)}function xr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gl(e),new Error(e)}function Nr(n,e){n||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function D3(){return s0()==="http:"||s0()==="https:"}function s0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D3()||_$()||"connection"in navigator)?navigator.onLine:!0}function V3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=g$()||b$()}get(){return L3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){Nr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new $c(3e4,6e4);function Gm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yo(n,e,t,r,i={}){return xT(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Lc(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},s);return y$()||(u.referrerPolicy="no-referrer"),ET.fetch()(TT(n,n.config.apiHost,t,a),u)})}async function xT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},F3),e);try{const i=new $3(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Nl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Nl(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Nl(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ST(n,h,u);Ir(n,h)}}catch(i){if(i instanceof Lr)throw i;Ir(n,"network-request-failed",{message:String(i)})}}async function B3(n,e,t,r,i={}){const s=await Yo(n,e,t,r,i);return"mfaPendingCredential"in s&&Ir(n,"multi-factor-auth-required",{_serverResponse:s}),s}function TT(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Wm(n.config,i):`${n.config.apiScheme}://${i}`}class $3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),U3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nl(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ar(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(n,e){return Yo(n,"POST","/v1/accounts:delete",e)}async function kT(n,e){return Yo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(n,e=!1){const t=Ss(n),r=await t.getIdToken(e),i=Hm(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Va(Fh(i.auth_time)),issuedAtTime:Va(Fh(i.iat)),expirationTime:Va(Fh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fh(n){return Number(n)*1e3}function Hm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const i=dx(t);return i?JSON.parse(i):(Gl("Failed to decode base64 JWT payload"),null)}catch(i){return Gl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o0(n){const e=Hm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Lr&&W3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function W3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(n){var e;const t=n.auth,r=await n.getIdToken(),i=await yc(n,kT(t,{idToken:r}));Ie(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?AT(s.providerUserInfo):[],a=K3(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function H3(n){const e=Ss(n);await Mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AT(n){return n.map(e=>{var{providerId:t}=e,r=_p(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3(n,e){const t=await xT(n,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=TT(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ET.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function J3(n,e){return Yo(n,"POST","/v2/accounts:revokeToken",Gm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=o0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Y3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new oo;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=_p(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q3(this,e)}reload(){return H3(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await yc(this,z3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,h;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,C=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,$=(u=t.createdAt)!==null&&u!==void 0?u:void 0,V=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:J,isAnonymous:q,providerData:z,stsTokenManager:k}=t;Ie(G&&k,e,"internal-error");const S=oo.fromJSON(this.name,k);Ie(typeof G=="string",e,"internal-error"),qr(f,e.name),qr(y,e.name),Ie(typeof J=="boolean",e,"internal-error"),Ie(typeof q=="boolean",e,"internal-error"),qr(b,e.name),qr(E,e.name),qr(C,e.name),qr(N,e.name),qr($,e.name),qr(V,e.name);const A=new Tr({uid:G,auth:e,email:y,emailVerified:J,displayName:f,isAnonymous:q,photoURL:E,phoneNumber:b,tenantId:C,stsTokenManager:S,createdAt:$,lastLoginAt:V});return z&&Array.isArray(z)&&(A.providerData=z.map(P=>Object.assign({},P))),N&&(A._redirectEventId=N),A}static async _fromIdTokenResponse(e,t,r=!1){const i=new oo;i.updateFromServerResponse(t);const s=new Tr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mu(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ie(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?AT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new oo;a.updateFromIdToken(r);const c=new Tr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map;function kr(n){Nr(n instanceof Function,"Expected a class definition");let e=a0.get(n);return e?(Nr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CT.type="NONE";const c0=CT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n,e,t){return`firebase:${n}:${e}:${t}`}class ao{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hl("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ao(kr(c0),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||kr(c0);const o=Hl(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){const f=Tr._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ao(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ao(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MT(e))return"Blackberry";if(OT(e))return"Webos";if(IT(e))return"Safari";if((e.includes("chrome/")||NT(e))&&!e.includes("edge/"))return"Chrome";if(jT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RT(n=dn()){return/firefox\//i.test(n)}function IT(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NT(n=dn()){return/crios\//i.test(n)}function PT(n=dn()){return/iemobile/i.test(n)}function jT(n=dn()){return/android/i.test(n)}function MT(n=dn()){return/blackberry/i.test(n)}function OT(n=dn()){return/webos/i.test(n)}function Km(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Z3(n=dn()){var e;return Km(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Q3(){return w$()&&document.documentMode===10}function DT(n=dn()){return Km(n)||jT(n)||OT(n)||MT(n)||/windows phone/i.test(n)||PT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n,e=[]){let t;switch(n){case"Browser":t=l0(dn());break;case"Worker":t=`${l0(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(n,e={}){return Yo(n,"GET","/v2/passwordPolicy",Gm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=6;class nz{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:tz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new X3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kT(this,{idToken:e}),r=await Tr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(li(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(ns(this));const t=e?Ss(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ez(this),t=new nz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await J3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&O3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ym(n){return Ss(n)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=R$(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iz(n){Jm=n}function sz(n){return Jm.loadJS(n)}function oz(){return Jm.gapiScript}function az(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(n,e){const t=wm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Tu(s,e??{}))return i;Ir(i,"already-initialized")}return t.initialize({options:e})}function lz(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(kr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uz(n,e,t){const r=Ym(n);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=VT(e),{host:o,port:a}=dz(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),hz()}function VT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dz(n){const e=VT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:d0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:d0(o)}}}function d0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(n,e){return B3(n,"POST","/v1/accounts:signInWithIdp",Gm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz="http://localhost";class gs extends FT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=_p(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return co(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,co(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,co(e,t)}buildRequest(){const e={requestUri:fz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends UT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends zc{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ti.credential(t,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends zc{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends zc{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ri.credential(t,r)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Tr._fromIdTokenResponse(e,r,i),o=h0(r);return new Do({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=h0(r);return new Do({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function h0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Lr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ou.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ou(e,t,r,i)}}function BT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(n,s,e,r):s})}async function pz(n,e,t=!1){const r=await yc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Do._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(n,e,t=!1){const{auth:r}=n;if(li(r.app))return Promise.reject(ns(r));const i="reauthenticate";try{const s=await yc(n,BT(r,i,e,n),t);Ie(s.idToken,r,"internal-error");const o=Hm(s.idToken);Ie(o,r,"internal-error");const{sub:a}=o;return Ie(n.uid===a,r,"user-mismatch"),Do._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(n,e,t=!1){if(li(n.app))return Promise.reject(ns(n));const r="signIn",i=await BT(n,r,e),s=await Do._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function vz(n,e,t,r){return Ss(n).onIdTokenChanged(e,t,r)}function yz(n,e,t){return Ss(n).beforeAuthStateChanged(e,t)}const Du="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Du,"1"),this.storage.removeItem(Du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z=1e3,bz=10;class zT extends $T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Q3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bz):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},_z)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zT.type="LOCAL";const wz=zT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends $T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qT.type="SESSION";const WT=qT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),c=await Sz(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Zm("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const y=f;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function xz(n){cr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function Tz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kz(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Az(){return GT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",Cz=1,Lu="firebaseLocalStorage",KT="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Id(n,e){return n.transaction([Lu],e?"readwrite":"readonly").objectStore(Lu)}function Rz(){const n=indexedDB.deleteDatabase(HT);return new qc(n).toPromise()}function gp(){const n=indexedDB.open(HT,Cz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lu,{keyPath:KT})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lu)?e(r):(r.close(),await Rz(),e(await gp()))})})}async function f0(n,e,t){const r=Id(n,!0).put({[KT]:e,value:t});return new qc(r).toPromise()}async function Iz(n,e){const t=Id(n,!1).get(e),r=await new qc(t).toPromise();return r===void 0?null:r.value}function p0(n,e){const t=Id(n,!0).delete(e);return new qc(t).toPromise()}const Nz=800,Pz=3;class YT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Pz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rd._getInstance(Az()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Tz(),!this.activeServiceWorker)return;this.sender=new Ez(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await f0(e,Du,"1"),await p0(e,Du),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Iz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>p0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Id(i,!1).getAll();return new qc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YT.type="LOCAL";const jz=YT;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(n,e){return e?kr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends FT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Oz(n){return gz(n.auth,new Qm(n),n.bypassAuthState)}function Dz(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),mz(t,new Qm(n),n.bypassAuthState)}async function Lz(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),pz(t,new Qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oz;case"linkViaPopup":case"linkViaRedirect":return Lz;case"reauthViaPopup":case"reauthViaRedirect":return Dz;default:Ir(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new $c(2e3,1e4);class Ws extends JT{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vz.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz="pendingRedirect",Kl=new Map;class Uz extends JT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Kl.get(this.auth._key());if(!e){try{const r=await Bz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Kl.set(this.auth._key(),e)}return this.bypassAuthState||Kl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bz(n,e){const t=qz(e),r=zz(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $z(n,e){Kl.set(n._key(),e)}function zz(n){return kr(n._redirectPersistence)}function qz(n){return Hl(Fz,n.config.apiKey,n.name)}async function Wz(n,e,t=!1){if(li(n.app))return Promise.reject(ns(n));const r=Ym(n),i=Mz(r,e),o=await new Uz(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=10*60*1e3;class Hz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gz&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yz(n,e={}){return Yo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zz=/^https?/;async function Qz(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Yz(n);for(const t of e)try{if(Xz(t))return}catch{}Ir(n,"unauthorized-domain")}function Xz(n){const e=pp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Zz.test(t))return!1;if(Jz.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=new $c(3e4,6e4);function g0(){const n=cr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tq(n){return new Promise((e,t)=>{var r,i,s;function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),t(ar(n,"network-request-failed"))},timeout:eq.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{const a=az("iframefcb");return cr()[a]=()=>{gapi.load?o():t(ar(n,"network-request-failed"))},sz(`${oz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Yl=null,e})}let Yl=null;function nq(n){return Yl=Yl||tq(n),Yl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=new $c(5e3,15e3),iq="__/auth/iframe",sq="emulator/auth/iframe",oq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cq(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,sq):`https://${n.config.authDomain}/${iq}`,r={apiKey:e.apiKey,appName:n.name,v:qo},i=aq.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Lc(r).slice(1)}`}async function lq(n){const e=await nq(n),t=cr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:cq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ar(n,"network-request-failed"),a=cr().setTimeout(()=>{s(o)},rq.get());function c(){cr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dq=500,hq=600,fq="_blank",pq="http://localhost";class v0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mq(n,e,t,r=dq,i=hq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},uq),{width:r.toString(),height:i.toString(),top:s,left:o}),u=dn().toLowerCase();t&&(a=NT(u)?fq:t),RT(u)&&(e=e||pq,c.scrollbars="yes");const h=Object.entries(c).reduce((y,[b,E])=>`${y}${b}=${E},`,"");if(Z3(u)&&a!=="_self")return gq(e||"",a),new v0(null);const f=window.open(e||"",a,h);Ie(f,n,"popup-blocked");try{f.focus()}catch{}return new v0(f)}function gq(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq="__/auth/handler",yq="emulator/auth/handler",_q=encodeURIComponent("fac");async function y0(n,e,t,r,i,s){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qo,eventId:i};if(e instanceof UT){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",C$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof zc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await n._getAppCheckToken(),u=c?`#${_q}=${encodeURIComponent(c)}`:"";return`${bq(n)}?${Lc(a).slice(1)}${u}`}function bq({config:n}){return n.emulator?Wm(n,yq):`https://${n.authDomain}/${vq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class wq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WT,this._completeRedirectFn=Wz,this._overrideRedirectResult=$z}async _openPopup(e,t,r,i){var s;Nr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await y0(e,t,r,pp(),i);return mq(e,o,Zm())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await y0(e,t,r,pp(),i);return xz(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Nr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await lq(e),r=new Hz(e);return t.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uh,{type:Uh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Uh];o!==void 0&&t(!!o),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DT()||IT()||Km()}}const Sq=wq;var _0="@firebase/auth",b0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tq(n){Ro(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LT(n)},u=new rz(r,i,s,c);return lz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ro(new hs("auth-internal",e=>{const t=Ym(e.getProvider("auth").getImmediate());return(r=>new Eq(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(_0,b0,xq(n)),vi(_0,b0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=5*60,Aq=px("authIdTokenMaxAge")||kq;let w0=null;const Cq=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Aq)return;const i=t==null?void 0:t.token;w0!==i&&(w0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Rq(n=yx()){const e=wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=cz(n,{popupRedirectResolver:Sq,persistence:[jz,wz,WT]}),r=px("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Cq(s.toString());yz(t,o,()=>o(t.currentUser)),vz(t,a=>o(a))}}const i=hx("auth");return i&&uz(t,`http://${i}`),t}function Iq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iz({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ar("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Iq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tq("Browser");const Nq={apiKey:"AIzaSyBq-DPcggmKJYjpqBbT3HzZUgAjf204x_U",authDomain:"lawlink2-38e49.firebaseapp.com",projectId:"lawlink2-38e49",storageBucket:"lawlink2-38e49.firebasestorage.app",messagingSenderId:"359686521204",appId:"1:359686521204:web:8fc96612fb3aca3cae6c21",measurementId:"G-1ZCJQ77BS8"},QT=vx(Nq);Rq(QT);const Pq=v3(QT);async function jq(){return(await N3(g3(Pq,"profiles"))).docs.map(e=>({id:e.id,...e.data()}))}async function Mq(){return{activeUsers:156,newUsers:23,totalRevenue:15420,activeConsultations:45}}function Oq(){const[n,e]=R.useState(""),[t,r]=R.useState("all"),{data:i=[],isLoading:s,error:o}=cx({queryKey:["users"],queryFn:jq}),a=i.filter(c=>{const u=c.displayName.toLowerCase().includes(n.toLowerCase())||c.email.toLowerCase().includes(n.toLowerCase()),h=t==="all"||c.userType===t;return u&&h});return s?d.jsx("div",{className:"text-gray-600",children:"Loading users..."}):o?d.jsx("div",{className:"text-red-600",children:"Failed to load users"}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs(He,{children:["Users (",a.length,")"]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("input",{type:"text",value:n,onChange:c=>e(c.target.value),placeholder:"Search users...",value:t,onChange:c=>r(c.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Users"}),d.jsx("option",{value:"client",children:"Clients"}),d.jsx("option",{value:"consultant",children:"Consultants"})]}),d.jsx(qd,{variant:"primary",children:"Add User"})]})]}),d.jsx(xe,{children:d.jsx(rx,{data:a,columns:[{header:"User",cell:({row:c})=>d.jsxs("div",{className:"flex items-center",children:[c.photoURL?d.jsx("img",{className:"h-10 w-10 rounded-full",src:c.photoURL,alt:""}):d.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx("span",{className:"text-gray-500 font-medium",children:c.displayName.charAt(0)})}),d.jsxs("div",{className:"ml-4",children:[d.jsx(ie,{className:"font-medium",children:c.displayName}),d.jsx(ie,{className:"text-gray-500",children:c.email})]})]})},{header:"Type",cell:({row:c})=>d.jsx(Lt,{color:c.userType==="consultant"?"green":"blue",children:c.userType})},{header:"Joined",cell:({row:c})=>Jt(new Date(c.createdAt),"MMM d, yyyy")},{header:"Status",cell:()=>d.jsx(Lt,{color:"green",children:"Active"})},{header:"Actions",cell:({row:c})=>d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(qd,{variant:"secondary",size:"sm",children:"Edit"}),d.jsx(qd,{variant:"danger",size:"sm",children:"Disable"})]})}]})})]})}const Dq=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"}];function Lq(){const[n,e]=R.useState("7d"),{data:t,isLoading:r}=cx({queryKey:["systemMetrics",n],queryFn:Mq});return r?d.jsx("div",{children:"Loading analytics..."}):t?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(He,{children:"Platform Analytics"}),d.jsx("select",{value:n,onChange:i=>e(i.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Dq.map(i=>d.jsx("option",{value:i.value,children:i.label},i.value))})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs(xe,{decoration:"top",decorationColor:"blue",children:[d.jsx(ie,{children:"Active Users"}),d.jsx(en,{children:t.activeUsers}),d.jsx(ie,{className:"text-sm text-green-600",children:"+12% from last month"})]}),d.jsxs(xe,{decoration:"top",decorationColor:"green",children:[d.jsx(ie,{children:"Active Consultations"}),d.jsx(en,{children:t.activeConsultations}),d.jsx(ie,{className:"text-sm text-green-600",children:"+8% from last month"})]}),d.jsxs(xe,{decoration:"top",decorationColor:"purple",children:[d.jsx(ie,{children:"Total Revenue"}),d.jsxs(en,{children:["$",t.totalRevenue.toLocaleString()]}),d.jsx(ie,{className:"text-sm text-green-600",children:"+15% from last month"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"User Growth"}),d.jsx(k0,{className:"mt-4 h-72",data:[{month:"Jan",Users:100},{month:"Feb",Users:120},{month:"Mar",Users:150},{month:"Apr",Users:180},{month:"May",Users:220},{month:"Jun",Users:250}],index:"month",categories:["Users"],colors:["blue"]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Revenue Growth"}),d.jsx(wc,{className:"mt-4 h-72",data:[{month:"Jan",Revenue:5e3},{month:"Feb",Revenue:7500},{month:"Mar",Revenue:9e3},{month:"Apr",Revenue:12e3},{month:"May",Revenue:15e3},{month:"Jun",Revenue:18e3}],index:"month",categories:["Revenue"],colors:["purple"],valueFormatter:i=>`$${i.toLocaleString()}`})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"User Distribution"}),d.jsx(yp,{className:"mt-4 h-72",data:[{name:"Clients",value:65},{name:"Consultants",value:25},{name:"Admins",value:10}],category:"value",index:"name",colors:["blue","cyan","indigo"],valueFormatter:i=>`${i}%`})]})]}):d.jsx("div",{children:"Failed to load analytics"})}function Vq(){const[n,e]=R.useState("all"),[t,r]=R.useState("all"),[i,s]=R.useState("all"),a=[{id:"1",userId:"user1",userName:"John Doe",subject:"Payment Processing Error",description:"Unable to complete payment for consultation",status:"open",priority:"high",category:"billing",createdAt:new Date,updatedAt:new Date,responses:[]},{id:"2",userId:"user2",userName:"Jane Smith",subject:"Account Access Issue",description:"Cannot log into the platform",status:"in_progress",priority:"medium",category:"technical",assignedTo:"Support Team A",createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-36e5),responses:[{id:"r1",userId:"support1",userName:"Support Agent",message:"We are investigating the issue",createdAt:new Date(Date.now()-36e5)}]}].filter(h=>{const f=t==="all"||h.status===t,y=i==="all"||h.priority===i;return f&&y}),c=h=>{switch(h){case"open":return"yellow";case"in_progress":return"blue";case"resolved":return"green";case"closed":return"gray"}},u=h=>{switch(h){case"low":return"gray";case"medium":return"yellow";case"high":return"red"}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(He,{children:"Support Dashboard"}),d.jsx(jt,{variant:"primary",children:"Create Ticket"})]}),d.jsxs(xe,{children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs(Dk,{defaultValue:"all",onValueChange:h=>e(h),children:[d.jsx(sl,{value:"all",text:"All Tickets"}),d.jsx(sl,{value:"open",text:"Open"}),d.jsx(sl,{value:"assigned",text:"Assigned to Me"}),d.jsx(sl,{value:"resolved",text:"Resolved"})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("select",{value:t,onChange:h=>r(h.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Statuses"}),d.jsx("option",{value:"open",children:"Open"}),d.jsx("option",{value:"in_progress",children:"In Progress"}),d.jsx("option",{value:"resolved",children:"Resolved"}),d.jsx("option",{value:"closed",children:"Closed"})]}),d.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Priorities"}),d.jsx("option",{value:"high",children:"High"}),d.jsx("option",{value:"medium",children:"Medium"}),d.jsx("option",{value:"low",children:"Low"})]})]})]}),d.jsx(rx,{data:a,columns:[{header:"Ticket",cell:({row:h})=>d.jsxs("div",{children:[d.jsx(ie,{className:"font-medium",children:h.original.subject}),d.jsx(ie,{className:"text-gray-500",children:h.original.userName})]})},{header:"Category",cell:({row:h})=>d.jsx(Lt,{size:"sm",children:h.original.category})},{header:"Status",cell:({row:h})=>d.jsx(Lt,{size:"sm",color:c(h.original.status),children:h.original.status.replace("_"," ")})},{header:"Priority",cell:({row:h})=>d.jsx(Lt,{size:"sm",color:u(h.original.priority),children:h.original.priority})},{header:"Created",cell:({row:h})=>Jt(h.original.createdAt,"MMM d, yyyy")},{header:"Assigned To",cell:({row:h})=>h.original.assignedTo||"-"},{header:"Actions",cell:({row:h})=>d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(jt,{variant:"secondary",size:"sm",children:"View"}),d.jsx(jt,{variant:"outline",size:"sm",children:"Assign"}),h.original.status!=="closed"&&d.jsx(jt,{variant:"danger",size:"sm",children:"Close"})]})}]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs(xe,{children:[d.jsx(He,{children:"Response Time"}),d.jsxs("div",{className:"mt-4",children:[d.jsx(ie,{className:"text-2xl font-bold",children:"2.5 hours"}),d.jsx(ie,{className:"text-gray-500",children:"Average first response"})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Resolution Rate"}),d.jsxs("div",{className:"mt-4",children:[d.jsx(ie,{className:"text-2xl font-bold",children:"85%"}),d.jsx(ie,{className:"text-gray-500",children:"Tickets resolved within SLA"})]})]}),d.jsxs(xe,{children:[d.jsx(He,{children:"Customer Satisfaction"}),d.jsxs("div",{className:"mt-4",children:[d.jsx(ie,{className:"text-2xl font-bold",children:"4.8/5.0"}),d.jsx(ie,{className:"text-gray-500",children:"Based on ticket feedback"})]})]})]})]})}function Fq({profile:n}){const[e,t]=R.useState("users");return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600",children:"System management and oversight"})]}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsxs("nav",{className:"flex border-b border-gray-200",children:[d.jsx("button",{onClick:()=>t("users"),className:`px-4 py-3 text-sm font-medium ${e==="users"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"User Management"}),d.jsx("button",{onClick:()=>t("analytics"),className:`px-4 py-3 text-sm font-medium ${e==="analytics"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Analytics"}),d.jsx("button",{onClick:()=>t("support"),className:`px-4 py-3 text-sm font-medium ${e==="support"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Support"})]}),d.jsxs("div",{className:"p-6",children:[e==="users"&&d.jsx(Oq,{}),e==="analytics"&&d.jsx(Lq,{}),e==="support"&&d.jsx(Vq,{})]})]})]})}function Uq(){const{currentUser:n}=ws(),[e,t]=R.useState("overview"),[r,i]=R.useState(null),[s,o]=R.useState(!0),[a,c]=R.useState("");R.useCallback(h=>{t(h)},[]),R.useEffect(()=>{n&&u()},[n]);async function u(){try{const f=await To.getInstance().getProfile(n.uid);i(f)}catch(h){console.error("Error loading profile:",h),c("Failed to load profile")}finally{o(!1)}}return s?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"text-lg text-gray-600",children:"Loading..."})}):a?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"text-lg text-red-600",children:a})}):r?d.jsxs(d.Fragment,{children:[r.userType==="admin"&&d.jsx(Fq,{profile:r}),r.userType==="consultant"&&d.jsx(j4,{profile:r,activeTab:e,onTabChange:t}),r.userType==="client"&&d.jsx(k4,{profile:r,activeTab:e,onTabChange:t})]}):d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"text-lg text-gray-600",children:"Profile not found"})})}const Bq=["Corporate Law","Intellectual Property","Contract Law","Employment Law","Tax Law","Real Estate Law","Immigration Law","Family Law","Criminal Law","Environmental Law"];function $q(){var f;const{currentUser:n}=ws(),e=vs(),t=To.getInstance(),[r,i]=R.useState(!1),[s,o]=R.useState(""),[a,c]=R.useState({displayName:"",expertise:[],hourlyRate:0,experience:"",certifications:[],availability:{}});R.useEffect(()=>{n&&u()},[n]);async function u(){if(n)try{const y=await t.getProfile(n.uid);y&&c(y)}catch(y){console.error("Error loading profile:",y),o("Failed to load profile")}}async function h(y){if(y.preventDefault(),!!n)try{o(""),i(!0),await t.createProfile(n.uid,{...a,id:n.uid,email:n.email,userType:"consultant",rating:0,reviews:[]}),e("/dashboard")}catch(b){console.error("Error saving profile:",b),o("Failed to save profile")}finally{i(!1)}}return d.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Complete Your Consultant Profile"}),s&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),d.jsxs("form",{onSubmit:h,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Display Name"}),d.jsx("input",{type:"text",required:!0,value:a.displayName,onChange:y=>c({...a,displayName:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expertise"}),d.jsx("select",{multiple:!0,value:a.expertise,onChange:y=>{const b=Array.from(y.target.selectedOptions,E=>E.value);c({...a,expertise:b})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:Bq.map(y=>d.jsx("option",{value:y,children:y},y))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly Rate ($)"}),d.jsx("input",{type:"number",required:!0,min:"0",value:a.hourlyRate,onChange:y=>c({...a,hourlyRate:Number(y.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Experience"}),d.jsx("textarea",{required:!0,value:a.experience,onChange:y=>c({...a,experience:y.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Certifications"}),d.jsx("input",{type:"text",value:(f=a.certifications)==null?void 0:f.join(", "),onChange:y=>c({...a,certifications:y.target.value.split(",").map(b=>b.trim()).filter(Boolean)}),placeholder:"Enter certifications separated by commas",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r?"Saving...":"Save Profile"})]})]})}function zq(){const{id:n}=mA(),[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,o]=R.useState("");R.useEffect(()=>{n&&a(n)},[n]);async function a(c){try{const h=await To.getInstance().getProfile(c);h&&h.userType==="consultant"?t(h):o("Consultant profile not found")}catch(u){console.error("Error loading profile:",u),o("Failed to load profile")}finally{i(!1)}}return r?d.jsx("div",{className:"text-center p-8",children:"Loading..."}):s||!e?d.jsx("div",{className:"text-center p-8 text-red-600",children:s}):d.jsx("div",{className:"max-w-4xl mx-auto p-6",children:d.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:d.jsxs("div",{className:"px-6 py-8",children:[d.jsxs("div",{className:"flex items-center",children:[e.photoURL&&d.jsx("img",{src:e.photoURL,alt:e.displayName,className:"h-20 w-20 rounded-full object-cover"}),d.jsxs("div",{className:"ml-4",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.displayName}),d.jsx("p",{className:"text-gray-500",children:e.email})]})]}),d.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Expertise"}),d.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:e.expertise.map(c=>d.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:c},c))})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rate"}),d.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:["$",e.hourlyRate,"/hr"]})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Experience"}),d.jsx("p",{className:"mt-2 text-gray-600",children:e.experience})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Certifications"}),d.jsx("ul",{className:"mt-2 space-y-1",children:e.certifications.map((c,u)=>d.jsxs("li",{className:"text-gray-600",children:["• ",c]},u))})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rating"}),d.jsxs("div",{className:"mt-2 flex items-center",children:[d.jsx("span",{className:"text-2xl font-bold text-gray-900",children:e.rating.toFixed(1)}),d.jsxs("span",{className:"ml-2 text-gray-600",children:["(",e.reviews.length," reviews)"]})]})]})]}),e.reviews.length>0&&d.jsxs("div",{className:"mt-8",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reviews"}),d.jsx("div",{className:"space-y-4",children:e.reviews.map(c=>d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-yellow-400",children:"★"}),d.jsx("span",{className:"ml-1 font-medium",children:c.rating})]}),d.jsx("span",{className:"text-sm text-gray-500",children:new Date(c.createdAt).toLocaleDateString()})]}),d.jsx("p",{className:"mt-2 text-gray-600",children:c.comment})]},c.id))})]})]})})})}function Bh({children:n}){const{currentUser:e}=ws();return e?n:d.jsx(IA,{to:"/login"})}function qq(){const{currentUser:n,logout:e}=ws(),t=vs(),[r,i]=R.useState("");async function s(){try{i(""),await e(),t("/login")}catch{i("Failed to log out")}}return d.jsx(Oi,{as:"nav",className:"bg-white shadow",children:({open:o})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex h-16 justify-between",children:[d.jsx("div",{className:"flex",children:d.jsx(Cn,{to:"/",className:"flex flex-shrink-0 items-center",children:d.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"LawLink"})})}),d.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-4",children:n?d.jsxs(d.Fragment,{children:[d.jsx(Cn,{to:"/",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",children:"Dashboard"}),d.jsx("button",{onClick:s,className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",children:"Sign Out"})]}):d.jsxs(d.Fragment,{children:[d.jsx(Cn,{to:"/login",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",children:"Sign In"}),d.jsx(Cn,{to:"/register",className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-2 rounded-md text-sm font-medium",children:"Sign Up"})]})}),d.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:d.jsxs(Oi.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:[d.jsx("span",{className:"sr-only",children:"Open main menu"}),o?d.jsx(_O,{className:"block h-6 w-6","aria-hidden":"true"}):d.jsx(hO,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),d.jsx(Oi.Panel,{className:"sm:hidden",children:d.jsx("div",{className:"space-y-1 pb-3 pt-2",children:n?d.jsxs(d.Fragment,{children:[d.jsx(Oi.Button,{as:Cn,to:"/",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-blue-600",children:"Dashboard"}),d.jsx(Oi.Button,{as:"button",onClick:s,className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-blue-600",children:"Sign Out"})]}):d.jsxs(d.Fragment,{children:[d.jsx(Oi.Button,{as:Cn,to:"/login",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-blue-600",children:"Sign In"}),d.jsx(Oi.Button,{as:Cn,to:"/register",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-blue-600",children:"Sign Up"})]})})}),r&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 text-center",children:r})]})})}const Wq=Le.object({type:Le.enum(["bug","feature","general"]),title:Le.string().min(5,"Title must be at least 5 characters"),description:Le.string().min(20,"Description must be at least 20 characters"),screenshot:Le.any().optional()});function Gq(){var a;const[n,e]=R.useState(!1),{register:t,handleSubmit:r,formState:{errors:i},reset:s}=Wp({resolver:Hp(Wq)}),o=async c=>{e(!0);try{console.log("Feedback submitted:",c),s()}catch(u){console.error("Error submitting feedback:",u)}finally{e(!1)}};return d.jsxs("form",{onSubmit:r(o),className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Feedback Type"}),d.jsxs("select",{...t("type"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[d.jsx("option",{value:"bug",children:"Bug Report"}),d.jsx("option",{value:"feature",children:"Feature Request"}),d.jsx("option",{value:"general",children:"General Feedback"})]}),i.type&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.type.message})]}),d.jsx(Ji,{label:"Title",...t("title"),error:(a=i.title)==null?void 0:a.message}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),d.jsx("textarea",{...t("description"),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),i.description&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Screenshot (optional)"}),d.jsx("input",{type:"file",accept:"image/*",...t("screenshot"),className:"mt-1 block w-full"})]}),d.jsx(jt,{type:"submit",variant:"primary",isLoading:n,className:"w-full",children:"Submit Feedback"})]})}function Hq(){const[n,e]=R.useState(!1);return d.jsxs(d.Fragment,{children:[d.jsx(jt,{onClick:()=>e(!0),className:"fixed bottom-4 right-4 z-40",variant:"primary",children:"Feedback"}),d.jsxs(Wd,{open:n,onClose:()=>e(!1),className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Wd.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6 shadow-xl",children:[d.jsx(Wd.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"Share Your Feedback"}),d.jsx(Gq,{})]})})]})]})}function Kq({message:n,type:e,onClose:t}){const r={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return d.jsxs("div",{className:`${r[e]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center justify-between`,children:[d.jsx("span",{children:n}),d.jsx("button",{onClick:t,className:"ml-4 text-white hover:text-gray-200 focus:outline-none",children:"×"})]})}function Yq(){const{toasts:n,removeToast:e}=Yp();return d.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:n.map(t=>d.jsx(Kq,{message:t.message,type:t.type,onClose:()=>e(t.id)},t.id))})}const Jq="359686521204-s84cb607j0fcv6l5rk00a7ne4ottoprf.apps.googleusercontent.com";function Zq(){return d.jsx(Lj,{children:d.jsx(qA,{clientId:Jq,children:d.jsx(FA,{children:d.jsx(Vj,{children:d.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[d.jsx(qq,{}),d.jsx(Hq,{}),d.jsx(Yq,{}),d.jsxs(PA,{children:[d.jsx(Wr,{path:"/login",element:d.jsx(SO,{})}),d.jsx(Wr,{path:"/register",element:d.jsx(EO,{})}),d.jsx(Wr,{path:"/register/client",element:d.jsx(CO,{})}),d.jsx(Wr,{path:"/register/consultant",element:d.jsx(kO,{})}),d.jsx(Wr,{path:"/",element:d.jsx(Bh,{children:d.jsx(Uq,{})})}),d.jsx(Wr,{path:"/profile/consultant/edit",element:d.jsx(Bh,{children:d.jsx($q,{})})}),d.jsx(Wr,{path:"/profile/consultant/:id",element:d.jsx(Bh,{children:d.jsx(zq,{})})})]})]})})})})})}$h.createRoot(document.getElementById("root")).render(d.jsx(Me.StrictMode,{children:d.jsx(Zq,{})}))});export default Qq();
